export function getHtml(){
  return "<!doctype html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <link rel=\"icon\" type=\"image/ico\" href=\"/favicon.ico\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>remult-admin</title>\n    <script type=\"module\" crossorigin>\nvar kf=Object.defineProperty;var Sf=(t,e,n)=>e in t?kf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ci=(t,e,n)=>Sf(t,typeof e!=\"symbol\"?e+\"\":e,n);(function(){const e=document.createElement(\"link\").relList;if(e&&e.supports&&e.supports(\"modulepreload\"))return;for(const r of document.querySelectorAll('link[rel=\"modulepreload\"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type===\"childList\")for(const s of o.addedNodes)s.tagName===\"LINK\"&&s.rel===\"modulepreload\"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin===\"use-credentials\"?o.credentials=\"include\":r.crossOrigin===\"anonymous\"?o.credentials=\"omit\":o.credentials=\"same-origin\",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function le(){}function we(t,e){for(const n in e)t[n]=e[n];return t}function Hl(t){return t()}function Po(){return Object.create(null)}function qe(t){t.forEach(Hl)}function Re(t){return typeof t==\"function\"}function ce(t,e){return t!=t?e==e:t!==e||t&&typeof t==\"object\"||typeof t==\"function\"}function Bl(t,e){return t!=t?e==e:t!==e}function Ef(t){return Object.keys(t).length===0}function Zn(t,...e){if(t==null){for(const i of e)i(void 0);return le}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ee(t){let e;return Zn(t,n=>e=n)(),e}function j(t,e,n){t.$$.on_destroy.push(Zn(e,n))}function ot(t,e,n,i){if(t){const r=Vl(t,e,n,i);return t[0](r)}}function Vl(t,e,n,i){return t[1]&&i?we(n.ctx.slice(),t[1](i(e))):n.ctx}function st(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r==\"object\"){const o=[],s=Math.max(e.dirty.length,r.length);for(let l=0;l<s;l+=1)o[l]=e.dirty[l]|r[l];return o}return e.dirty|r}return e.dirty}function lt(t,e,n,i,r,o){if(r){const s=Vl(e,n,i,o);t.p(s,r)}}function at(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function yt(t){const e={};for(const n in t)n[0]!==\"$\"&&(e[n]=t[n]);return e}function Le(t,e){const n={};e=new Set(e);for(const i in t)!e.has(i)&&i[0]!==\"$\"&&(n[i]=t[i]);return n}function Cf(t){const e={};for(const n in t)e[n]=!0;return e}function No(t){return t??\"\"}function zi(t,e,n){return t.set(n),e}function Ue(t){return t&&Re(t.destroy)?t.destroy:le}const ql=typeof window<\"u\"?window:typeof globalThis<\"u\"?globalThis:global;function X(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function B(t){t.parentNode&&t.parentNode.removeChild(t)}function Ot(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function Z(t){return document.createElement(t)}function Ce(t){return document.createElementNS(\"http://www.w3.org/2000/svg\",t)}function ze(t){return document.createTextNode(t)}function ne(){return ze(\" \")}function Ve(){return ze(\"\")}function de(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function E(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Of=[\"width\",\"height\"];function An(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const i in e)e[i]==null?t.removeAttribute(i):i===\"style\"?t.style.cssText=e[i]:i===\"__value\"?t.value=t[i]=e[i]:n[i]&&n[i].set&&Of.indexOf(i)===-1?t[i]=e[i]:E(t,i,e[i])}function If(t){return Array.from(t.childNodes)}function Qe(t,e){e=\"\"+e,t.data!==e&&(t.data=e)}function on(t,e){t.value=e??\"\"}function fe(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,\"\")}let di;function Tf(){if(di===void 0){di=!1;try{typeof window<\"u\"&&window.parent&&window.parent.document}catch{di=!0}}return di}function Mf(t,e){getComputedStyle(t).position===\"static\"&&(t.style.position=\"relative\");const i=Z(\"iframe\");i.setAttribute(\"style\",\"display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;\"),i.setAttribute(\"aria-hidden\",\"true\"),i.tabIndex=-1;const r=Tf();let o;return r?(i.src=\"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\\/script>\",o=de(window,\"message\",s=>{s.source===i.contentWindow&&e()})):(i.src=\"about:blank\",i.onload=()=>{o=de(i.contentWindow,\"resize\",e),e()}),X(t,i),()=>{(r||o&&i.contentWindow)&&o(),B(i)}}function ge(t,e,n){t.classList.toggle(e,!!n)}function Af(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}function Kt(t,e){return new t(e)}let Qn;function Kn(t){Qn=t}function ln(){if(!Qn)throw new Error(\"Function called outside component initialization\");return Qn}function Rn(t){ln().$$.on_mount.push(t)}function Pf(t){ln().$$.after_update.push(t)}function or(t){ln().$$.on_destroy.push(t)}function an(){const t=ln();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const o=Af(e,n,{cancelable:i});return r.slice().forEach(s=>{s.call(t,o)}),!o.defaultPrevented}return!0}}function Li(t,e){return ln().$$.context.set(t,e),e}function Hi(t){return ln().$$.context.get(t)}function Nf(t){return ln().$$.context.has(t)}function _e(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const wn=[],It=[];let On=[];const Lr=[],Wl=Promise.resolve();let Hr=!1;function Xl(){Hr||(Hr=!0,Wl.then(Kl))}function Yl(){return Xl(),Wl}function Bi(t){On.push(t)}function io(t){Lr.push(t)}const vr=new Set;let yn=0;function Kl(){if(yn!==0)return;const t=Qn;do{try{for(;yn<wn.length;){const e=wn[yn];yn++,Kn(e),Ff(e.$$)}}catch(e){throw wn.length=0,yn=0,e}for(Kn(null),wn.length=0,yn=0;It.length;)It.pop()();for(let e=0;e<On.length;e+=1){const n=On[e];vr.has(n)||(vr.add(n),n())}On.length=0}while(wn.length);for(;Lr.length;)Lr.pop()();Hr=!1,vr.clear(),Kn(t)}function Ff(t){if(t.fragment!==null){t.update(),qe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Bi)}}function Df(t){const e=[],n=[];On.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),On=e}const Oi=new Set;let Qt;function Oe(){Qt={r:0,c:[],p:Qt}}function Ie(){Qt.r||qe(Qt.c),Qt=Qt.p}function A(t,e){t&&t.i&&(Oi.delete(t),t.i(e))}function z(t,e,n,i){if(t&&t.o){if(Oi.has(t))return;Oi.add(t),Qt.c.push(()=>{Oi.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function sr(t,e){z(t,1,1,()=>{e.delete(t.key)})}function lr(t,e,n,i,r,o,s,l,a,u,f,c){let d=t.length,h=o.length,g=d;const y={};for(;g--;)y[t[g].key]=g;const p=[],m=new Map,w=new Map,b=[];for(g=h;g--;){const S=c(r,o,g),C=n(S);let O=s.get(C);O?b.push(()=>O.p(S,e)):(O=u(C,S),O.c()),m.set(C,p[g]=O),C in y&&w.set(C,Math.abs(g-y[C]))}const _=new Set,I=new Set;function v(S){A(S,1),S.m(l,f),s.set(S.key,S),f=S.first,h--}for(;d&&h;){const S=p[h-1],C=t[d-1],O=S.key,R=C.key;S===C?(f=S.first,d--,h--):m.has(R)?!s.has(O)||_.has(O)?v(S):I.has(R)?d--:w.get(O)>w.get(R)?(I.add(O),v(S)):(_.add(R),d--):(a(C,s),d--)}for(;d--;){const S=t[d];m.has(S.key)||a(S,s)}for(;h;)v(p[h-1]);return qe(b),p}function ct(t,e){const n={},i={},r={$$scope:1};let o=t.length;for(;o--;){const s=t[o],l=e[o];if(l){for(const a in s)a in l||(i[a]=1);for(const a in l)r[a]||(n[a]=l[a],r[a]=1);t[o]=l}else for(const a in s)r[a]=1}for(const s in i)s in n||(n[s]=void 0);return n}function Tt(t){return typeof t==\"object\"&&t!==null?t:{}}function ro(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function te(t){t&&t.c()}function x(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),Bi(()=>{const o=t.$$.on_mount.map(Hl).filter(Re);t.$$.on_destroy?t.$$.on_destroy.push(...o):qe(o),t.$$.on_mount=[]}),r.forEach(Bi)}function $(t,e){const n=t.$$;n.fragment!==null&&(Df(n.after_update),qe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Rf(t,e){t.$$.dirty[0]===-1&&(wn.push(t),Xl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ae(t,e,n,i,r,o,s=null,l=[-1]){const a=Qn;Kn(t);const u=t.$$={fragment:null,ctx:[],props:o,update:le,not_equal:r,bound:Po(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Po(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(c,d,...h)=>{const g=h.length?h[0]:d;return u.ctx&&r(u.ctx[c],u.ctx[c]=g)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](g),f&&Rf(t,c)),d}):[],u.update(),f=!0,qe(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const c=If(e.target);u.fragment&&u.fragment.l(c),c.forEach(B)}else u.fragment&&u.fragment.c();e.intro&&A(t.$$.fragment),x(t,e.target,e.anchor),Kl()}Kn(a)}class ue{constructor(){ci(this,\"$$\");ci(this,\"$$set\")}$destroy(){$(this,1),this.$destroy=le}$on(e,n){if(!Re(n))return le;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ef(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zf=\"4\";typeof window<\"u\"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zf);const pn=[];function ft(t,e){return{subscribe:re(t,e).subscribe}}function re(t,e=le){let n;const i=new Set;function r(l){if(ce(t,l)&&(t=l,n)){const a=!pn.length;for(const u of i)u[1](),pn.push(u,t);if(a){for(let u=0;u<pn.length;u+=2)pn[u][0](pn[u+1]);pn.length=0}}}function o(l){r(l(t))}function s(l,a=le){const u=[l,a];return i.add(u),i.size===1&&(n=e(r,o)||le),l(t),()=>{i.delete(u),i.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:s}}function Jt(t,e,n){const i=!Array.isArray(t),r=i?[t]:t;if(!r.every(Boolean))throw new Error(\"derived() expects stores as input, got a falsy value\");const o=e.length<2;return ft(n,(s,l)=>{let a=!1;const u=[];let f=0,c=le;const d=()=>{if(f)return;c();const g=e(i?u[0]:u,s,l);o?s(g):c=Re(g)?g:le},h=r.map((g,y)=>Zn(g,p=>{u[y]=p,f&=~(1<<y),a&&d()},()=>{f|=1<<y}));return a=!0,d(),function(){qe(h),c(),a=!1}})}function Jl(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,i,r,o,s=[],l=\"\",a=t.split(\"/\");for(a[0]||a.shift();r=a.shift();)n=r[0],n===\"*\"?(s.push(\"wild\"),l+=\"/(.*)\"):n===\":\"?(i=r.indexOf(\"?\",1),o=r.indexOf(\".\",1),s.push(r.substring(1,~i?i:~o?o:r.length)),l+=~i&&!~o?\"(?:/([^/]+?))?\":\"/([^/]+?)\",~o&&(l+=(~i?\"?\":\"\")+\"\\\\\"+r.substring(o))):l+=\"/\"+r;return{keys:s,pattern:new RegExp(\"^\"+l+\"/?$\",\"i\")}}function Lf(t){let e,n,i;const r=[t[2]];var o=t[0];function s(l,a){let u={};for(let f=0;f<r.length;f+=1)u=we(u,r[f]);return a!==void 0&&a&4&&(u=we(u,ct(r,[Tt(l[2])]))),{props:u}}return o&&(e=Kt(o,s(t)),e.$on(\"routeEvent\",t[7])),{c(){e&&te(e.$$.fragment),n=Ve()},m(l,a){e&&x(e,l,a),V(l,n,a),i=!0},p(l,a){if(a&1&&o!==(o=l[0])){if(e){Oe();const u=e;z(u.$$.fragment,1,0,()=>{$(u,1)}),Ie()}o?(e=Kt(o,s(l,a)),e.$on(\"routeEvent\",l[7]),te(e.$$.fragment),A(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}else if(o){const u=a&4?ct(r,[Tt(l[2])]):{};e.$set(u)}},i(l){i||(e&&A(e.$$.fragment,l),i=!0)},o(l){e&&z(e.$$.fragment,l),i=!1},d(l){l&&B(n),e&&$(e,l)}}}function Hf(t){let e,n,i;const r=[{params:t[1]},t[2]];var o=t[0];function s(l,a){let u={};for(let f=0;f<r.length;f+=1)u=we(u,r[f]);return a!==void 0&&a&6&&(u=we(u,ct(r,[a&2&&{params:l[1]},a&4&&Tt(l[2])]))),{props:u}}return o&&(e=Kt(o,s(t)),e.$on(\"routeEvent\",t[6])),{c(){e&&te(e.$$.fragment),n=Ve()},m(l,a){e&&x(e,l,a),V(l,n,a),i=!0},p(l,a){if(a&1&&o!==(o=l[0])){if(e){Oe();const u=e;z(u.$$.fragment,1,0,()=>{$(u,1)}),Ie()}o?(e=Kt(o,s(l,a)),e.$on(\"routeEvent\",l[6]),te(e.$$.fragment),A(e.$$.fragment,1),x(e,n.parentNode,n)):e=null}else if(o){const u=a&6?ct(r,[a&2&&{params:l[1]},a&4&&Tt(l[2])]):{};e.$set(u)}},i(l){i||(e&&A(e.$$.fragment,l),i=!0)},o(l){e&&z(e.$$.fragment,l),i=!1},d(l){l&&B(n),e&&$(e,l)}}}function Bf(t){let e,n,i,r;const o=[Hf,Lf],s=[];function l(a,u){return a[1]?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),i=Ve()},m(a,u){s[e].m(a,u),V(a,i,u),r=!0},p(a,[u]){let f=e;e=l(a),e===f?s[e].p(a,u):(Oe(),z(s[f],1,1,()=>{s[f]=null}),Ie(),n=s[e],n?n.p(a,u):(n=s[e]=o[e](a),n.c()),A(n,1),n.m(i.parentNode,i))},i(a){r||(A(n),r=!0)},o(a){z(n),r=!1},d(a){a&&B(i),s[e].d(a)}}}function Fo(){const t=window.location.href.indexOf(\"#/\");let e=t>-1?window.location.href.substr(t+1):\"/\";const n=e.indexOf(\"?\");let i=\"\";return n>-1&&(i=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:i}}const ar=ft(null,function(e){e(Fo());const n=()=>{e(Fo())};return window.addEventListener(\"hashchange\",n,!1),function(){window.removeEventListener(\"hashchange\",n,!1)}});Jt(ar,t=>t.location);Jt(ar,t=>t.querystring);const Do=re(void 0);function Vf(t){t?window.scrollTo(t.__svelte_spa_router_scrollX,t.__svelte_spa_router_scrollY):window.scrollTo(0,0)}function qf(t,e,n){let{routes:i={}}=e,{prefix:r=\"\"}=e,{restoreScrollState:o=!1}=e;class s{constructor(I,v){if(!v||typeof v!=\"function\"&&(typeof v!=\"object\"||v._sveltesparouter!==!0))throw Error(\"Invalid component object\");if(!I||typeof I==\"string\"&&(I.length<1||I.charAt(0)!=\"/\"&&I.charAt(0)!=\"*\")||typeof I==\"object\"&&!(I instanceof RegExp))throw Error('Invalid value for \"path\" argument - strings must start with / or *');const{pattern:S,keys:C}=Jl(I);this.path=I,typeof v==\"object\"&&v._sveltesparouter===!0?(this.component=v.component,this.conditions=v.conditions||[],this.userData=v.userData,this.props=v.props||{}):(this.component=()=>Promise.resolve(v),this.conditions=[],this.props={}),this._pattern=S,this._keys=C}match(I){if(r){if(typeof r==\"string\")if(I.startsWith(r))I=I.substr(r.length)||\"/\";else return null;else if(r instanceof RegExp){const O=I.match(r);if(O&&O[0])I=I.substr(O[0].length)||\"/\";else return null}}const v=this._pattern.exec(I);if(v===null)return null;if(this._keys===!1)return v;const S={};let C=0;for(;C<this._keys.length;){try{S[this._keys[C]]=decodeURIComponent(v[C+1]||\"\")||null}catch{S[this._keys[C]]=null}C++}return S}async checkConditions(I){for(let v=0;v<this.conditions.length;v++)if(!await this.conditions[v](I))return!1;return!0}}const l=[];i instanceof Map?i.forEach((_,I)=>{l.push(new s(I,_))}):Object.keys(i).forEach(_=>{l.push(new s(_,i[_]))});let a=null,u=null,f={};const c=an();async function d(_,I){await Yl(),c(_,I)}let h=null,g=null;o&&(g=_=>{_.state&&(_.state.__svelte_spa_router_scrollY||_.state.__svelte_spa_router_scrollX)?h=_.state:h=null},window.addEventListener(\"popstate\",g),Pf(()=>{Vf(h)}));let y=null,p=null;const m=ar.subscribe(async _=>{y=_;let I=0;for(;I<l.length;){const v=l[I].match(_.location);if(!v){I++;continue}const S={route:l[I].path,location:_.location,querystring:_.querystring,userData:l[I].userData,params:v&&typeof v==\"object\"&&Object.keys(v).length?v:null};if(!await l[I].checkConditions(S)){n(0,a=null),p=null,d(\"conditionsFailed\",S);return}d(\"routeLoading\",Object.assign({},S));const C=l[I].component;if(p!=C){C.loading?(n(0,a=C.loading),p=C,n(1,u=C.loadingParams),n(2,f={}),d(\"routeLoaded\",Object.assign({},S,{component:a,name:a.name,params:u}))):(n(0,a=null),p=null);const O=await C();if(_!=y)return;n(0,a=O&&O.default||O),p=C}v&&typeof v==\"object\"&&Object.keys(v).length?n(1,u=v):n(1,u=null),n(2,f=l[I].props),d(\"routeLoaded\",Object.assign({},S,{component:a,name:a.name,params:u})).then(()=>{Do.set(u)});return}n(0,a=null),p=null,Do.set(void 0)});or(()=>{m(),g&&window.removeEventListener(\"popstate\",g)});function w(_){_e.call(this,t,_)}function b(_){_e.call(this,t,_)}return t.$$set=_=>{\"routes\"in _&&n(3,i=_.routes),\"prefix\"in _&&n(4,r=_.prefix),\"restoreScrollState\"in _&&n(5,o=_.restoreScrollState)},t.$$.update=()=>{t.$$.dirty&32&&(history.scrollRestoration=o?\"manual\":\"auto\")},[a,u,f,i,r,o,w,b]}class Wf extends ue{constructor(e){super(),ae(this,e,qf,Bf,ce,{routes:3,prefix:4,restoreScrollState:5})}}function Ae(t){if(typeof t==\"string\"||typeof t==\"number\")return\"\"+t;let e=\"\";if(Array.isArray(t))for(let n=0,i;n<t.length;n++)(i=Ae(t[n]))!==\"\"&&(e+=(e&&\" \")+i);else for(let n in t)t[n]&&(e+=(e&&\" \")+n);return e}var Xf={value:()=>{}};function ur(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+\"\")||i in n||/[\\s.]/.test(i))throw new Error(\"illegal type: \"+i);n[i]=[]}return new Ii(n)}function Ii(t){this._=t}function Yf(t,e){return t.trim().split(/^|\\s+/).map(function(n){var i=\"\",r=n.indexOf(\".\");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error(\"unknown type: \"+n);return{type:n,name:i}})}Ii.prototype=ur.prototype={constructor:Ii,on:function(t,e){var n=this._,i=Yf(t+\"\",n),r,o=-1,s=i.length;if(arguments.length<2){for(;++o<s;)if((r=(t=i[o]).type)&&(r=Kf(n[r],t.name)))return r;return}if(e!=null&&typeof e!=\"function\")throw new Error(\"invalid callback: \"+e);for(;++o<s;)if(r=(t=i[o]).type)n[r]=Ro(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Ro(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ii(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,o;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(o=this._[t],i=0,r=o.length;i<r;++i)o[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error(\"unknown type: \"+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};function Kf(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Ro(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Xf,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var Br=\"http://www.w3.org/1999/xhtml\";const zo={svg:\"http://www.w3.org/2000/svg\",xhtml:Br,xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"};function fr(t){var e=t+=\"\",n=e.indexOf(\":\");return n>=0&&(e=t.slice(0,n))!==\"xmlns\"&&(t=t.slice(n+1)),zo.hasOwnProperty(e)?{space:zo[e],local:t}:t}function Jf(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Br&&e.documentElement.namespaceURI===Br?e.createElement(t):e.createElementNS(n,t)}}function Uf(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Ul(t){var e=fr(t);return(e.local?Uf:Jf)(e)}function jf(){}function oo(t){return t==null?jf:function(){return this.querySelector(t)}}function Gf(t){typeof t!=\"function\"&&(t=oo(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=new Array(s),a,u,f=0;f<s;++f)(a=o[f])&&(u=t.call(a,a.__data__,f,o))&&(\"__data__\"in a&&(u.__data__=a.__data__),l[f]=u);return new dt(i,this._parents)}function Zf(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Qf(){return[]}function jl(t){return t==null?Qf:function(){return this.querySelectorAll(t)}}function xf(t){return function(){return Zf(t.apply(this,arguments))}}function $f(t){typeof t==\"function\"?t=xf(t):t=jl(t);for(var e=this._groups,n=e.length,i=[],r=[],o=0;o<n;++o)for(var s=e[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),r.push(a));return new dt(i,r)}function Gl(t){return function(){return this.matches(t)}}function Zl(t){return function(e){return e.matches(t)}}var ec=Array.prototype.find;function tc(t){return function(){return ec.call(this.children,t)}}function nc(){return this.firstElementChild}function ic(t){return this.select(t==null?nc:tc(typeof t==\"function\"?t:Zl(t)))}var rc=Array.prototype.filter;function oc(){return Array.from(this.children)}function sc(t){return function(){return rc.call(this.children,t)}}function lc(t){return this.selectAll(t==null?oc:sc(typeof t==\"function\"?t:Zl(t)))}function ac(t){typeof t!=\"function\"&&(t=Gl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new dt(i,this._parents)}function Ql(t){return new Array(t.length)}function uc(){return new dt(this._enter||this._groups.map(Ql),this._parents)}function Vi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Vi.prototype={constructor:Vi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function fc(t){return function(){return t}}function cc(t,e,n,i,r,o){for(var s=0,l,a=e.length,u=o.length;s<u;++s)(l=e[s])?(l.__data__=o[s],i[s]=l):n[s]=new Vi(t,o[s]);for(;s<a;++s)(l=e[s])&&(r[s]=l)}function dc(t,e,n,i,r,o,s){var l,a,u=new Map,f=e.length,c=o.length,d=new Array(f),h;for(l=0;l<f;++l)(a=e[l])&&(d[l]=h=s.call(a,a.__data__,l,e)+\"\",u.has(h)?r[l]=a:u.set(h,a));for(l=0;l<c;++l)h=s.call(t,o[l],l,o)+\"\",(a=u.get(h))?(i[l]=a,a.__data__=o[l],u.delete(h)):n[l]=new Vi(t,o[l]);for(l=0;l<f;++l)(a=e[l])&&u.get(d[l])===a&&(r[l]=a)}function hc(t){return t.__data__}function gc(t,e){if(!arguments.length)return Array.from(this,hc);var n=e?dc:cc,i=this._parents,r=this._groups;typeof t!=\"function\"&&(t=fc(t));for(var o=r.length,s=new Array(o),l=new Array(o),a=new Array(o),u=0;u<o;++u){var f=i[u],c=r[u],d=c.length,h=mc(t.call(f,f&&f.__data__,u,i)),g=h.length,y=l[u]=new Array(g),p=s[u]=new Array(g),m=a[u]=new Array(d);n(f,c,y,p,m,h,e);for(var w=0,b=0,_,I;w<g;++w)if(_=y[w]){for(w>=b&&(b=w+1);!(I=p[b])&&++b<g;);_._next=I||null}}return s=new dt(s,i),s._enter=l,s._exit=a,s}function mc(t){return typeof t==\"object\"&&\"length\"in t?t:Array.from(t)}function yc(){return new dt(this._exit||this._groups.map(Ql),this._parents)}function pc(t,e,n){var i=this.enter(),r=this,o=this.exit();return typeof t==\"function\"?(i=t(i),i&&(i=i.selection())):i=i.append(t+\"\"),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?o.remove():n(o),i&&r?i.merge(r).order():r}function bc(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,s=Math.min(r,o),l=new Array(r),a=0;a<s;++a)for(var u=n[a],f=i[a],c=u.length,d=l[a]=new Array(c),h,g=0;g<c;++g)(h=u[g]||f[g])&&(d[g]=h);for(;a<r;++a)l[a]=n[a];return new dt(l,this._parents)}function _c(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,o=i[r],s;--r>=0;)(s=i[r])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function wc(t){t||(t=vc);function e(c,d){return c&&d?t(c.__data__,d.__data__):!c-!d}for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var s=n[o],l=s.length,a=r[o]=new Array(l),u,f=0;f<l;++f)(u=s[f])&&(a[f]=u);a.sort(e)}return new dt(r,this._parents).order()}function vc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function kc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Sc(){return Array.from(this)}function Ec(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}function Cc(){let t=0;for(const e of this)++t;return t}function Oc(){return!this.node()}function Ic(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],o=0,s=r.length,l;o<s;++o)(l=r[o])&&t.call(l,l.__data__,o,r);return this}function Tc(t){return function(){this.removeAttribute(t)}}function Mc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ac(t,e){return function(){this.setAttribute(t,e)}}function Pc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Nc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Fc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Dc(t,e){var n=fr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Mc:Tc:typeof e==\"function\"?n.local?Fc:Nc:n.local?Pc:Ac)(n,e))}function xl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rc(t){return function(){this.style.removeProperty(t)}}function zc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Lc(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Hc(t,e,n){return arguments.length>1?this.each((e==null?Rc:typeof e==\"function\"?Lc:zc)(t,e,n??\"\")):Pn(this.node(),t)}function Pn(t,e){return t.style.getPropertyValue(e)||xl(t).getComputedStyle(t,null).getPropertyValue(e)}function Bc(t){return function(){delete this[t]}}function Vc(t,e){return function(){this[t]=e}}function qc(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Wc(t,e){return arguments.length>1?this.each((e==null?Bc:typeof e==\"function\"?qc:Vc)(t,e)):this.node()[t]}function $l(t){return t.trim().split(/^|\\s+/)}function so(t){return t.classList||new ea(t)}function ea(t){this._node=t,this._names=$l(t.getAttribute(\"class\")||\"\")}ea.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute(\"class\",this._names.join(\" \")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute(\"class\",this._names.join(\" \")))},contains:function(t){return this._names.indexOf(t)>=0}};function ta(t,e){for(var n=so(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function na(t,e){for(var n=so(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Xc(t){return function(){ta(this,t)}}function Yc(t){return function(){na(this,t)}}function Kc(t,e){return function(){(e.apply(this,arguments)?ta:na)(this,t)}}function Jc(t,e){var n=$l(t+\"\");if(arguments.length<2){for(var i=so(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e==\"function\"?Kc:e?Xc:Yc)(n,e))}function Uc(){this.textContent=\"\"}function jc(t){return function(){this.textContent=t}}function Gc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??\"\"}}function Zc(t){return arguments.length?this.each(t==null?Uc:(typeof t==\"function\"?Gc:jc)(t)):this.node().textContent}function Qc(){this.innerHTML=\"\"}function xc(t){return function(){this.innerHTML=t}}function $c(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??\"\"}}function ed(t){return arguments.length?this.each(t==null?Qc:(typeof t==\"function\"?$c:xc)(t)):this.node().innerHTML}function td(){this.nextSibling&&this.parentNode.appendChild(this)}function nd(){return this.each(td)}function id(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rd(){return this.each(id)}function od(t){var e=typeof t==\"function\"?t:Ul(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function sd(){return null}function ld(t,e){var n=typeof t==\"function\"?t:Ul(t),i=e==null?sd:typeof e==\"function\"?e:oo(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function ad(){var t=this.parentNode;t&&t.removeChild(this)}function ud(){return this.each(ad)}function fd(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function cd(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dd(t){return this.select(t?cd:fd)}function hd(t){return arguments.length?this.property(\"__data__\",t):this.node().__data__}function gd(t){return function(e){t.call(this,e,this.__data__)}}function md(t){return t.trim().split(/^|\\s+/).map(function(e){var n=\"\",i=e.indexOf(\".\");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function yd(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,o;n<r;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++i]=o;++i?e.length=i:delete this.__on}}}function pd(t,e,n){return function(){var i=this.__on,r,o=gd(e);if(i){for(var s=0,l=i.length;s<l;++s)if((r=i[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=e;return}}this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function bd(t,e,n){var i=md(t+\"\"),r,o=i.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var a=0,u=l.length,f;a<u;++a)for(r=0,f=l[a];r<o;++r)if((s=i[r]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?pd:yd,r=0;r<o;++r)this.each(l(i[r],e,n));return this}function ia(t,e,n){var i=xl(t),r=i.CustomEvent;typeof r==\"function\"?r=new r(e,n):(r=i.document.createEvent(\"Event\"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function _d(t,e){return function(){return ia(this,t,e)}}function wd(t,e){return function(){return ia(this,t,e.apply(this,arguments))}}function vd(t,e){return this.each((typeof e==\"function\"?wd:_d)(t,e))}function*kd(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length,s;r<o;++r)(s=i[r])&&(yield s)}var ra=[null];function dt(t,e){this._groups=t,this._parents=e}function oi(){return new dt([[document.documentElement]],ra)}function Sd(){return this}dt.prototype=oi.prototype={constructor:dt,select:Gf,selectAll:$f,selectChild:ic,selectChildren:lc,filter:ac,data:gc,enter:uc,exit:yc,join:pc,merge:bc,selection:Sd,order:_c,sort:wc,call:kc,nodes:Sc,node:Ec,size:Cc,empty:Oc,each:Ic,attr:Dc,style:Hc,property:Wc,classed:Jc,text:Zc,html:ed,raise:nd,lower:rd,append:od,insert:ld,remove:ud,clone:dd,datum:hd,on:bd,dispatch:vd,[Symbol.iterator]:kd};function gt(t){return typeof t==\"string\"?new dt([[document.querySelector(t)]],[document.documentElement]):new dt([[t]],ra)}function Ed(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bt(t,e){if(t=Ed(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const Cd={passive:!1},xn={capture:!0,passive:!1};function kr(t){t.stopImmediatePropagation()}function In(t){t.preventDefault(),t.stopImmediatePropagation()}function oa(t){var e=t.document.documentElement,n=gt(t).on(\"dragstart.drag\",In,xn);\"onselectstart\"in e?n.on(\"selectstart.drag\",In,xn):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect=\"none\")}function sa(t,e){var n=t.document.documentElement,i=gt(t).on(\"dragstart.drag\",null);e&&(i.on(\"click.drag\",In,xn),setTimeout(function(){i.on(\"click.drag\",null)},0)),\"onselectstart\"in n?i.on(\"selectstart.drag\",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const hi=t=>()=>t;function Vr(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:s,y:l,dx:a,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}Vr.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Od(t){return!t.ctrlKey&&!t.button}function Id(){return this.parentNode}function Td(t,e){return e??{x:t.x,y:t.y}}function Md(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function Ad(){var t=Od,e=Id,n=Td,i=Md,r={},o=ur(\"start\",\"drag\",\"end\"),s=0,l,a,u,f,c=0;function d(_){_.on(\"mousedown.drag\",h).filter(i).on(\"touchstart.drag\",p).on(\"touchmove.drag\",m,Cd).on(\"touchend.drag touchcancel.drag\",w).style(\"touch-action\",\"none\").style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}function h(_,I){if(!(f||!t.call(this,_,I))){var v=b(this,e.call(this,_,I),_,I,\"mouse\");v&&(gt(_.view).on(\"mousemove.drag\",g,xn).on(\"mouseup.drag\",y,xn),oa(_.view),kr(_),u=!1,l=_.clientX,a=_.clientY,v(\"start\",_))}}function g(_){if(In(_),!u){var I=_.clientX-l,v=_.clientY-a;u=I*I+v*v>c}r.mouse(\"drag\",_)}function y(_){gt(_.view).on(\"mousemove.drag mouseup.drag\",null),sa(_.view,u),In(_),r.mouse(\"end\",_)}function p(_,I){if(t.call(this,_,I)){var v=_.changedTouches,S=e.call(this,_,I),C=v.length,O,R;for(O=0;O<C;++O)(R=b(this,S,_,I,v[O].identifier,v[O]))&&(kr(_),R(\"start\",_,v[O]))}}function m(_){var I=_.changedTouches,v=I.length,S,C;for(S=0;S<v;++S)(C=r[I[S].identifier])&&(In(_),C(\"drag\",_,I[S]))}function w(_){var I=_.changedTouches,v=I.length,S,C;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),S=0;S<v;++S)(C=r[I[S].identifier])&&(kr(_),C(\"end\",_,I[S]))}function b(_,I,v,S,C,O){var R=o.copy(),D=bt(O||v,I),W,P,k;if((k=n.call(_,new Vr(\"beforestart\",{sourceEvent:v,target:d,identifier:C,active:s,x:D[0],y:D[1],dx:0,dy:0,dispatch:R}),S))!=null)return W=k.x-D[0]||0,P=k.y-D[1]||0,function F(M,N,H){var K=D,Y;switch(M){case\"start\":r[C]=F,Y=s++;break;case\"end\":delete r[C],--s;case\"drag\":D=bt(H||N,I),Y=s;break}R.call(M,_,new Vr(M,{sourceEvent:N,subject:k,target:d,identifier:C,active:Y,x:D[0]+W,y:D[1]+P,dx:D[0]-K[0],dy:D[1]-K[1],dispatch:R}),S)}}return d.filter=function(_){return arguments.length?(t=typeof _==\"function\"?_:hi(!!_),d):t},d.container=function(_){return arguments.length?(e=typeof _==\"function\"?_:hi(_),d):e},d.subject=function(_){return arguments.length?(n=typeof _==\"function\"?_:hi(_),d):n},d.touchable=function(_){return arguments.length?(i=typeof _==\"function\"?_:hi(!!_),d):i},d.on=function(){var _=o.on.apply(o,arguments);return _===o?d:_},d.clickDistance=function(_){return arguments.length?(c=(_=+_)*_,d):Math.sqrt(c)},d}function lo(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function la(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function si(){}var $n=.7,qi=1/$n,Tn=\"\\\\s*([+-]?\\\\d+)\\\\s*\",ei=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",Et=\"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",Pd=/^#([0-9a-f]{3,8})$/,Nd=new RegExp(`^rgb\\\\(${Tn},${Tn},${Tn}\\\\)$`),Fd=new RegExp(`^rgb\\\\(${Et},${Et},${Et}\\\\)$`),Dd=new RegExp(`^rgba\\\\(${Tn},${Tn},${Tn},${ei}\\\\)$`),Rd=new RegExp(`^rgba\\\\(${Et},${Et},${Et},${ei}\\\\)$`),zd=new RegExp(`^hsl\\\\(${ei},${Et},${Et}\\\\)$`),Ld=new RegExp(`^hsla\\\\(${ei},${Et},${Et},${ei}\\\\)$`),Lo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lo(si,ti,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ho,formatHex:Ho,formatHex8:Hd,formatHsl:Bd,formatRgb:Bo,toString:Bo});function Ho(){return this.rgb().formatHex()}function Hd(){return this.rgb().formatHex8()}function Bd(){return aa(this).formatHsl()}function Bo(){return this.rgb().formatRgb()}function ti(t){var e,n;return t=(t+\"\").trim().toLowerCase(),(e=Pd.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Vo(e):n===3?new it(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?gi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?gi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Nd.exec(t))?new it(e[1],e[2],e[3],1):(e=Fd.exec(t))?new it(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Dd.exec(t))?gi(e[1],e[2],e[3],e[4]):(e=Rd.exec(t))?gi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=zd.exec(t))?Xo(e[1],e[2]/100,e[3]/100,1):(e=Ld.exec(t))?Xo(e[1],e[2]/100,e[3]/100,e[4]):Lo.hasOwnProperty(t)?Vo(Lo[t]):t===\"transparent\"?new it(NaN,NaN,NaN,0):null}function Vo(t){return new it(t>>16&255,t>>8&255,t&255,1)}function gi(t,e,n,i){return i<=0&&(t=e=n=NaN),new it(t,e,n,i)}function Vd(t){return t instanceof si||(t=ti(t)),t?(t=t.rgb(),new it(t.r,t.g,t.b,t.opacity)):new it}function qr(t,e,n,i){return arguments.length===1?Vd(t):new it(t,e,n,i??1)}function it(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}lo(it,qr,la(si,{brighter(t){return t=t==null?qi:Math.pow(qi,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?$n:Math.pow($n,t),new it(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new it(tn(this.r),tn(this.g),tn(this.b),Wi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qo,formatHex:qo,formatHex8:qd,formatRgb:Wo,toString:Wo}));function qo(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}`}function qd(){return`#${xt(this.r)}${xt(this.g)}${xt(this.b)}${xt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Wo(){const t=Wi(this.opacity);return`${t===1?\"rgb(\":\"rgba(\"}${tn(this.r)}, ${tn(this.g)}, ${tn(this.b)}${t===1?\")\":`, ${t})`}`}function Wi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function xt(t){return t=tn(t),(t<16?\"0\":\"\")+t.toString(16)}function Xo(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new _t(t,e,n,i)}function aa(t){if(t instanceof _t)return new _t(t.h,t.s,t.l,t.opacity);if(t instanceof si||(t=ti(t)),!t)return new _t;if(t instanceof _t)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=NaN,l=o-r,a=(o+r)/2;return l?(e===o?s=(n-i)/l+(n<i)*6:n===o?s=(i-e)/l+2:s=(e-n)/l+4,l/=a<.5?o+r:2-o-r,s*=60):l=a>0&&a<1?0:s,new _t(s,l,a,t.opacity)}function Wd(t,e,n,i){return arguments.length===1?aa(t):new _t(t,e,n,i??1)}function _t(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}lo(_t,Wd,la(si,{brighter(t){return t=t==null?qi:Math.pow(qi,t),new _t(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?$n:Math.pow($n,t),new _t(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new it(Sr(t>=240?t-240:t+120,r,i),Sr(t,r,i),Sr(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new _t(Yo(this.h),mi(this.s),mi(this.l),Wi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Wi(this.opacity);return`${t===1?\"hsl(\":\"hsla(\"}${Yo(this.h)}, ${mi(this.s)*100}%, ${mi(this.l)*100}%${t===1?\")\":`, ${t})`}`}}));function Yo(t){return t=(t||0)%360,t<0?t+360:t}function mi(t){return Math.max(0,Math.min(1,t||0))}function Sr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ua=t=>()=>t;function Xd(t,e){return function(n){return t+n*e}}function Yd(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Kd(t){return(t=+t)==1?fa:function(e,n){return n-e?Yd(e,n,t):ua(isNaN(e)?n:e)}}function fa(t,e){var n=e-t;return n?Xd(t,n):ua(isNaN(t)?e:t)}const Ko=function t(e){var n=Kd(e);function i(r,o){var s=n((r=qr(r)).r,(o=qr(o)).r),l=n(r.g,o.g),a=n(r.b,o.b),u=fa(r.opacity,o.opacity);return function(f){return r.r=s(f),r.g=l(f),r.b=a(f),r.opacity=u(f),r+\"\"}}return i.gamma=t,i}(1);function Wt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Wr=/[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,Er=new RegExp(Wr.source,\"g\");function Jd(t){return function(){return t}}function Ud(t){return function(e){return t(e)+\"\"}}function jd(t,e){var n=Wr.lastIndex=Er.lastIndex=0,i,r,o,s=-1,l=[],a=[];for(t=t+\"\",e=e+\"\";(i=Wr.exec(t))&&(r=Er.exec(e));)(o=r.index)>n&&(o=e.slice(n,o),l[s]?l[s]+=o:l[++s]=o),(i=i[0])===(r=r[0])?l[s]?l[s]+=r:l[++s]=r:(l[++s]=null,a.push({i:s,x:Wt(i,r)})),n=Er.lastIndex;return n<e.length&&(o=e.slice(n),l[s]?l[s]+=o:l[++s]=o),l.length<2?a[0]?Ud(a[0].x):Jd(e):(e=a.length,function(u){for(var f=0,c;f<e;++f)l[(c=a[f]).i]=c.x(u);return l.join(\"\")})}var Jo=180/Math.PI,Xr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ca(t,e,n,i,r,o){var s,l,a;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(a=t*n+e*i)&&(n-=t*a,i-=e*a),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,a/=l),t*i<e*n&&(t=-t,e=-e,a=-a,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Jo,skewX:Math.atan(a)*Jo,scaleX:s,scaleY:l}}var yi;function Gd(t){const e=new(typeof DOMMatrix==\"function\"?DOMMatrix:WebKitCSSMatrix)(t+\"\");return e.isIdentity?Xr:ca(e.a,e.b,e.c,e.d,e.e,e.f)}function Zd(t){return t==null||(yi||(yi=document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\")),yi.setAttribute(\"transform\",t),!(t=yi.transform.baseVal.consolidate()))?Xr:(t=t.matrix,ca(t.a,t.b,t.c,t.d,t.e,t.f))}function da(t,e,n,i){function r(u){return u.length?u.pop()+\" \":\"\"}function o(u,f,c,d,h,g){if(u!==c||f!==d){var y=h.push(\"translate(\",null,e,null,n);g.push({i:y-4,x:Wt(u,c)},{i:y-2,x:Wt(f,d)})}else(c||d)&&h.push(\"translate(\"+c+e+d+n)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(r(c)+\"rotate(\",null,i)-2,x:Wt(u,f)})):f&&c.push(r(c)+\"rotate(\"+f+i)}function l(u,f,c,d){u!==f?d.push({i:c.push(r(c)+\"skewX(\",null,i)-2,x:Wt(u,f)}):f&&c.push(r(c)+\"skewX(\"+f+i)}function a(u,f,c,d,h,g){if(u!==c||f!==d){var y=h.push(r(h)+\"scale(\",null,\",\",null,\")\");g.push({i:y-4,x:Wt(u,c)},{i:y-2,x:Wt(f,d)})}else(c!==1||d!==1)&&h.push(r(h)+\"scale(\"+c+\",\"+d+\")\")}return function(u,f){var c=[],d=[];return u=t(u),f=t(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),l(u.skewX,f.skewX,c,d),a(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(h){for(var g=-1,y=d.length,p;++g<y;)c[(p=d[g]).i]=p.x(h);return c.join(\"\")}}}var Qd=da(Gd,\"px, \",\"px)\",\"deg)\"),xd=da(Zd,\", \",\")\",\")\"),$d=1e-12;function Uo(t){return((t=Math.exp(t))+1/t)/2}function eh(t){return((t=Math.exp(t))-1/t)/2}function th(t){return((t=Math.exp(2*t))-1)/(t+1)}const nh=function t(e,n,i){function r(o,s){var l=o[0],a=o[1],u=o[2],f=s[0],c=s[1],d=s[2],h=f-l,g=c-a,y=h*h+g*g,p,m;if(y<$d)m=Math.log(d/u)/e,p=function(S){return[l+S*h,a+S*g,u*Math.exp(e*S*m)]};else{var w=Math.sqrt(y),b=(d*d-u*u+i*y)/(2*u*n*w),_=(d*d-u*u-i*y)/(2*d*n*w),I=Math.log(Math.sqrt(b*b+1)-b),v=Math.log(Math.sqrt(_*_+1)-_);m=(v-I)/e,p=function(S){var C=S*m,O=Uo(I),R=u/(n*w)*(O*th(e*C+I)-eh(I));return[l+R*h,a+R*g,u*O/Uo(e*C+I)]}}return p.duration=m*1e3*e/Math.SQRT2,p}return r.rho=function(o){var s=Math.max(.001,+o),l=s*s,a=l*l;return t(s,l,a)},r}(Math.SQRT2,2,4);var Nn=0,Wn=0,Hn=0,ha=1e3,Xi,Xn,Yi=0,sn=0,cr=0,ni=typeof performance==\"object\"&&performance.now?performance:Date,ga=typeof window==\"object\"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ao(){return sn||(ga(ih),sn=ni.now()+cr)}function ih(){sn=0}function Ki(){this._call=this._time=this._next=null}Ki.prototype=ma.prototype={constructor:Ki,restart:function(t,e,n){if(typeof t!=\"function\")throw new TypeError(\"callback is not a function\");n=(n==null?ao():+n)+(e==null?0:+e),!this._next&&Xn!==this&&(Xn?Xn._next=this:Xi=this,Xn=this),this._call=t,this._time=n,Yr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yr())}};function ma(t,e,n){var i=new Ki;return i.restart(t,e,n),i}function rh(){ao(),++Nn;for(var t=Xi,e;t;)(e=sn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Nn}function jo(){sn=(Yi=ni.now())+cr,Nn=Wn=0;try{rh()}finally{Nn=0,sh(),sn=0}}function oh(){var t=ni.now(),e=t-Yi;e>ha&&(cr-=e,Yi=t)}function sh(){for(var t,e=Xi,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Xi=n);Xn=t,Yr(i)}function Yr(t){if(!Nn){Wn&&(Wn=clearTimeout(Wn));var e=t-sn;e>24?(t<1/0&&(Wn=setTimeout(jo,t-ni.now()-cr)),Hn&&(Hn=clearInterval(Hn))):(Hn||(Yi=ni.now(),Hn=setInterval(oh,ha)),Nn=1,ga(jo))}}function Go(t,e,n){var i=new Ki;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var lh=ur(\"start\",\"end\",\"cancel\",\"interrupt\"),ah=[],ya=0,Zo=1,Kr=2,Ti=3,Qo=4,Jr=5,Mi=6;function dr(t,e,n,i,r,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;uh(t,n,{name:e,index:i,group:r,on:lh,tween:ah,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ya})}function uo(t,e){var n=vt(t,e);if(n.state>ya)throw new Error(\"too late; already scheduled\");return n}function Mt(t,e){var n=vt(t,e);if(n.state>Ti)throw new Error(\"too late; already running\");return n}function vt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error(\"transition not found\");return n}function uh(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=ma(o,0,n.time);function o(u){n.state=Zo,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var f,c,d,h;if(n.state!==Zo)return a();for(f in i)if(h=i[f],h.name===n.name){if(h.state===Ti)return Go(s);h.state===Qo?(h.state=Mi,h.timer.stop(),h.on.call(\"interrupt\",t,t.__data__,h.index,h.group),delete i[f]):+f<e&&(h.state=Mi,h.timer.stop(),h.on.call(\"cancel\",t,t.__data__,h.index,h.group),delete i[f])}if(Go(function(){n.state===Ti&&(n.state=Qo,n.timer.restart(l,n.delay,n.time),l(u))}),n.state=Kr,n.on.call(\"start\",t,t.__data__,n.index,n.group),n.state===Kr){for(n.state=Ti,r=new Array(d=n.tween.length),f=0,c=-1;f<d;++f)(h=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=h);r.length=c+1}}function l(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Jr,1),c=-1,d=r.length;++c<d;)r[c].call(t,f);n.state===Jr&&(n.on.call(\"end\",t,t.__data__,n.index,n.group),a())}function a(){n.state=Mi,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function Ai(t,e){var n=t.__transition,i,r,o=!0,s;if(n){e=e==null?null:e+\"\";for(s in n){if((i=n[s]).name!==e){o=!1;continue}r=i.state>Kr&&i.state<Jr,i.state=Mi,i.timer.stop(),i.on.call(r?\"interrupt\":\"cancel\",t,t.__data__,i.index,i.group),delete n[s]}o&&delete t.__transition}}function fh(t){return this.each(function(){Ai(this,t)})}function ch(t,e){var n,i;return function(){var r=Mt(this,t),o=r.tween;if(o!==n){i=n=o;for(var s=0,l=i.length;s<l;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}r.tween=i}}function dh(t,e,n){var i,r;if(typeof n!=\"function\")throw new Error;return function(){var o=Mt(this,t),s=o.tween;if(s!==i){r=(i=s).slice();for(var l={name:e,value:n},a=0,u=r.length;a<u;++a)if(r[a].name===e){r[a]=l;break}a===u&&r.push(l)}o.tween=r}}function hh(t,e){var n=this._id;if(t+=\"\",arguments.length<2){for(var i=vt(this.node(),n).tween,r=0,o=i.length,s;r<o;++r)if((s=i[r]).name===t)return s.value;return null}return this.each((e==null?ch:dh)(n,t,e))}function fo(t,e,n){var i=t._id;return t.each(function(){var r=Mt(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return vt(r,i).value[e]}}function pa(t,e){var n;return(typeof e==\"number\"?Wt:e instanceof ti?Ko:(n=ti(e))?(e=n,Ko):jd)(t,e)}function gh(t){return function(){this.removeAttribute(t)}}function mh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function yh(t,e,n){var i,r=n+\"\",o;return function(){var s=this.getAttribute(t);return s===r?null:s===i?o:o=e(i=s,n)}}function ph(t,e,n){var i,r=n+\"\",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===i?o:o=e(i=s,n)}}function bh(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttribute(t):(s=this.getAttribute(t),a=l+\"\",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function _h(t,e,n){var i,r,o;return function(){var s,l=n(this),a;return l==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),a=l+\"\",s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l)))}}function wh(t,e){var n=fr(t),i=n===\"transform\"?xd:pa;return this.attrTween(t,typeof e==\"function\"?(n.local?_h:bh)(n,i,fo(this,\"attr.\"+t,e)):e==null?(n.local?mh:gh)(n):(n.local?ph:yh)(n,i,e))}function vh(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function kh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Sh(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&kh(t,o)),n}return r._value=e,r}function Eh(t,e){var n,i;function r(){var o=e.apply(this,arguments);return o!==i&&(n=(i=o)&&vh(t,o)),n}return r._value=e,r}function Ch(t,e){var n=\"attr.\"+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!=\"function\")throw new Error;var i=fr(t);return this.tween(n,(i.local?Sh:Eh)(i,e))}function Oh(t,e){return function(){uo(this,t).delay=+e.apply(this,arguments)}}function Ih(t,e){return e=+e,function(){uo(this,t).delay=e}}function Th(t){var e=this._id;return arguments.length?this.each((typeof t==\"function\"?Oh:Ih)(e,t)):vt(this.node(),e).delay}function Mh(t,e){return function(){Mt(this,t).duration=+e.apply(this,arguments)}}function Ah(t,e){return e=+e,function(){Mt(this,t).duration=e}}function Ph(t){var e=this._id;return arguments.length?this.each((typeof t==\"function\"?Mh:Ah)(e,t)):vt(this.node(),e).duration}function Nh(t,e){if(typeof e!=\"function\")throw new Error;return function(){Mt(this,t).ease=e}}function Fh(t){var e=this._id;return arguments.length?this.each(Nh(e,t)):vt(this.node(),e).ease}function Dh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!=\"function\")throw new Error;Mt(this,t).ease=n}}function Rh(t){if(typeof t!=\"function\")throw new Error;return this.each(Dh(this._id,t))}function zh(t){typeof t!=\"function\"&&(t=Gl(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o=e[r],s=o.length,l=i[r]=[],a,u=0;u<s;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&l.push(a);return new Ht(i,this._parents,this._name,this._id)}function Lh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),s=new Array(i),l=0;l<o;++l)for(var a=e[l],u=n[l],f=a.length,c=s[l]=new Array(f),d,h=0;h<f;++h)(d=a[h]||u[h])&&(c[h]=d);for(;l<i;++l)s[l]=e[l];return new Ht(s,this._parents,this._name,this._id)}function Hh(t){return(t+\"\").trim().split(/^|\\s+/).every(function(e){var n=e.indexOf(\".\");return n>=0&&(e=e.slice(0,n)),!e||e===\"start\"})}function Bh(t,e,n){var i,r,o=Hh(e)?uo:Mt;return function(){var s=o(this,t),l=s.on;l!==i&&(r=(i=l).copy()).on(e,n),s.on=r}}function Vh(t,e){var n=this._id;return arguments.length<2?vt(this.node(),n).on.on(t):this.each(Bh(n,t,e))}function qh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Wh(){return this.on(\"end.remove\",qh(this._id))}function Xh(t){var e=this._name,n=this._id;typeof t!=\"function\"&&(t=oo(t));for(var i=this._groups,r=i.length,o=new Array(r),s=0;s<r;++s)for(var l=i[s],a=l.length,u=o[s]=new Array(a),f,c,d=0;d<a;++d)(f=l[d])&&(c=t.call(f,f.__data__,d,l))&&(\"__data__\"in f&&(c.__data__=f.__data__),u[d]=c,dr(u[d],e,n,d,u,vt(f,n)));return new Ht(o,this._parents,e,n)}function Yh(t){var e=this._name,n=this._id;typeof t!=\"function\"&&(t=jl(t));for(var i=this._groups,r=i.length,o=[],s=[],l=0;l<r;++l)for(var a=i[l],u=a.length,f,c=0;c<u;++c)if(f=a[c]){for(var d=t.call(f,f.__data__,c,a),h,g=vt(f,n),y=0,p=d.length;y<p;++y)(h=d[y])&&dr(h,e,n,y,d,g);o.push(d),s.push(f)}return new Ht(o,s,e,n)}var Kh=oi.prototype.constructor;function Jh(){return new Kh(this._groups,this._parents)}function Uh(t,e){var n,i,r;return function(){var o=Pn(this,t),s=(this.style.removeProperty(t),Pn(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function ba(t){return function(){this.style.removeProperty(t)}}function jh(t,e,n){var i,r=n+\"\",o;return function(){var s=Pn(this,t);return s===r?null:s===i?o:o=e(i=s,n)}}function Gh(t,e,n){var i,r,o;return function(){var s=Pn(this,t),l=n(this),a=l+\"\";return l==null&&(a=l=(this.style.removeProperty(t),Pn(this,t))),s===a?null:s===i&&a===r?o:(r=a,o=e(i=s,l))}}function Zh(t,e){var n,i,r,o=\"style.\"+e,s=\"end.\"+o,l;return function(){var a=Mt(this,t),u=a.on,f=a.value[o]==null?l||(l=ba(e)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(s,r=f),a.on=i}}function Qh(t,e,n){var i=(t+=\"\")==\"transform\"?Qd:pa;return e==null?this.styleTween(t,Uh(t,i)).on(\"end.style.\"+t,ba(t)):typeof e==\"function\"?this.styleTween(t,Gh(t,i,fo(this,\"style.\"+t,e))).each(Zh(this._id,t)):this.styleTween(t,jh(t,i,e),n).on(\"end.style.\"+t,null)}function xh(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function $h(t,e,n){var i,r;function o(){var s=e.apply(this,arguments);return s!==r&&(i=(r=s)&&xh(t,s,n)),i}return o._value=e,o}function eg(t,e,n){var i=\"style.\"+(t+=\"\");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!=\"function\")throw new Error;return this.tween(i,$h(t,e,n??\"\"))}function tg(t){return function(){this.textContent=t}}function ng(t){return function(){var e=t(this);this.textContent=e??\"\"}}function ig(t){return this.tween(\"text\",typeof t==\"function\"?ng(fo(this,\"text\",t)):tg(t==null?\"\":t+\"\"))}function rg(t){return function(e){this.textContent=t.call(this,e)}}function og(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&rg(r)),e}return i._value=t,i}function sg(t){var e=\"text\";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!=\"function\")throw new Error;return this.tween(e,og(t))}function lg(){for(var t=this._name,e=this._id,n=_a(),i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)if(a=s[u]){var f=vt(a,e);dr(a,t,n,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Ht(i,this._parents,t,n)}function ag(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(o,s){var l={value:s},a={value:function(){--r===0&&o()}};n.each(function(){var u=Mt(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(a)),u.on=e}),r===0&&o()})}var ug=0;function Ht(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function _a(){return++ug}var Ft=oi.prototype;Ht.prototype={constructor:Ht,select:Xh,selectAll:Yh,selectChild:Ft.selectChild,selectChildren:Ft.selectChildren,filter:zh,merge:Lh,selection:Jh,transition:lg,call:Ft.call,nodes:Ft.nodes,node:Ft.node,size:Ft.size,empty:Ft.empty,each:Ft.each,on:Vh,attr:wh,attrTween:Ch,style:Qh,styleTween:eg,text:ig,textTween:sg,remove:Wh,tween:hh,delay:Th,duration:Ph,ease:Fh,easeVarying:Rh,end:ag,[Symbol.iterator]:Ft[Symbol.iterator]};function fg(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var cg={time:null,delay:0,duration:250,ease:fg};function dg(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function hg(t){var e,n;t instanceof Ht?(e=t._id,t=t._name):(e=_a(),(n=cg).time=ao(),t=t==null?null:t+\"\");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var s=i[o],l=s.length,a,u=0;u<l;++u)(a=s[u])&&dr(a,t,e,u,s,n||dg(a,e));return new Ht(i,this._parents,t,e)}oi.prototype.interrupt=fh;oi.prototype.transition=hg;const pi=t=>()=>t;function gg(t,{sourceEvent:e,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Rt(t,e,n){this.k=t,this.x=e,this.y=n}Rt.prototype={constructor:Rt,scale:function(t){return t===1?this:new Rt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Rt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return\"translate(\"+this.x+\",\"+this.y+\") scale(\"+this.k+\")\"}};var hr=new Rt(1,0,0);wa.prototype=Rt.prototype;function wa(t){for(;!t.__zoom;)if(!(t=t.parentNode))return hr;return t.__zoom}function Cr(t){t.stopImmediatePropagation()}function Bn(t){t.preventDefault(),t.stopImmediatePropagation()}function mg(t){return(!t.ctrlKey||t.type===\"wheel\")&&!t.button}function yg(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute(\"viewBox\")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function xo(){return this.__zoom||hr}function pg(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function bg(){return navigator.maxTouchPoints||\"ontouchstart\"in this}function _g(t,e,n){var i=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function va(){var t=mg,e=yg,n=_g,i=pg,r=bg,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],l=250,a=nh,u=ur(\"start\",\"zoom\",\"end\"),f,c,d,h=500,g=150,y=0,p=10;function m(k){k.property(\"__zoom\",xo).on(\"wheel.zoom\",C,{passive:!1}).on(\"mousedown.zoom\",O).on(\"dblclick.zoom\",R).filter(r).on(\"touchstart.zoom\",D).on(\"touchmove.zoom\",W).on(\"touchend.zoom touchcancel.zoom\",P).style(\"-webkit-tap-highlight-color\",\"rgba(0,0,0,0)\")}m.transform=function(k,F,M,N){var H=k.selection?k.selection():k;H.property(\"__zoom\",xo),k!==H?I(k,F,M,N):H.interrupt().each(function(){v(this,arguments).event(N).start().zoom(null,typeof F==\"function\"?F.apply(this,arguments):F).end()})},m.scaleBy=function(k,F,M,N){m.scaleTo(k,function(){var H=this.__zoom.k,K=typeof F==\"function\"?F.apply(this,arguments):F;return H*K},M,N)},m.scaleTo=function(k,F,M,N){m.transform(k,function(){var H=e.apply(this,arguments),K=this.__zoom,Y=M==null?_(H):typeof M==\"function\"?M.apply(this,arguments):M,G=K.invert(Y),q=typeof F==\"function\"?F.apply(this,arguments):F;return n(b(w(K,q),Y,G),H,s)},M,N)},m.translateBy=function(k,F,M,N){m.transform(k,function(){return n(this.__zoom.translate(typeof F==\"function\"?F.apply(this,arguments):F,typeof M==\"function\"?M.apply(this,arguments):M),e.apply(this,arguments),s)},null,N)},m.translateTo=function(k,F,M,N,H){m.transform(k,function(){var K=e.apply(this,arguments),Y=this.__zoom,G=N==null?_(K):typeof N==\"function\"?N.apply(this,arguments):N;return n(hr.translate(G[0],G[1]).scale(Y.k).translate(typeof F==\"function\"?-F.apply(this,arguments):-F,typeof M==\"function\"?-M.apply(this,arguments):-M),K,s)},N,H)};function w(k,F){return F=Math.max(o[0],Math.min(o[1],F)),F===k.k?k:new Rt(F,k.x,k.y)}function b(k,F,M){var N=F[0]-M[0]*k.k,H=F[1]-M[1]*k.k;return N===k.x&&H===k.y?k:new Rt(k.k,N,H)}function _(k){return[(+k[0][0]+ +k[1][0])/2,(+k[0][1]+ +k[1][1])/2]}function I(k,F,M,N){k.on(\"start.zoom\",function(){v(this,arguments).event(N).start()}).on(\"interrupt.zoom end.zoom\",function(){v(this,arguments).event(N).end()}).tween(\"zoom\",function(){var H=this,K=arguments,Y=v(H,K).event(N),G=e.apply(H,K),q=M==null?_(G):typeof M==\"function\"?M.apply(H,K):M,se=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),oe=H.__zoom,pe=typeof F==\"function\"?F.apply(H,K):F,Se=a(oe.invert(q).concat(se/oe.k),pe.invert(q).concat(se/pe.k));return function(L){if(L===1)L=pe;else{var ve=Se(L),Te=se/ve[2];L=new Rt(Te,q[0]-ve[0]*Te,q[1]-ve[1]*Te)}Y.zoom(null,L)}})}function v(k,F,M){return!M&&k.__zooming||new S(k,F)}function S(k,F){this.that=k,this.args=F,this.active=0,this.sourceEvent=null,this.extent=e.apply(k,F),this.taps=0}S.prototype={event:function(k){return k&&(this.sourceEvent=k),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(\"start\")),this},zoom:function(k,F){return this.mouse&&k!==\"mouse\"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&k!==\"touch\"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&k!==\"touch\"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit(\"zoom\"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(\"end\")),this},emit:function(k){var F=gt(this.that).datum();u.call(k,this.that,new gg(k,{sourceEvent:this.sourceEvent,target:m,type:k,transform:this.that.__zoom,dispatch:u}),F)}};function C(k,...F){if(!t.apply(this,arguments))return;var M=v(this,F).event(k),N=this.__zoom,H=Math.max(o[0],Math.min(o[1],N.k*Math.pow(2,i.apply(this,arguments)))),K=bt(k);if(M.wheel)(M.mouse[0][0]!==K[0]||M.mouse[0][1]!==K[1])&&(M.mouse[1]=N.invert(M.mouse[0]=K)),clearTimeout(M.wheel);else{if(N.k===H)return;M.mouse=[K,N.invert(K)],Ai(this),M.start()}Bn(k),M.wheel=setTimeout(Y,g),M.zoom(\"mouse\",n(b(w(N,H),M.mouse[0],M.mouse[1]),M.extent,s));function Y(){M.wheel=null,M.end()}}function O(k,...F){if(d||!t.apply(this,arguments))return;var M=k.currentTarget,N=v(this,F,!0).event(k),H=gt(k.view).on(\"mousemove.zoom\",q,!0).on(\"mouseup.zoom\",se,!0),K=bt(k,M),Y=k.clientX,G=k.clientY;oa(k.view),Cr(k),N.mouse=[K,this.__zoom.invert(K)],Ai(this),N.start();function q(oe){if(Bn(oe),!N.moved){var pe=oe.clientX-Y,Se=oe.clientY-G;N.moved=pe*pe+Se*Se>y}N.event(oe).zoom(\"mouse\",n(b(N.that.__zoom,N.mouse[0]=bt(oe,M),N.mouse[1]),N.extent,s))}function se(oe){H.on(\"mousemove.zoom mouseup.zoom\",null),sa(oe.view,N.moved),Bn(oe),N.event(oe).end()}}function R(k,...F){if(t.apply(this,arguments)){var M=this.__zoom,N=bt(k.changedTouches?k.changedTouches[0]:k,this),H=M.invert(N),K=M.k*(k.shiftKey?.5:2),Y=n(b(w(M,K),N,H),e.apply(this,F),s);Bn(k),l>0?gt(this).transition().duration(l).call(I,Y,N,k):gt(this).call(m.transform,Y,N,k)}}function D(k,...F){if(t.apply(this,arguments)){var M=k.touches,N=M.length,H=v(this,F,k.changedTouches.length===N).event(k),K,Y,G,q;for(Cr(k),Y=0;Y<N;++Y)G=M[Y],q=bt(G,this),q=[q,this.__zoom.invert(q),G.identifier],H.touch0?!H.touch1&&H.touch0[2]!==q[2]&&(H.touch1=q,H.taps=0):(H.touch0=q,K=!0,H.taps=1+!!f);f&&(f=clearTimeout(f)),K&&(H.taps<2&&(c=q[0],f=setTimeout(function(){f=null},h)),Ai(this),H.start())}}function W(k,...F){if(this.__zooming){var M=v(this,F).event(k),N=k.changedTouches,H=N.length,K,Y,G,q;for(Bn(k),K=0;K<H;++K)Y=N[K],G=bt(Y,this),M.touch0&&M.touch0[2]===Y.identifier?M.touch0[0]=G:M.touch1&&M.touch1[2]===Y.identifier&&(M.touch1[0]=G);if(Y=M.that.__zoom,M.touch1){var se=M.touch0[0],oe=M.touch0[1],pe=M.touch1[0],Se=M.touch1[1],L=(L=pe[0]-se[0])*L+(L=pe[1]-se[1])*L,ve=(ve=Se[0]-oe[0])*ve+(ve=Se[1]-oe[1])*ve;Y=w(Y,Math.sqrt(L/ve)),G=[(se[0]+pe[0])/2,(se[1]+pe[1])/2],q=[(oe[0]+Se[0])/2,(oe[1]+Se[1])/2]}else if(M.touch0)G=M.touch0[0],q=M.touch0[1];else return;M.zoom(\"touch\",n(b(Y,G,q),M.extent,s))}}function P(k,...F){if(this.__zooming){var M=v(this,F).event(k),N=k.changedTouches,H=N.length,K,Y;for(Cr(k),d&&clearTimeout(d),d=setTimeout(function(){d=null},h),K=0;K<H;++K)Y=N[K],M.touch0&&M.touch0[2]===Y.identifier?delete M.touch0:M.touch1&&M.touch1[2]===Y.identifier&&delete M.touch1;if(M.touch1&&!M.touch0&&(M.touch0=M.touch1,delete M.touch1),M.touch0)M.touch0[1]=this.__zoom.invert(M.touch0[0]);else if(M.end(),M.taps===2&&(Y=bt(Y,this),Math.hypot(c[0]-Y[0],c[1]-Y[1])<p)){var G=gt(this).on(\"dblclick.zoom\");G&&G.apply(this,arguments)}}}return m.wheelDelta=function(k){return arguments.length?(i=typeof k==\"function\"?k:pi(+k),m):i},m.filter=function(k){return arguments.length?(t=typeof k==\"function\"?k:pi(!!k),m):t},m.touchable=function(k){return arguments.length?(r=typeof k==\"function\"?k:pi(!!k),m):r},m.extent=function(k){return arguments.length?(e=typeof k==\"function\"?k:pi([[+k[0][0],+k[0][1]],[+k[1][0],+k[1][1]]]),m):e},m.scaleExtent=function(k){return arguments.length?(o[0]=+k[0],o[1]=+k[1],m):[o[0],o[1]]},m.translateExtent=function(k){return arguments.length?(s[0][0]=+k[0][0],s[1][0]=+k[1][0],s[0][1]=+k[0][1],s[1][1]=+k[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(k){return arguments.length?(n=k,m):n},m.duration=function(k){return arguments.length?(l=+k,m):l},m.interpolate=function(k){return arguments.length?(a=k,m):a},m.on=function(){var k=u.on.apply(u,arguments);return k===u?m:k},m.clickDistance=function(k){return arguments.length?(y=(k=+k)*k,m):Math.sqrt(y)},m.tapDistance=function(k){return arguments.length?(p=+k,m):p},m}const li={error001:()=>\"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001\",error002:()=>\"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",error003:t=>`Node type \"${t}\" not found. Using fallback type \"default\".`,error004:()=>\"The React Flow parent container needs a width and a height to render the graph.\",error005:()=>\"Only child nodes can use a parent extent.\",error006:()=>\"Can't create edge. An edge needs a source and a target.\",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type \"${t}\" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:i})=>`Couldn't create edge for ${t} handle id: \"${n&&i}\", edge id: ${e}.`,error010:()=>\"Handle: No node id found. Make sure to only use a Handle inside a custom Node.\",error011:t=>`Edge type \"${t}\" not found. Using fallback type \"default\".`,error012:t=>`Node with id \"${t}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,error013:(t=\"react\")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`},$o=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]];var Ut;(function(t){t.Strict=\"strict\",t.Loose=\"loose\"})(Ut||(Ut={}));var Ct;(function(t){t.Free=\"free\",t.Vertical=\"vertical\",t.Horizontal=\"horizontal\"})(Ct||(Ct={}));var Ji;(function(t){t.Partial=\"partial\",t.Full=\"full\"})(Ji||(Ji={}));var Mn;(function(t){t.Bezier=\"default\",t.Straight=\"straight\",t.Step=\"step\",t.SmoothStep=\"smoothstep\",t.SimpleBezier=\"simplebezier\"})(Mn||(Mn={}));var Ui;(function(t){t.Arrow=\"arrow\",t.ArrowClosed=\"arrowclosed\"})(Ui||(Ui={}));var ye;(function(t){t.Left=\"left\",t.Top=\"top\",t.Right=\"right\",t.Bottom=\"bottom\"})(ye||(ye={}));function wg(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function es(t,e,n){if(!n)return;const i=[];t.forEach((r,o)=>{e!=null&&e.has(o)||i.push(r)}),i.length&&n(i)}const vg=t=>\"id\"in t&&\"source\"in t&&\"target\"in t,zn=(t,e=[0,0])=>{const{width:n,height:i}=ai(t),r=\"internals\"in t?t.internals.positionAbsolute:t.position,o=t.origin||e,s=n*o[0],l=i*o[1];return{position:{x:t.position.x-s,y:t.position.y-l},positionAbsolute:{x:r.x-s,y:r.y-l}}},ka=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((i,r)=>{const o=ji(r,e.nodeOrigin);return gr(i,o)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return mr(n)},co=(t,e={nodeOrigin:[0,0]})=>{if(t.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return t.forEach(i=>{if(e.filter==null||e.filter(i)){const r=ji(i,e.nodeOrigin);n=gr(n,r)}}),mr(n)},Sa=(t,e,[n,i,r]=[0,0,1],o=!1,s=!1,l=[0,0])=>{const a={...mo(e,[n,i,r]),width:e.width/r,height:e.height/r},u=[];for(const[,f]of t){const{measured:c,selectable:d=!0,hidden:h=!1}=f,g=c.width??f.width??f.initialWidth??null,y=c.height??f.height??f.initialHeight??null;if(s&&!d||h)continue;const p=Oa(a,ho(f,l)),m=g===null||y===null,w=o&&p>0,b=(g??0)*(y??0);(m||w||p>=b||f.dragging)&&u.push(f)}return u},Ur=(t,e)=>{const n=new Set;return t.forEach(i=>{n.add(i.id)}),e.filter(i=>n.has(i.source)||n.has(i.target))};function kg({nodeLookup:t,width:e,height:n,panZoom:i,minZoom:r,maxZoom:o,nodeOrigin:s=[0,0]},l){const a=[],u=l!=null&&l.nodes?new Set(l.nodes.map(f=>f.id)):null;if(t.forEach(f=>{f.measured.width&&f.measured.height&&((l==null?void 0:l.includeHiddenNodes)||!f.hidden)&&(!u||u.has(f.id))&&a.push(f)}),a.length>0){const f=ka(a,{nodeOrigin:s}),c=Ia(f,e,n,(l==null?void 0:l.minZoom)??r,(l==null?void 0:l.maxZoom)??o,(l==null?void 0:l.padding)??.1);return i.setViewport(c,{duration:l==null?void 0:l.duration}),!0}return!1}function Sg(t,e){var n,i;return!e||e===\"parent\"?e:[e[0],[e[1][0]-(((n=t.measured)==null?void 0:n.width)??0),e[1][1]-(((i=t.measured)==null?void 0:i.height)??0)]]}function Eg({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:i=[0,0],nodeExtent:r,onError:o}){const s=n.get(t),l=s.parentId?n.get(s.parentId):void 0,{x:a,y:u}=l?zn(l,l.origin||i).positionAbsolute:{x:0,y:0};let f=Sg(s,s.extent||r);if(s.extent===\"parent\"&&!s.expandParent)if(!l)o==null||o(\"005\",li.error005());else{const d=s.measured.width,h=s.measured.height,g=l.measured.width,y=l.measured.height;if(d&&h&&g&&y){const p=s.origin||i,m=a+d*p[0],w=u+h*p[1];f=[[m,w],[m+g-d,w+y-h]]}}else l&&ns(s.extent)&&(f=[[s.extent[0][0]+a,s.extent[0][1]+u],[s.extent[1][0]+a,s.extent[1][1]+u]]);const c=ns(f)?Og(e,f):e;return{position:{x:c.x-a,y:c.y-u},positionAbsolute:c}}async function Cg({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:i,onBeforeDelete:r}){const o=new Set(t.map(d=>d.id)),s=[];for(const d of n){if(d.deletable===!1)continue;const h=o.has(d.id),g=!h&&d.parentId&&s.find(y=>y.id===d.parentId);(h||g)&&s.push(d)}const l=new Set(e.map(d=>d.id)),a=i.filter(d=>d.deletable!==!1),f=Ur(s,a);for(const d of a)l.has(d.id)&&!f.find(g=>g.id===d.id)&&f.push(d);if(!r)return{edges:f,nodes:s};const c=await r({nodes:s,edges:f});return typeof c==\"boolean\"?c?{edges:f,nodes:s}:{edges:[],nodes:[]}:c}const Fn=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Og=(t={x:0,y:0},e)=>({x:Fn(t.x,e[0][0],e[1][0]),y:Fn(t.y,e[0][1],e[1][1])}),ts=(t,e,n)=>t<e?Fn(Math.abs(t-e),1,50)/50:t>n?-Fn(Math.abs(t-n),1,50)/50:0,Ea=(t,e)=>{const n=ts(t.x,35,e.width-35)*20,i=ts(t.y,35,e.height-35)*20;return[n,i]},gr=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),jr=({x:t,y:e,width:n,height:i})=>({x:t,y:e,x2:t+n,y2:e+i}),mr=({x:t,y:e,x2:n,y2:i})=>({x:t,y:e,width:n-t,height:i-e}),ho=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=zn(t,e).positionAbsolute;return{x:n,y:i,width:((r=t.measured)==null?void 0:r.width)??t.width??0,height:((o=t.measured)==null?void 0:o.height)??t.height??0}},ji=(t,e=[0,0])=>{var r,o;const{x:n,y:i}=zn(t,e).positionAbsolute;return{x:n,y:i,x2:n+(((r=t.measured)==null?void 0:r.width)??t.width??0),y2:i+(((o=t.measured)==null?void 0:o.height)??t.height??0)}},Ca=(t,e)=>mr(gr(jr(t),jr(e))),Oa=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*i)},kn=t=>!isNaN(t)&&isFinite(t),Ig=(t,e)=>{},Tg=({x:t,y:e,width:n,height:i,origin:r=[0,0]})=>!n||!i||r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-i*r[1]},go=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),mo=({x:t,y:e},[n,i,r],o=!1,s=[1,1])=>{const l={x:(t-n)/r,y:(e-i)/r};return o?go(l,s):l},Mg=({x:t,y:e},[n,i,r])=>({x:t*r+n,y:e*r+i}),Ia=(t,e,n,i,r,o)=>{const s=e/(t.width*(1+o)),l=n/(t.height*(1+o)),a=Math.min(s,l),u=Fn(a,i,r),f=t.x+t.width/2,c=t.y+t.height/2,d=e/2-f*u,h=n/2-c*u;return{x:d,y:h,zoom:u}},Gi=()=>{var t;return typeof navigator<\"u\"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf(\"Mac\"))>=0};function ns(t){return t!==void 0&&t!==\"parent\"}function ai(t){var e,n;return{width:((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth??0,height:((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight??0}}function Zi(t){var e,n;return(((e=t.measured)==null?void 0:e.width)??t.width??t.initialWidth)!==void 0&&(((n=t.measured)==null?void 0:n.height)??t.height??t.initialHeight)!==void 0}function Or(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:i}){const{x:r,y:o}=zt(t),s=mo({x:r,y:o},i),{x:l,y:a}=n?go(s,e):s;return{xSnapped:l,ySnapped:a,...s}}const Ta=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ag=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Pg=[\"INPUT\",\"SELECT\",\"TEXTAREA\"];function Ng(t){var i,r;const e=((r=(i=t.composedPath)==null?void 0:i.call(t))==null?void 0:r[0])||t.target;return Pg.includes(e==null?void 0:e.nodeName)||(e==null?void 0:e.hasAttribute(\"contenteditable\"))||!!(e!=null&&e.closest(\".nokey\"))}const Ma=t=>\"clientX\"in t,zt=(t,e)=>{var o,s;const n=Ma(t),i=n?t.clientX:(o=t.touches)==null?void 0:o[0].clientX,r=n?t.clientY:(s=t.touches)==null?void 0:s[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:r-((e==null?void 0:e.top)??0)}},is=(t,e,n,i,r=[0,0])=>{const o=e.querySelectorAll(t);if(!o||!o.length)return null;const s=Array.from(o),l={x:n.left+n.width*r[0],y:n.top+n.height*r[1]};return s.map(a=>{const u=a.getBoundingClientRect();return{id:a.getAttribute(\"data-handleid\"),position:a.getAttribute(\"data-handlepos\"),x:(u.left-l.x)/i,y:(u.top-l.y)/i,...Ta(a)}})};function Fg({sourceX:t,sourceY:e,targetX:n,targetY:i,sourceControlX:r,sourceControlY:o,targetControlX:s,targetControlY:l}){const a=t*.125+r*.375+s*.375+n*.125,u=e*.125+o*.375+l*.375+i*.125,f=Math.abs(a-t),c=Math.abs(u-e);return[a,u,f,c]}function bi(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function rs({pos:t,x1:e,y1:n,x2:i,y2:r,c:o}){switch(t){case ye.Left:return[e-bi(e-i,o),n];case ye.Right:return[e+bi(i-e,o),n];case ye.Top:return[e,n-bi(n-r,o)];case ye.Bottom:return[e,n+bi(r-n,o)]}}function Aa({sourceX:t,sourceY:e,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:o=ye.Top,curvature:s=.25}){const[l,a]=rs({pos:n,x1:t,y1:e,x2:i,y2:r,c:s}),[u,f]=rs({pos:o,x1:i,y1:r,x2:t,y2:e,c:s}),[c,d,h,g]=Fg({sourceX:t,sourceY:e,targetX:i,targetY:r,sourceControlX:l,sourceControlY:a,targetControlX:u,targetControlY:f});return[`M${t},${e} C${l},${a} ${u},${f} ${i},${r}`,c,d,h,g]}function Pa({sourceX:t,sourceY:e,targetX:n,targetY:i}){const r=Math.abs(n-t)/2,o=n<t?n+r:n-r,s=Math.abs(i-e)/2,l=i<e?i+s:i-s;return[o,l,r,s]}function Dg({sourceNode:t,targetNode:e,selected:n=!1,zIndex:i=0,elevateOnSelect:r=!1}){if(!r)return i;const o=n||e.selected||t.selected,s=Math.max(t.internals.z||0,e.internals.z||0,1e3);return i+(o?s:0)}function Rg({sourceNode:t,targetNode:e,width:n,height:i,transform:r}){const o=gr(ji(t),ji(e));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const s={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:i/r[2]};return Oa(s,mr(o))>0}const zg=({source:t,sourceHandle:e,target:n,targetHandle:i})=>`xy-edge__${t}${e||\"\"}-${n}${i||\"\"}`,Lg=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),Hg=(t,e)=>{if(!t.source||!t.target)return e;let n;return vg(t)?n={...t}:n={...t,id:zg(t)},Lg(n,e)?e:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,e.concat(n))};function Na({sourceX:t,sourceY:e,targetX:n,targetY:i}){const[r,o,s,l]=Pa({sourceX:t,sourceY:e,targetX:n,targetY:i});return[`M ${t},${e}L ${n},${i}`,r,o,s,l]}const os={[ye.Left]:{x:-1,y:0},[ye.Right]:{x:1,y:0},[ye.Top]:{x:0,y:-1},[ye.Bottom]:{x:0,y:1}},Bg=({source:t,sourcePosition:e=ye.Bottom,target:n})=>e===ye.Left||e===ye.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},ss=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Vg({source:t,sourcePosition:e=ye.Bottom,target:n,targetPosition:i=ye.Top,center:r,offset:o}){const s=os[e],l=os[i],a={x:t.x+s.x*o,y:t.y+s.y*o},u={x:n.x+l.x*o,y:n.y+l.y*o},f=Bg({source:a,sourcePosition:e,target:u}),c=f.x!==0?\"x\":\"y\",d=f[c];let h=[],g,y;const p={x:0,y:0},m={x:0,y:0},[w,b,_,I]=Pa({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[c]*l[c]===-1){g=r.x??w,y=r.y??b;const S=[{x:g,y:a.y},{x:g,y:u.y}],C=[{x:a.x,y},{x:u.x,y}];s[c]===d?h=c===\"x\"?S:C:h=c===\"x\"?C:S}else{const S=[{x:a.x,y:u.y}],C=[{x:u.x,y:a.y}];if(c===\"x\"?h=s.x===d?C:S:h=s.y===d?S:C,e===i){const P=Math.abs(t[c]-n[c]);if(P<=o){const k=Math.min(o-1,o-P);s[c]===d?p[c]=(a[c]>t[c]?-1:1)*k:m[c]=(u[c]>n[c]?-1:1)*k}}if(e!==i){const P=c===\"x\"?\"y\":\"x\",k=s[c]===l[P],F=a[P]>u[P],M=a[P]<u[P];(s[c]===1&&(!k&&F||k&&M)||s[c]!==1&&(!k&&M||k&&F))&&(h=c===\"x\"?S:C)}const O={x:a.x+p.x,y:a.y+p.y},R={x:u.x+m.x,y:u.y+m.y},D=Math.max(Math.abs(O.x-h[0].x),Math.abs(R.x-h[0].x)),W=Math.max(Math.abs(O.y-h[0].y),Math.abs(R.y-h[0].y));D>=W?(g=(O.x+R.x)/2,y=h[0].y):(g=h[0].x,y=(O.y+R.y)/2)}return[[t,{x:a.x+p.x,y:a.y+p.y},...h,{x:u.x+m.x,y:u.y+m.y},n],g,y,_,I]}function qg(t,e,n,i){const r=Math.min(ss(t,e)/2,ss(e,n)/2,i),{x:o,y:s}=e;if(t.x===o&&o===n.x||t.y===s&&s===n.y)return`L${o} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,f=t.y<n.y?1:-1;return`L ${o+r*u},${s}Q ${o},${s} ${o},${s+r*f}`}const l=t.x<n.x?1:-1,a=t.y<n.y?-1:1;return`L ${o},${s+r*a}Q ${o},${s} ${o+r*l},${s}`}function Qi({sourceX:t,sourceY:e,sourcePosition:n=ye.Bottom,targetX:i,targetY:r,targetPosition:o=ye.Top,borderRadius:s=5,centerX:l,centerY:a,offset:u=20}){const[f,c,d,h,g]=Vg({source:{x:t,y:e},sourcePosition:n,target:{x:i,y:r},targetPosition:o,center:{x:l,y:a},offset:u});return[f.reduce((p,m,w)=>{let b=\"\";return w>0&&w<f.length-1?b=qg(f[w-1],m,f[w+1],s):b=`${w===0?\"M\":\"L\"}${m.x} ${m.y}`,p+=b,p},\"\"),c,d,h,g]}function ls(t){var e;return t&&!!(t.internals.handleBounds||(e=t.handles)!=null&&e.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Wg(t){var h;const{sourceNode:e,targetNode:n}=t;if(!ls(e)||!ls(n))return null;const i=e.internals.handleBounds||as(e.handles),r=n.internals.handleBounds||as(n.handles),o=fs((i==null?void 0:i.source)??[],t.sourceHandle),s=fs(t.connectionMode===Ut.Strict?(r==null?void 0:r.target)??[]:((r==null?void 0:r.target)??[]).concat((r==null?void 0:r.source)??[]),t.targetHandle),l=(o==null?void 0:o.position)||ye.Bottom,a=(s==null?void 0:s.position)||ye.Top;if(!o||!s)return(h=t.onError)==null||h.call(t,\"008\",li.error008(o?\"target\":\"source\",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const[u,f]=us(l,e,o),[c,d]=us(a,n,s);return{sourceX:u,sourceY:f,targetX:c,targetY:d,sourcePosition:l,targetPosition:a}}function as(t){if(!t)return null;const e=[],n=[];for(const i of t)i.width=i.width??1,i.height=i.height??1,i.type===\"source\"?e.push(i):i.type===\"target\"&&n.push(i);return{source:e,target:n}}function us(t,e,n=null){const i=((n==null?void 0:n.x)??0)+e.internals.positionAbsolute.x,r=((n==null?void 0:n.y)??0)+e.internals.positionAbsolute.y,{width:o,height:s}=n??ai(e);switch(t){case ye.Top:return[i+o/2,r];case ye.Right:return[i+o,r+s/2];case ye.Bottom:return[i+o/2,r+s];case ye.Left:return[i,r+s/2]}}function fs(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function Gr(t,e){return t?typeof t==\"string\"?t:`${e?`${e}__`:\"\"}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join(\"&\")}`:\"\"}function Xg(t,{id:e,defaultColor:n,defaultMarkerStart:i,defaultMarkerEnd:r}){const o=new Set;return t.reduce((s,l)=>([l.markerStart||i,l.markerEnd||r].forEach(a=>{if(a&&typeof a==\"object\"){const u=Gr(a,e);o.has(u)||(s.push({id:u,color:a.color||n,...a}),o.add(u))}}),s),[]).sort((s,l)=>s.id.localeCompare(l.id))}function Yg(t,e={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{}}){const n=e!=null&&e.elevateNodesOnSelect?1e3:0;for(const[,i]of t){const r=i.parentId;if(!r)continue;if(!t.has(r))throw new Error(`Parent node ${r} not found`);const o=t.get(r),{x:s,y:l,z:a}=Da(i,t,{...i.position,z:(kn(i.zIndex)?i.zIndex:0)+(i.selected?n:0)},(o==null?void 0:o.origin)??e.nodeOrigin),u=i.internals.positionAbsolute,f=s!==u.x||l!==u.y;(f||a!==i.internals.z)&&(i.internals={...i.internals,positionAbsolute:f?{x:s,y:l}:u,z:a})}}function Fa(t,e,n,i={nodeOrigin:[0,0],elevateNodesOnSelect:!0,defaults:{},checkEquality:!0}){const r=new Map(e);e.clear(),n.clear();const o=i!=null&&i.elevateNodesOnSelect?1e3:0;t.forEach(s=>{var a,u;let l=r.get(s.id);if(i.checkEquality&&s===(l==null?void 0:l.internals.userNode)||(l={...i.defaults,...s,measured:{width:(a=s.measured)==null?void 0:a.width,height:(u=s.measured)==null?void 0:u.height},internals:{positionAbsolute:s.position,handleBounds:l==null?void 0:l.internals.handleBounds,z:(kn(s.zIndex)?s.zIndex:0)+(s.selected?o:0),userNode:s}}),e.set(s.id,l),s.parentId){const f=n.get(s.parentId);f?f.push(l):n.set(s.parentId,[l])}}),n.size>0&&Yg(e,i)}function Da(t,e,n,i=[0,0]){if(!t.parentId)return n;const r=e.get(t.parentId),o=zn(r,i).position;return Da(r,e,{x:(n.x??0)+o.x,y:(n.y??0)+o.y,z:(r.internals.z??0)>(n.z??0)?r.internals.z??0:n.z??0},r.origin||i)}function Kg(t,e,n,i){var s;const r=[],o=new Map;for(const l of t){const a=e.get(l.parentId);if(!a)continue;const u=((s=o.get(l.parentId))==null?void 0:s.expandedRect)??ho(a,a.origin??i),f=Ca(u,l.rect);o.set(l.parentId,{expandedRect:f,parent:a})}return o.size>0&&o.forEach(({expandedRect:l,parent:a},u)=>{const{position:f}=zn(a,a.origin),c=ai(a),d=l.x<f.x?Math.round(Math.abs(f.x-l.x)):0,h=l.y<f.y?Math.round(Math.abs(f.y-l.y)):0;if(d>0||h>0){r.push({id:u,type:\"position\",position:{x:f.x-d,y:f.y-h}});const g=n.get(u);g==null||g.forEach(y=>{t.some(p=>p.id===y.id)||r.push({id:y.id,type:\"position\",position:{x:y.position.x+d,y:y.position.y+h}})})}(c.width<l.width||c.height<l.height)&&r.push({id:u,type:\"dimensions\",setAttributes:!0,dimensions:{width:Math.max(c.width,Math.round(l.width)),height:Math.max(c.height,Math.round(l.height))}})}),r}function Jg(t,e,n,i,r){const o=i==null?void 0:i.querySelector(\".xyflow__viewport\");let s=!1;if(!o)return{changes:[],updatedInternals:s};const l=[],a=window.getComputedStyle(o),{m22:u}=new window.DOMMatrixReadOnly(a.transform),f=[];if(t.forEach(c=>{const d=e.get(c.id);if(d!=null&&d.hidden)d.internals={...d.internals,handleBounds:void 0},s=!0;else if(d){const h=Ta(c.nodeElement),g=d.measured.width!==h.width||d.measured.height!==h.height;if(!!(h.width&&h.height&&(g||!d.internals.handleBounds||c.force))){const p=c.nodeElement.getBoundingClientRect();d.measured=h,d.internals={...d.internals,handleBounds:{source:is(\".source\",c.nodeElement,p,u,d.origin||r),target:is(\".target\",c.nodeElement,p,u,d.origin||r)}},s=!0,g&&(l.push({id:d.id,type:\"dimensions\",dimensions:h}),d.expandParent&&d.parentId&&f.push({id:d.id,parentId:d.parentId,rect:ho(d,r)}))}}}),f.length>0){const c=Kg(f,e,n,r);l.push(...c)}return{changes:l,updatedInternals:s}}function Ug({delta:t,panZoom:e,transform:n,translateExtent:i,width:r,height:o}){if(!e||!t.x&&!t.y)return!1;const s=e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,o]],i);return!!s&&(s.x!==n[0]||s.y!==n[1]||s.k!==n[2])}function Ra(t,e,n){t.clear(),e.clear();for(const i of n){const{source:r,target:o,sourceHandle:s=null,targetHandle:l=null}=i,a=`${r}-source-${s}`,u=`${o}-target-${l}`,f=t.get(a)||new Map,c=t.get(u)||new Map,d={edgeId:i.id,source:r,target:o,sourceHandle:s,targetHandle:l};e.set(i.id,i),t.set(a,f.set(`${o}-${l}`,d)),t.set(u,c.set(`${r}-${s}`,d))}}function za(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:za(n,e):!1}function cs(t,e,n){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===n)return!1;i=i.parentElement}while(i);return!1}function jg(t,e,n,i){const r=new Map;for(const[o,s]of t)if((s.selected||s.id===i)&&(!s.parentId||!za(s,t))&&(s.draggable||e&&typeof s.draggable>\"u\")){const l=t.get(o);l&&r.set(o,{id:o,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return r}function Ir({nodeId:t,dragItems:e,nodeLookup:n}){var o,s;const i=[];for(const[l,a]of e){const u=(o=n.get(l))==null?void 0:o.internals.userNode;u&&i.push({...u,position:a.position})}if(!t)return[i[0],i];const r=n.get(t).internals.userNode;return[{...r,position:((s=e.get(t))==null?void 0:s.position)||r.position},i]}function Gg({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:i,onDragStop:r}){let o={x:null,y:null},s=0,l=new Map,a=!1,u={x:0,y:0},f=null,c=!1,d=null,h=!1;function g({noDragClassName:p,handleSelector:m,domNode:w,isSelectable:b,nodeId:_}){d=gt(w);function I({x:O,y:R},D){const{nodeLookup:W,nodeExtent:P,snapGrid:k,snapToGrid:F,nodeOrigin:M,onNodeDrag:N,onSelectionDrag:H,onError:K,updateNodePositions:Y}=e();o={x:O,y:R};let G=!1,q={x:0,y:0,x2:0,y2:0};if(l.size>1&&P){const se=co(l,{nodeOrigin:M});q=jr(se)}for(const[se,oe]of l){let pe={x:O-oe.distance.x,y:R-oe.distance.y};F&&(pe=go(pe,k));let Se=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];if(l.size>1&&P&&!oe.extent){const{positionAbsolute:Te}=oe.internals,Ee=Te.x-q.x+P[0][0],Fe=Te.x+oe.measured.width-q.x2+P[1][0],De=Te.y-q.y+P[0][1],We=Te.y+oe.measured.height-q.y2+P[1][1];Se=[[Ee,De],[Fe,We]]}const{position:L,positionAbsolute:ve}=Eg({nodeId:se,nextPosition:pe,nodeLookup:W,nodeExtent:Se,nodeOrigin:M,onError:K});G=G||oe.position.x!==L.x||oe.position.y!==L.y,oe.position=L,oe.internals.positionAbsolute=ve}if(G&&(Y(l,!0),D&&(i||N||!_&&H))){const[se,oe]=Ir({nodeId:_,dragItems:l,nodeLookup:W});i==null||i(D,l,se,oe),N==null||N(D,se,oe),_||H==null||H(D,oe)}}function v(){if(!f)return;const[O,R]=Ea(u,f);if(O!==0||R!==0){const{transform:D,panBy:W}=e();o.x=(o.x??0)-O/D[2],o.y=(o.y??0)-R/D[2],W({x:O,y:R})&&I(o,null)}s=requestAnimationFrame(v)}function S(O){var G;const{nodeLookup:R,multiSelectionActive:D,nodesDraggable:W,transform:P,snapGrid:k,snapToGrid:F,selectNodesOnDrag:M,onNodeDragStart:N,onSelectionDragStart:H,unselectNodesAndEdges:K}=e();c=!0,(!M||!b)&&!D&&_&&((G=R.get(_))!=null&&G.selected||K()),b&&M&&_&&(t==null||t(_));const Y=Or(O.sourceEvent,{transform:P,snapGrid:k,snapToGrid:F});if(o=Y,l=jg(R,W,Y,_),l.size>0&&(n||N||!_&&H)){const[q,se]=Ir({nodeId:_,dragItems:l,nodeLookup:R});n==null||n(O.sourceEvent,l,q,se),N==null||N(O.sourceEvent,q,se),_||H==null||H(O.sourceEvent,se)}}const C=Ad().on(\"start\",O=>{const{domNode:R,nodeDragThreshold:D,transform:W,snapGrid:P,snapToGrid:k}=e();h=!1,D===0&&S(O),o=Or(O.sourceEvent,{transform:W,snapGrid:P,snapToGrid:k}),f=(R==null?void 0:R.getBoundingClientRect())||null,u=zt(O.sourceEvent,f)}).on(\"drag\",O=>{const{autoPanOnNodeDrag:R,transform:D,snapGrid:W,snapToGrid:P,nodeDragThreshold:k}=e(),F=Or(O.sourceEvent,{transform:D,snapGrid:W,snapToGrid:P});if(O.sourceEvent.type===\"touchmove\"&&O.sourceEvent.touches.length>1&&(h=!0),!h){if(!a&&R&&c&&(a=!0,v()),!c){const M=F.xSnapped-(o.x??0),N=F.ySnapped-(o.y??0);Math.sqrt(M*M+N*N)>k&&S(O)}(o.x!==F.xSnapped||o.y!==F.ySnapped)&&l&&c&&(u=zt(O.sourceEvent,f),I(F,O.sourceEvent))}}).on(\"end\",O=>{if(!(!c||h)&&(a=!1,c=!1,cancelAnimationFrame(s),l.size>0)){const{nodeLookup:R,updateNodePositions:D,onNodeDragStop:W,onSelectionDragStop:P}=e();if(D(l,!1),r||W||!_&&P){const[k,F]=Ir({nodeId:_,dragItems:l,nodeLookup:R});r==null||r(O.sourceEvent,l,k,F),W==null||W(O.sourceEvent,k,F),_||P==null||P(O.sourceEvent,F)}}}).filter(O=>{const R=O.target;return!O.button&&(!p||!cs(R,`.${p}`,w))&&(!m||cs(R,m,w))});d.call(C)}function y(){d==null||d.on(\".drag\",null)}return{update:g,destroy:y}}function ds(t,e,n,i){return(e[n]||[]).reduce((r,o)=>(`${t.id}-${o.id}-${n}`!==i&&r.push({id:o.id||null,type:n,nodeId:t.id,x:t.internals.positionAbsolute.x+o.x+o.width/2,y:t.internals.positionAbsolute.y+o.y+o.height/2}),r),[])}function Zg(t,e,n){let i=[],r=1/0;for(const o of n){const s=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));s<=e&&(s<r?i=[o]:s===r&&i.push(o),r=s)}return i.length?i.length===1?i[0]:i.find(o=>o.type===\"target\")||i[0]:null}function Qg({nodeLookup:t,nodeId:e,handleId:n,handleType:i}){const r=[];for(const[,o]of t)if(o.internals.handleBounds){const s=`${e}-${n}-${i}`,l=ds(o,o.internals.handleBounds,\"source\",s),a=ds(o,o.internals.handleBounds,\"target\",s);r.push(...l,...a)}return r}function La(t,e){return t||(e!=null&&e.classList.contains(\"target\")?\"target\":e!=null&&e.classList.contains(\"source\")?\"source\":null)}function xg(t,e){let n=null;return e?n=\"valid\":t&&!e&&(n=\"invalid\"),n}const Ha=()=>!0;let _i=null;function $g(t,{connectionMode:e,connectionRadius:n,handleId:i,nodeId:r,edgeUpdaterType:o,isTarget:s,domNode:l,nodeLookup:a,lib:u,autoPanOnConnect:f,flowId:c,panBy:d,cancelConnection:h,onConnectStart:g,onConnect:y,onConnectEnd:p,isValidConnection:m=Ha,onEdgeUpdateEnd:w,updateConnection:b,getTransform:_,getConnectionStartHandle:I}){const v=Ag(t.target);let S=0,C;const{x:O,y:R}=zt(t),D=v==null?void 0:v.elementFromPoint(O,R),W=La(o,D),P=l==null?void 0:l.getBoundingClientRect();if(!P||!W)return;let k=zt(t,P),F=!1,M=null,N=!1,H=null;const K=Qg({nodeLookup:a,nodeId:r,handleId:i,handleType:W});function Y(){if(!f||!P)return;const[se,oe]=Ea(k,P);d({x:se,y:oe}),S=requestAnimationFrame(Y)}_i={nodeId:r,handleId:i,type:W},b({connectionPosition:k,connectionStatus:null,connectionStartHandle:_i,connectionEndHandle:null}),g==null||g(t,{nodeId:r,handleId:i,handleType:W});function G(se){I()||q(se);const oe=_();k=zt(se,P),C=Zg(mo(k,oe,!1,[1,1]),n,K),F||(Y(),F=!0);const pe=Ba(se,{handle:C,connectionMode:e,fromNodeId:r,fromHandleId:i,fromType:s?\"target\":\"source\",isValidConnection:m,doc:v,lib:u,flowId:c});H=pe.handleDomNode,M=pe.connection,N=pe.isValid,b({connectionStartHandle:_i,connectionPosition:C&&N?Mg({x:C.x,y:C.y},oe):k,connectionStatus:xg(!!C,N),connectionEndHandle:pe.endHandle})}function q(se){(C||H)&&M&&N&&(y==null||y(M)),p==null||p(se),o&&(w==null||w(se)),h(),cancelAnimationFrame(S),F=!1,N=!1,M=null,H=null,_i=null,v.removeEventListener(\"mousemove\",G),v.removeEventListener(\"mouseup\",q),v.removeEventListener(\"touchmove\",G),v.removeEventListener(\"touchend\",q)}v.addEventListener(\"mousemove\",G),v.addEventListener(\"mouseup\",q),v.addEventListener(\"touchmove\",G),v.addEventListener(\"touchend\",q)}function Ba(t,{handle:e,connectionMode:n,fromNodeId:i,fromHandleId:r,fromType:o,doc:s,lib:l,flowId:a,isValidConnection:u=Ha}){const f=o===\"target\",c=e?s.querySelector(`.${l}-flow__handle[data-id=\"${a}-${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}\"]`):null,{x:d,y:h}=zt(t),g=s.elementFromPoint(d,h),y=g!=null&&g.classList.contains(`${l}-flow__handle`)?g:c,p={handleDomNode:y,isValid:!1,connection:null,endHandle:null};if(y){const m=La(void 0,y),w=y.getAttribute(\"data-nodeid\"),b=y.getAttribute(\"data-handleid\"),_=y.classList.contains(\"connectable\"),I=y.classList.contains(\"connectableend\");if(!w)return p;const v={source:f?w:i,sourceHandle:f?b:r,target:f?i:w,targetHandle:f?r:b};p.connection=v,_&&I&&(n===Ut.Strict?f&&m===\"source\"||!f&&m===\"target\":w!==i||b!==r)&&(p.endHandle={nodeId:w,handleId:b,type:m},p.isValid=u(v))}return p}const em={onPointerDown:$g,isValid:Ba};function tm({domNode:t,panZoom:e,getTransform:n,getViewScale:i}){const r=gt(t);function o({translateExtent:l,width:a,height:u,zoomStep:f=10,pannable:c=!0,zoomable:d=!0,inversePan:h=!1}){const g=b=>{const _=n();if(b.sourceEvent.type!==\"wheel\"||!e)return;const I=-b.sourceEvent.deltaY*(b.sourceEvent.deltaMode===1?.05:b.sourceEvent.deltaMode?1:.002)*f,v=_[2]*Math.pow(2,I);e.scaleTo(v)};let y=[0,0];const p=b=>{(b.sourceEvent.type===\"mousedown\"||b.sourceEvent.type===\"touchstart\")&&(y=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY])},m=b=>{const _=n();if(b.sourceEvent.type!==\"mousemove\"&&b.sourceEvent.type!==\"touchmove\"||!e)return;const I=[b.sourceEvent.clientX??b.sourceEvent.touches[0].clientX,b.sourceEvent.clientY??b.sourceEvent.touches[0].clientY],v=[I[0]-y[0],I[1]-y[1]];y=I;const S=i()*Math.max(_[2],Math.log(_[2]))*(h?-1:1),C={x:_[0]-v[0]*S,y:_[1]-v[1]*S},O=[[0,0],[a,u]];e.setViewportConstrained({x:C.x,y:C.y,zoom:_[2]},O,l)},w=va().on(\"start\",p).on(\"zoom\",c?m:null).on(\"zoom.wheel\",d?g:null);r.call(w,{})}function s(){r.on(\"zoom\",null)}return{update:o,destroy:s,pointer:bt}}const nm=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,yr=t=>({x:t.x,y:t.y,zoom:t.k}),Tr=({x:t,y:e,zoom:n})=>hr.translate(t,e).scale(n),Sn=(t,e)=>t.target.closest(`.${e}`),Va=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Mr=(t,e=0)=>typeof e==\"number\"&&e>0?t.transition().duration(e):t,qa=t=>{const e=t.ctrlKey&&Gi()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function im({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:i,panOnScrollMode:r,panOnScrollSpeed:o,zoomOnPinch:s,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:u}){return f=>{if(Sn(f,e))return!1;f.preventDefault(),f.stopImmediatePropagation();const c=n.property(\"__zoom\").k||1;if(f.ctrlKey&&s){const p=bt(f),m=qa(f),w=c*Math.pow(2,m);i.scaleTo(n,w,p,f);return}const d=f.deltaMode===1?20:1;let h=r===Ct.Vertical?0:f.deltaX*d,g=r===Ct.Horizontal?0:f.deltaY*d;!Gi()&&f.shiftKey&&r!==Ct.Vertical&&(h=f.deltaY*d,g=0),i.translateBy(n,-(h/c)*o,-(g/c)*o,{internal:!0});const y=yr(n.property(\"__zoom\"));clearTimeout(t.panScrollTimeout),t.isPanScrolling||(t.isPanScrolling=!0,l==null||l(f,y)),t.isPanScrolling&&(a==null||a(f,y),t.panScrollTimeout=setTimeout(()=>{u==null||u(f,y),t.isPanScrolling=!1},150))}}function rm({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(i,r){if(!e&&i.type===\"wheel\"&&!i.ctrlKey||Sn(i,t))return null;i.preventDefault(),n.call(this,i,r)}}function om({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return i=>{var o,s,l;if((o=i.sourceEvent)!=null&&o.internal)return;const r=yr(i.transform);t.mouseButton=((s=i.sourceEvent)==null?void 0:s.button)||0,t.isZoomingOrPanning=!0,t.prevViewport=r,((l=i.sourceEvent)==null?void 0:l.type)===\"mousedown\"&&e(!0),n&&(n==null||n(i.sourceEvent,r))}}function sm({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:i,onPanZoom:r}){return o=>{var s,l;t.usedRightMouseButton=!!(n&&Va(e,t.mouseButton??0)),(s=o.sourceEvent)!=null&&s.sync||i([o.transform.x,o.transform.y,o.transform.k]),r&&!((l=o.sourceEvent)!=null&&l.internal)&&(r==null||r(o.sourceEvent,yr(o.transform)))}}function lm({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:i,onPanZoomEnd:r,onPaneContextMenu:o}){return s=>{var l;if(!((l=s.sourceEvent)!=null&&l.internal)&&(t.isZoomingOrPanning=!1,o&&Va(e,t.mouseButton??0)&&!t.usedRightMouseButton&&s.sourceEvent&&o(s.sourceEvent),t.usedRightMouseButton=!1,i(!1),r&&nm(t.prevViewport,s.transform))){const a=yr(s.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r==null||r(s.sourceEvent,a)},n?150:0)}}}function am({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:i,panOnScroll:r,zoomOnDoubleClick:o,userSelectionActive:s,noWheelClassName:l,noPanClassName:a,lib:u}){return f=>{var g;const c=t||e,d=n&&f.ctrlKey;if(f.button===1&&f.type===\"mousedown\"&&(Sn(f,`${u}-flow__node`)||Sn(f,`${u}-flow__edge`)))return!0;if(!i&&!c&&!r&&!o&&!n||s||Sn(f,l)&&f.type===\"wheel\"||Sn(f,a)&&(f.type!==\"wheel\"||r&&f.type===\"wheel\"&&!t)||!n&&f.ctrlKey&&f.type===\"wheel\")return!1;if(!n&&f.type===\"touchstart\"&&((g=f.touches)==null?void 0:g.length)>1)return f.preventDefault(),!1;if(!c&&!r&&!d&&f.type===\"wheel\"||!i&&(f.type===\"mousedown\"||f.type===\"touchstart\")||Array.isArray(i)&&!i.includes(f.button)&&f.type===\"mousedown\")return!1;const h=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||f.type===\"wheel\")&&h}}function um({domNode:t,minZoom:e,maxZoom:n,translateExtent:i,viewport:r,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:l,onTransformChange:a,onDraggingChange:u}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=t.getBoundingClientRect(),d=va().scaleExtent([e,n]).translateExtent(i),h=gt(t).call(d);b({x:r.x,y:r.y,zoom:Fn(r.zoom,e,n)},[[0,0],[c.width,c.height]],i);const g=h.on(\"wheel.zoom\"),y=h.on(\"dblclick.zoom\");d.wheelDelta(qa);function p(D,W){h&&(d==null||d.transform(Mr(h,W==null?void 0:W.duration),D))}function m({noWheelClassName:D,noPanClassName:W,onPaneContextMenu:P,userSelectionActive:k,panOnScroll:F,panOnDrag:M,panOnScrollMode:N,panOnScrollSpeed:H,preventScrolling:K,zoomOnPinch:Y,zoomOnScroll:G,zoomOnDoubleClick:q,zoomActivationKeyPressed:se,lib:oe}){k&&!f.isZoomingOrPanning&&w();const Se=F&&!se&&!k?im({zoomPanValues:f,noWheelClassName:D,d3Selection:h,d3Zoom:d,panOnScrollMode:N,panOnScrollSpeed:H,zoomOnPinch:Y,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:l}):rm({noWheelClassName:D,preventScrolling:K,d3ZoomHandler:g});if(h.on(\"wheel.zoom\",Se,{passive:!1}),!k){const ve=om({zoomPanValues:f,onDraggingChange:u,onPanZoomStart:s});d.on(\"start\",ve);const Te=sm({zoomPanValues:f,panOnDrag:M,onPaneContextMenu:!!P,onPanZoom:o,onTransformChange:a});d.on(\"zoom\",Te);const Ee=lm({zoomPanValues:f,panOnDrag:M,panOnScroll:F,onPaneContextMenu:P,onPanZoomEnd:l,onDraggingChange:u});d.on(\"end\",Ee)}const L=am({zoomActivationKeyPressed:se,panOnDrag:M,zoomOnScroll:G,panOnScroll:F,zoomOnDoubleClick:q,zoomOnPinch:Y,userSelectionActive:k,noPanClassName:W,noWheelClassName:D,lib:oe});d.filter(L),q?h.on(\"dblclick.zoom\",y):h.on(\"dblclick.zoom\",null)}function w(){d.on(\"zoom\",null)}function b(D,W,P){const k=Tr(D),F=d==null?void 0:d.constrain()(k,W,P);return F&&p(F),F}function _(D,W){const P=Tr(D);return p(P,W),P}function I(D){if(h){const W=Tr(D),P=h.property(\"__zoom\");(P.k!==D.zoom||P.x!==D.x||P.y!==D.y)&&(d==null||d.transform(h,W,null,{sync:!0}))}}function v(){const D=h?wa(h.node()):{x:0,y:0,k:1};return{x:D.x,y:D.y,zoom:D.k}}function S(D,W){h&&(d==null||d.scaleTo(Mr(h,W==null?void 0:W.duration),D))}function C(D,W){h&&(d==null||d.scaleBy(Mr(h,W==null?void 0:W.duration),D))}function O(D){d==null||d.scaleExtent(D)}function R(D){d==null||d.translateExtent(D)}return{update:m,destroy:w,setViewport:_,setViewportConstrained:b,getViewport:v,scaleTo:S,scaleBy:C,setScaleExtent:O,setTranslateExtent:R,syncViewport:I}}var hs;(function(t){t.Line=\"line\",t.Handle=\"handle\"})(hs||(hs={}));function fm(t){let e,n,i,r,o,s;const l=t[44].default,a=ot(l,t,t[43],null);return{c(){e=Z(\"div\"),a&&a.c(),E(e,\"data-handleid\",t[7]),E(e,\"data-nodeid\",t[14]),E(e,\"data-handlepos\",t[3]),E(e,\"data-id\",n=t[13]+\"-\"+t[14]+\"-\"+(t[1]||null)+\"-\"+t[2]),E(e,\"class\",i=Ae([\"svelte-flow__handle\",`svelte-flow__handle-${t[3]}`,\"nodrag\",\"nopan\",t[3],t[5]])),E(e,\"style\",t[4]),E(e,\"role\",\"button\"),E(e,\"tabindex\",\"-1\"),ge(e,\"valid\",t[8]),ge(e,\"connectingto\",t[6]),ge(e,\"connectingfrom\",t[10]),ge(e,\"source\",!t[12]),ge(e,\"target\",t[12]),ge(e,\"connectablestart\",t[0]),ge(e,\"connectableend\",t[0]),ge(e,\"connectable\",t[0]),ge(e,\"connectionindicator\",t[0]&&(!t[11]||t[9]))},m(u,f){V(u,e,f),a&&a.m(e,null),r=!0,o||(s=[de(e,\"mousedown\",t[32]),de(e,\"touchstart\",t[32])],o=!0)},p(u,f){a&&a.p&&(!r||f[1]&4096)&&lt(a,l,u,u[43],r?st(l,u[43],f,null):at(u[43]),null),(!r||f[0]&128)&&E(e,\"data-handleid\",u[7]),(!r||f[0]&8)&&E(e,\"data-handlepos\",u[3]),(!r||f[0]&8198&&n!==(n=u[13]+\"-\"+u[14]+\"-\"+(u[1]||null)+\"-\"+u[2]))&&E(e,\"data-id\",n),(!r||f[0]&40&&i!==(i=Ae([\"svelte-flow__handle\",`svelte-flow__handle-${u[3]}`,\"nodrag\",\"nopan\",u[3],u[5]])))&&E(e,\"class\",i),(!r||f[0]&16)&&E(e,\"style\",u[4]),(!r||f[0]&296)&&ge(e,\"valid\",u[8]),(!r||f[0]&104)&&ge(e,\"connectingto\",u[6]),(!r||f[0]&1064)&&ge(e,\"connectingfrom\",u[10]),(!r||f[0]&4136)&&ge(e,\"source\",!u[12]),(!r||f[0]&4136)&&ge(e,\"target\",u[12]),(!r||f[0]&41)&&ge(e,\"connectablestart\",u[0]),(!r||f[0]&41)&&ge(e,\"connectableend\",u[0]),(!r||f[0]&41)&&ge(e,\"connectable\",u[0]),(!r||f[0]&2601)&&ge(e,\"connectionindicator\",u[0]&&(!u[11]||u[9]))},i(u){r||(A(a,u),r=!0)},o(u){z(a,u),r=!1},d(u){u&&B(e),a&&a.d(u),o=!1,qe(s)}}}function cm(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,p,m,w,b,_,I,v,S,C,O,R,{$$slots:D={},$$scope:W}=e,{id:P=void 0}=e,{type:k=\"source\"}=e,{position:F=ye.Top}=e,{style:M=void 0}=e,{isConnectable:N=void 0}=e,{isValidConnection:H=void 0}=e,{onconnect:K=void 0}=e,{ondisconnect:Y=void 0}=e,{class:G=void 0}=e;const q=Hi(\"svelteflow__node_id\"),se=Hi(\"svelteflow__node_connectable\");j(t,se,Q=>n(42,R=Q));const oe=Ke(),{connectionMode:pe,domNode:Se,nodeLookup:L,connectionRadius:ve,viewport:Te,isValidConnection:Ee,lib:Fe,addEdge:De,onedgecreate:We,panBy:U,cancelConnection:Xe,updateConnection:Me,autoPanOnConnect:At,edges:Pt,connectionLookup:Nt,onconnect:je,onconnectstart:kt,onconnectend:ie,flowId:Bt,connection:Vt}=oe;j(t,pe,Q=>n(39,c=Q)),j(t,Se,Q=>n(54,C=Q)),j(t,L,Q=>n(53,S=Q)),j(t,ve,Q=>n(55,O=Q)),j(t,Te,Q=>n(45,g=Q)),j(t,Ee,Q=>n(50,b=Q)),j(t,Fe,Q=>n(52,v=Q)),j(t,We,Q=>n(49,w=Q)),j(t,At,Q=>n(51,I=Q)),j(t,Pt,Q=>n(41,h=Q)),j(t,Nt,Q=>n(40,d=Q)),j(t,je,Q=>n(48,m=Q)),j(t,kt,Q=>n(47,p=Q)),j(t,ie,Q=>n(46,y=Q)),j(t,Bt,Q=>n(13,_=Q)),j(t,Vt,Q=>n(38,f=Q));function Zt(Q){const xe=Ma(Q);(xe&&Q.button===0||!xe)&&em.onPointerDown(Q,{handleId:r,nodeId:q,isTarget:i,connectionRadius:O,domNode:C,nodeLookup:S,connectionMode:c,lib:v,autoPanOnConnect:I,flowId:_,isValidConnection:H??b,updateConnection:Me,cancelConnection:Xe,panBy:U,onConnect:tt=>{const ut=w?w(tt):tt;ut&&(De(ut),m==null||m(tt))},onConnectStart:(tt,ut)=>{p==null||p(tt,{nodeId:ut.nodeId,handleId:ut.handleId,handleType:ut.handleType})},onConnectEnd:tt=>{y==null||y(tt)},getTransform:()=>[g.x,g.y,g.zoom],getConnectionStartHandle:()=>f.startHandle})}let J=null,pt;return t.$$set=Q=>{\"id\"in Q&&n(1,P=Q.id),\"type\"in Q&&n(2,k=Q.type),\"position\"in Q&&n(3,F=Q.position),\"style\"in Q&&n(4,M=Q.style),\"isConnectable\"in Q&&n(0,N=Q.isConnectable),\"isValidConnection\"in Q&&n(33,H=Q.isValidConnection),\"onconnect\"in Q&&n(34,K=Q.onconnect),\"ondisconnect\"in Q&&n(35,Y=Q.ondisconnect),\"class\"in Q&&n(5,G=Q.class),\"$$scope\"in Q&&n(43,W=Q.$$scope)},t.$$.update=()=>{var Q,xe,tt,ut,un,fn,cn,dn,qt;if(t.$$.dirty[0]&4&&n(12,i=k===\"target\"),t.$$.dirty[0]&1|t.$$.dirty[1]&2048&&n(0,N=N!==void 0?N:R),t.$$.dirty[0]&2&&n(7,r=P||null),t.$$.dirty[0]&6|t.$$.dirty[1]&1560&&(K||Y)&&n(37,pt=d.get(`${q}-${k}-${P||null}`)),t.$$.dirty[1]&120){if(J&&!wg(pt,J)){const hn=pt??new Map;es(J,hn,Y),es(hn,J,K)}n(36,J=pt??new Map)}t.$$.dirty[1]&128&&n(11,o=!!f.startHandle),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(10,s=((Q=f.startHandle)==null?void 0:Q.nodeId)===q&&((xe=f.startHandle)==null?void 0:xe.type)===k&&((tt=f.startHandle)==null?void 0:tt.handleId)===r),t.$$.dirty[0]&132|t.$$.dirty[1]&128&&n(6,l=((ut=f.endHandle)==null?void 0:ut.nodeId)===q&&((un=f.endHandle)==null?void 0:un.type)===k&&((fn=f.endHandle)==null?void 0:fn.handleId)===r),t.$$.dirty[0]&132|t.$$.dirty[1]&384&&n(9,a=c===Ut.Strict?((cn=f.startHandle)==null?void 0:cn.type)!==k:q!==((dn=f.startHandle)==null?void 0:dn.nodeId)||r!==((qt=f.startHandle)==null?void 0:qt.handleId)),t.$$.dirty[0]&64|t.$$.dirty[1]&128&&n(8,u=l&&f.status===\"valid\")},[N,P,k,F,M,G,l,r,u,a,s,o,i,_,q,se,pe,Se,L,ve,Te,Ee,Fe,We,At,Pt,Nt,je,kt,ie,Bt,Vt,Zt,H,K,Y,J,pt,f,c,d,h,R,W,D]}class Xt extends ue{constructor(e){super(),ae(this,e,cm,fm,ce,{id:1,type:2,position:3,style:4,isConnectable:0,isValidConnection:33,onconnect:34,ondisconnect:35,class:5},null,[-1,-1])}}function dm(t){var a;let e,n,i=((a=t[0])==null?void 0:a.label)+\"\",r,o,s,l;return e=new Xt({props:{type:\"target\",position:t[1]??ye.Top}}),s=new Xt({props:{type:\"source\",position:t[2]??ye.Bottom}}),{c(){te(e.$$.fragment),n=ne(),r=ze(i),o=ne(),te(s.$$.fragment)},m(u,f){x(e,u,f),V(u,n,f),V(u,r,f),V(u,o,f),x(s,u,f),l=!0},p(u,[f]){var h;const c={};f&2&&(c.position=u[1]??ye.Top),e.$set(c),(!l||f&1)&&i!==(i=((h=u[0])==null?void 0:h.label)+\"\")&&Qe(r,i);const d={};f&4&&(d.position=u[2]??ye.Bottom),s.$set(d)},i(u){l||(A(e.$$.fragment,u),A(s.$$.fragment,u),l=!0)},o(u){z(e.$$.fragment,u),z(s.$$.fragment,u),l=!1},d(u){u&&(B(n),B(r),B(o)),$(e,u),$(s,u)}}}function hm(t,e,n){const i=[\"data\",\"targetPosition\",\"sourcePosition\"];Le(e,i);let{data:r={label:\"Node\"}}=e,{targetPosition:o=void 0}=e,{sourcePosition:s=void 0}=e;return t.$$set=l=>{e=we(we({},e),yt(l)),n(3,Le(e,i)),\"data\"in l&&n(0,r=l.data),\"targetPosition\"in l&&n(1,o=l.targetPosition),\"sourcePosition\"in l&&n(2,s=l.sourcePosition)},[r,o,s]}class Wa extends ue{constructor(e){super(),ae(this,e,hm,dm,ce,{data:0,targetPosition:1,sourcePosition:2})}}function gm(t){var s;let e=((s=t[0])==null?void 0:s.label)+\"\",n,i,r,o;return r=new Xt({props:{type:\"source\",position:t[1]??ye.Bottom}}),{c(){n=ze(e),i=ne(),te(r.$$.fragment)},m(l,a){V(l,n,a),V(l,i,a),x(r,l,a),o=!0},p(l,[a]){var f;(!o||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+\"\")&&Qe(n,e);const u={};a&2&&(u.position=l[1]??ye.Bottom),r.$set(u)},i(l){o||(A(r.$$.fragment,l),o=!0)},o(l){z(r.$$.fragment,l),o=!1},d(l){l&&(B(n),B(i)),$(r,l)}}}function mm(t,e,n){const i=[\"data\",\"sourcePosition\"];Le(e,i);let{data:r={label:\"Node\"}}=e,{sourcePosition:o=void 0}=e;return t.$$set=s=>{e=we(we({},e),yt(s)),n(2,Le(e,i)),\"data\"in s&&n(0,r=s.data),\"sourcePosition\"in s&&n(1,o=s.sourcePosition)},[r,o]}class ym extends ue{constructor(e){super(),ae(this,e,mm,gm,ce,{data:0,sourcePosition:1})}}function pm(t){var s;let e=((s=t[0])==null?void 0:s.label)+\"\",n,i,r,o;return r=new Xt({props:{type:\"target\",position:t[1]??ye.Top}}),{c(){n=ze(e),i=ne(),te(r.$$.fragment)},m(l,a){V(l,n,a),V(l,i,a),x(r,l,a),o=!0},p(l,[a]){var f;(!o||a&1)&&e!==(e=((f=l[0])==null?void 0:f.label)+\"\")&&Qe(n,e);const u={};a&2&&(u.position=l[1]??ye.Top),r.$set(u)},i(l){o||(A(r.$$.fragment,l),o=!0)},o(l){z(r.$$.fragment,l),o=!1},d(l){l&&(B(n),B(i)),$(r,l)}}}function bm(t,e,n){const i=[\"data\",\"targetPosition\"];Le(e,i);let{data:r={label:\"Node\"}}=e,{targetPosition:o=void 0}=e;return t.$$set=s=>{e=we(we({},e),yt(s)),n(2,Le(e,i)),\"data\"in s&&n(0,r=s.data),\"targetPosition\"in s&&n(1,o=s.targetPosition)},[r,o]}class _m extends ue{constructor(e){super(),ae(this,e,bm,pm,ce,{data:0,targetPosition:1})}}function wm(t,e,n){const i=[];return Le(e,i),t.$$set=r=>{e=we(we({},e),yt(r)),n(0,Le(e,i))},[]}class vm extends ue{constructor(e){super(),ae(this,e,wm,null,ce,{})}}function gs(t,e,n){if(!e)return;const i=n?e.querySelector(n):e;i&&i.appendChild(t)}function km(t,{target:e,domNode:n}){return gs(t,n,e),{async update({target:i,domNode:r}){gs(t,r,i)},destroy(){t.parentNode&&t.parentNode.removeChild(t)}}}function Sm(t){let e,n,i,r,o;const s=t[3].default,l=ot(s,t,t[2],null);return{c(){e=Z(\"div\"),l&&l.c()},m(a,u){V(a,e,u),l&&l.m(e,null),i=!0,r||(o=Ue(n=km.call(null,e,{target:\".svelte-flow__edgelabel-renderer\",domNode:t[0]})),r=!0)},p(a,[u]){l&&l.p&&(!i||u&4)&&lt(l,s,a,a[2],i?st(s,a[2],u,null):at(a[2]),null),n&&Re(n.update)&&u&1&&n.update.call(null,{target:\".svelte-flow__edgelabel-renderer\",domNode:a[0]})},i(a){i||(A(l,a),i=!0)},o(a){z(l,a),i=!1},d(a){a&&B(e),l&&l.d(a),r=!1,o()}}}function Em(t,e,n){let i,{$$slots:r={},$$scope:o}=e;const{domNode:s}=Ke();return j(t,s,l=>n(0,i=l)),t.$$set=l=>{\"$$scope\"in l&&n(2,o=l.$$scope)},[i,s,o,r]}class Cm extends ue{constructor(e){super(),ae(this,e,Em,Sm,ce,{})}}function Xa(){const{edgeLookup:t,selectionRect:e,selectionRectMode:n,multiselectionKeyPressed:i,addSelectedEdges:r,unselectNodesAndEdges:o,elementsSelectable:s}=Ke();return l=>{const a=ee(t).get(l);if(!a){console.warn(\"012\",li.error012(l));return}(a.selectable||ee(s)&&typeof a.selectable>\"u\")&&(e.set(null),n.set(null),a.selected?a.selected&&ee(i)&&o({nodes:[],edges:[a]}):r([l]))}}function Om(t){let e,n,i=`translate(-50%, -50%) translate(${t[1]}px,${t[2]}px)`,r,o,s;const l=t[5].default,a=ot(l,t,t[7],null);return{c(){e=Z(\"div\"),a&&a.c(),E(e,\"class\",\"svelte-flow__edge-label\"),E(e,\"style\",n=\"pointer-events: all;\"+t[0]),E(e,\"role\",\"button\"),E(e,\"tabindex\",\"-1\"),fe(e,\"transform\",i)},m(u,f){V(u,e,f),a&&a.m(e,null),r=!0,o||(s=[de(e,\"keyup\",Tm),de(e,\"click\",t[6])],o=!0)},p(u,f){a&&a.p&&(!r||f&128)&&lt(a,l,u,u[7],r?st(l,u[7],f,null):at(u[7]),null),(!r||f&1&&n!==(n=\"pointer-events: all;\"+u[0]))&&E(e,\"style\",n);const c=f&1;(f&7&&i!==(i=`translate(-50%, -50%) translate(${u[1]}px,${u[2]}px)`)||c)&&fe(e,\"transform\",i)},i(u){r||(A(a,u),r=!0)},o(u){z(a,u),r=!1},d(u){u&&B(e),a&&a.d(u),o=!1,qe(s)}}}function Im(t){let e,n;return e=new Cm({props:{$$slots:{default:[Om]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&135&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}const Tm=()=>{};function Mm(t,e,n){let{$$slots:i={},$$scope:r}=e,{style:o=void 0}=e,{x:s=void 0}=e,{y:l=void 0}=e;const a=Xa(),u=Hi(\"svelteflow__edge_id\"),f=()=>{u&&a(u)};return t.$$set=c=>{\"style\"in c&&n(0,o=c.style),\"x\"in c&&n(1,s=c.x),\"y\"in c&&n(2,l=c.y),\"$$scope\"in c&&n(7,r=c.$$scope)},[o,s,l,a,u,i,f,r]}class Am extends ue{constructor(e){super(),ae(this,e,Mm,Im,ce,{style:0,x:1,y:2})}}function Pm(t){let e;return{c(){e=Ce(\"path\"),E(e,\"d\",t[1]),E(e,\"stroke-opacity\",0),E(e,\"stroke-width\",t[10]),E(e,\"fill\",\"none\"),E(e,\"class\",\"svelte-flow__edge-interaction\")},m(n,i){V(n,e,i)},p(n,i){i&2&&E(e,\"d\",n[1])},d(n){n&&B(e)}}}function ms(t){let e,n;return e=new Am({props:{x:t[3],y:t[4],style:t[5],$$slots:{default:[Nm]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&8&&(o.x=i[3]),r&16&&(o.y=i[4]),r&32&&(o.style=i[5]),r&4100&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Nm(t){let e;return{c(){e=ze(t[2])},m(n,i){V(n,e,i)},p(n,i){i&4&&Qe(e,n[2])},d(n){n&&B(e)}}}function Fm(t){let e,n,i,r,o,s,l=t[10]&&Pm(t),a=t[2]&&ms(t);return{c(){e=Ce(\"path\"),i=ne(),l&&l.c(),r=ne(),a&&a.c(),o=Ve(),E(e,\"id\",t[0]),E(e,\"d\",t[1]),E(e,\"class\",n=Ae([\"svelte-flow__edge-path\",t[9]])),E(e,\"marker-start\",t[6]),E(e,\"marker-end\",t[7]),E(e,\"fill\",\"none\"),E(e,\"style\",t[8])},m(u,f){V(u,e,f),V(u,i,f),l&&l.m(u,f),V(u,r,f),a&&a.m(u,f),V(u,o,f),s=!0},p(u,[f]){(!s||f&1)&&E(e,\"id\",u[0]),(!s||f&2)&&E(e,\"d\",u[1]),(!s||f&512&&n!==(n=Ae([\"svelte-flow__edge-path\",u[9]])))&&E(e,\"class\",n),(!s||f&64)&&E(e,\"marker-start\",u[6]),(!s||f&128)&&E(e,\"marker-end\",u[7]),(!s||f&256)&&E(e,\"style\",u[8]),u[10]&&l.p(u,f),u[2]?a?(a.p(u,f),f&4&&A(a,1)):(a=ms(u),a.c(),A(a,1),a.m(o.parentNode,o)):a&&(Oe(),z(a,1,1,()=>{a=null}),Ie())},i(u){s||(A(a),s=!0)},o(u){z(a),s=!1},d(u){u&&(B(e),B(i),B(r),B(o)),l&&l.d(u),a&&a.d(u)}}}function Dm(t,e,n){let{id:i=void 0}=e,{path:r}=e,{label:o=void 0}=e,{labelX:s=void 0}=e,{labelY:l=void 0}=e,{labelStyle:a=void 0}=e,{markerStart:u=void 0}=e,{markerEnd:f=void 0}=e,{style:c=void 0}=e,{interactionWidth:d=20}=e,{class:h=void 0}=e,g=d===void 0?20:d;return t.$$set=y=>{\"id\"in y&&n(0,i=y.id),\"path\"in y&&n(1,r=y.path),\"label\"in y&&n(2,o=y.label),\"labelX\"in y&&n(3,s=y.labelX),\"labelY\"in y&&n(4,l=y.labelY),\"labelStyle\"in y&&n(5,a=y.labelStyle),\"markerStart\"in y&&n(6,u=y.markerStart),\"markerEnd\"in y&&n(7,f=y.markerEnd),\"style\"in y&&n(8,c=y.style),\"interactionWidth\"in y&&n(11,d=y.interactionWidth),\"class\"in y&&n(9,h=y.class)},[i,r,o,s,l,a,u,f,c,h,g,d]}class pr extends ue{constructor(e){super(),ae(this,e,Dm,Fm,ce,{id:0,path:1,label:2,labelX:3,labelY:4,labelStyle:5,markerStart:6,markerEnd:7,style:8,interactionWidth:11,class:9})}}function Rm(t){let e,n;return e=new pr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function zm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Le(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:w}=e;return t.$$set=b=>{e=we(we({},e),yt(b)),n(15,Le(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,w=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=Aa({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:w}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,w]}class Ya extends ue{constructor(e){super(),ae(this,e,zm,Rm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Lm(t){let e,n;return e=new pr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Hm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Le(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:w}=e;return t.$$set=b=>{e=we(we({},e),yt(b)),n(15,Le(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,w=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=Qi({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:w}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,w]}class Bm extends ue{constructor(e){super(),ae(this,e,Hm,Lm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Vm(t){let e,n;return e=new pr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function qm(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"targetX\",\"targetY\"];Le(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{targetX:y}=e,{targetY:p}=e;return t.$$set=m=>{e=we(we({},e),yt(m)),n(13,Le(e,s)),\"label\"in m&&n(0,l=m.label),\"labelStyle\"in m&&n(1,a=m.labelStyle),\"style\"in m&&n(2,u=m.style),\"markerStart\"in m&&n(3,f=m.markerStart),\"markerEnd\"in m&&n(4,c=m.markerEnd),\"interactionWidth\"in m&&n(5,d=m.interactionWidth),\"sourceX\"in m&&n(9,h=m.sourceX),\"sourceY\"in m&&n(10,g=m.sourceY),\"targetX\"in m&&n(11,y=m.targetX),\"targetY\"in m&&n(12,p=m.targetY)},t.$$.update=()=>{t.$$.dirty&7680&&n(8,[i,r,o]=Na({sourceX:h,sourceY:g,targetX:y,targetY:p}),i,(n(7,r),n(9,h),n(10,g),n(11,y),n(12,p)),(n(6,o),n(9,h),n(10,g),n(11,y),n(12,p)))},[l,a,u,f,c,d,o,r,i,h,g,y,p]}class Wm extends ue{constructor(e){super(),ae(this,e,qm,Vm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,targetX:11,targetY:12})}}function Xm(t){let e,n;return e=new pr({props:{path:t[8],labelX:t[7],labelY:t[6],label:t[0],labelStyle:t[1],markerStart:t[3],markerEnd:t[4],interactionWidth:t[5],style:t[2]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,[r]){const o={};r&256&&(o.path=i[8]),r&128&&(o.labelX=i[7]),r&64&&(o.labelY=i[6]),r&1&&(o.label=i[0]),r&2&&(o.labelStyle=i[1]),r&8&&(o.markerStart=i[3]),r&16&&(o.markerEnd=i[4]),r&32&&(o.interactionWidth=i[5]),r&4&&(o.style=i[2]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Ym(t,e,n){let i,r,o;const s=[\"label\",\"labelStyle\",\"style\",\"markerStart\",\"markerEnd\",\"interactionWidth\",\"sourceX\",\"sourceY\",\"sourcePosition\",\"targetX\",\"targetY\",\"targetPosition\"];Le(e,s);let{label:l=void 0}=e,{labelStyle:a=void 0}=e,{style:u=void 0}=e,{markerStart:f=void 0}=e,{markerEnd:c=void 0}=e,{interactionWidth:d=void 0}=e,{sourceX:h}=e,{sourceY:g}=e,{sourcePosition:y}=e,{targetX:p}=e,{targetY:m}=e,{targetPosition:w}=e;return t.$$set=b=>{e=we(we({},e),yt(b)),n(15,Le(e,s)),\"label\"in b&&n(0,l=b.label),\"labelStyle\"in b&&n(1,a=b.labelStyle),\"style\"in b&&n(2,u=b.style),\"markerStart\"in b&&n(3,f=b.markerStart),\"markerEnd\"in b&&n(4,c=b.markerEnd),\"interactionWidth\"in b&&n(5,d=b.interactionWidth),\"sourceX\"in b&&n(9,h=b.sourceX),\"sourceY\"in b&&n(10,g=b.sourceY),\"sourcePosition\"in b&&n(11,y=b.sourcePosition),\"targetX\"in b&&n(12,p=b.targetX),\"targetY\"in b&&n(13,m=b.targetY),\"targetPosition\"in b&&n(14,w=b.targetPosition)},t.$$.update=()=>{t.$$.dirty&32256&&n(8,[i,r,o]=Qi({sourceX:h,sourceY:g,targetX:p,targetY:m,sourcePosition:y,targetPosition:w,borderRadius:0}),i,(n(7,r),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)),(n(6,o),n(9,h),n(10,g),n(12,p),n(13,m),n(11,y),n(14,w)))},[l,a,u,f,c,d,o,r,i,h,g,y,p,m,w]}class Km extends ue{constructor(e){super(),ae(this,e,Ym,Xm,ce,{label:0,labelStyle:1,style:2,markerStart:3,markerEnd:4,interactionWidth:5,sourceX:9,sourceY:10,sourcePosition:11,targetX:12,targetY:13,targetPosition:14})}}function Jm(t,e){const n=t.set,i=e.set,r=ee(t),o=ee(e);let l=r.length===0&&o.length>0?o:r;t.set(l);const a=u=>{const f=n(u);return l=f,i(l),f};t.set=e.set=a,t.update=e.update=u=>a(u(l))}function Um(t,e){const n=t.set,i=e.set;let r=ee(e);t.set(r);const o=s=>{n(s),i(s),r=s};t.set=e.set=o,t.update=e.update=s=>o(s(r))}const jm=(t,e,n)=>{if(!n)return;const i=ee(t),r=e.set,o=n.set;let s=n?ee(n):{x:0,y:0,zoom:1};e.set(s),e.set=l=>(r(l),o(l),s=l,l),n.set=l=>(i==null||i.syncViewport(l),r(l),o(l),s=l,l),e.update=l=>{e.set(l(s))},n.update=l=>{n.set(l(s))}},Gm=(t,e,n)=>{const{subscribe:i,set:r,update:o}=re([]);let s=t,l={},a=!0;const u=h=>(Fa(h,e,n,{elevateNodesOnSelect:a,defaults:l,checkEquality:!1}),s=h,r(s),s),f=h=>u(h(s)),c=h=>{l=h},d=h=>{a=h.elevateNodesOnSelect??a};return u(s),{subscribe:i,set:u,update:f,setDefaultOptions:c,setOptions:d}},Zm=(t,e,n,i)=>{const{subscribe:r,set:o,update:s}=re([]);let l=t,a={};const u=d=>{const h=a?d.map(g=>({...a,...g})):d;Ra(e,n,h),l=h,o(l)},f=d=>u(d(l)),c=d=>{a=d};return u(l),{subscribe:r,set:u,update:f,setDefaultOptions:c}},Ka={path:null,sourceX:null,sourceY:null,sourcePosition:null,targetX:null,targetY:null,targetPosition:null,pointerPosition:null,startHandle:null,endHandle:null,status:null},Qm={[ye.Left]:ye.Right,[ye.Right]:ye.Left,[ye.Top]:ye.Bottom,[ye.Bottom]:ye.Top};function xm(t,e){return Jt([e,t.connectionLineType,t.connectionMode,t.nodeLookup,t.viewport],([n,i,r,o,s])=>{var I,v,S,C,O,R;if(!((I=n.connectionStartHandle)!=null&&I.nodeId))return Ka;const l=o.get((v=n.connectionStartHandle)==null?void 0:v.nodeId),a=l==null?void 0:l.internals.handleBounds,u=(a==null?void 0:a[n.connectionStartHandle.type||\"source\"])||[],f=u||(a==null?void 0:a[((S=n==null?void 0:n.connectionStartHandle)==null?void 0:S.type)===\"source\"?\"target\":\"source\"]),c=r===Ut.Strict?u:f,d=(C=n.connectionStartHandle)!=null&&C.handleId?c==null?void 0:c.find(D=>{var W;return D.id===((W=n.connectionStartHandle)==null?void 0:W.handleId)}):c==null?void 0:c[0],h=d?d.x+d.width/2:((l==null?void 0:l.measured.width)??0)/2,g=d?d.y+d.height/2:(l==null?void 0:l.measured.height)??0,y=((l==null?void 0:l.internals.positionAbsolute.x)??0)+h,p=((l==null?void 0:l.internals.positionAbsolute.y)??0)+g,m=d==null?void 0:d.position,w=m?Qm[m]:void 0,b={sourceX:y,sourceY:p,sourcePosition:m,targetX:((((O=n.connectionPosition)==null?void 0:O.x)??0)-s.x)/s.zoom,targetY:((((R=n.connectionPosition)==null?void 0:R.y)??0)-s.y)/s.zoom,targetPosition:w};let _=\"\";return i===Mn.Bezier?[_]=Aa(b):i===Mn.Step?[_]=Qi({...b,borderRadius:0}):i===Mn.SmoothStep?[_]=Qi(b):[_]=Na(b),{path:_,...b,pointerPosition:n.connectionPosition,startHandle:n.connectionStartHandle,endHandle:n.connectionEndHandle,status:n.connectionStatus}})}const Ja={input:ym,output:_m,default:Wa,group:vm},Ua={straight:Wm,smoothstep:Bm,default:Ya,step:Km},$m=({nodes:t=[],edges:e=[],width:n,height:i,fitView:r})=>{const o=new Map,s=new Map;Fa(t,o,s,{nodeOrigin:[0,0],elevateNodesOnSelect:!1,checkEquality:!1});const l=new Map,a=new Map;Ra(l,a,e);let u={x:0,y:0,zoom:1};if(r&&n&&i){const f=t.filter(d=>d.width&&d.height||d.initialWidth&&d.initialHeight),c=ka(f,{nodeOrigin:[0,0]});u=Ia(c,n,i,.5,2,.1)}return{flowId:re(null),nodes:Gm(t,o,s),nodeLookup:ft(o),parentLookup:ft(s),edgeLookup:ft(a),visibleNodes:ft([]),edges:Zm(e,l,a),visibleEdges:ft([]),connectionLookup:ft(l),height:re(500),width:re(500),minZoom:re(.5),maxZoom:re(2),nodeOrigin:re([0,0]),nodeDragThreshold:re(1),nodeExtent:re($o),translateExtent:re($o),autoPanOnNodeDrag:re(!0),autoPanOnConnect:re(!0),fitViewOnInit:re(!1),fitViewOnInitDone:re(!1),fitViewOptions:re(void 0),panZoom:re(null),snapGrid:re(null),dragging:re(!1),selectionRect:re(null),selectionKeyPressed:re(!1),multiselectionKeyPressed:re(!1),deleteKeyPressed:re(!1),panActivationKeyPressed:re(!1),zoomActivationKeyPressed:re(!1),selectionRectMode:re(null),selectionMode:re(Ji.Partial),nodeTypes:re(Ja),edgeTypes:re(Ua),viewport:re(u),connectionMode:re(Ut.Strict),domNode:re(null),connection:ft(Ka),connectionLineType:re(Mn.Bezier),connectionRadius:re(20),isValidConnection:re(()=>!0),nodesDraggable:re(!0),nodesConnectable:re(!0),elementsSelectable:re(!0),selectNodesOnDrag:re(!0),markers:ft([]),defaultMarkerColor:re(\"#b1b1b7\"),lib:ft(\"svelte\"),onlyRenderVisibleElements:re(!1),onerror:re(Ig),ondelete:re(void 0),onedgecreate:re(void 0),onconnect:re(void 0),onconnectstart:re(void 0),onconnectend:re(void 0),onbeforedelete:re(void 0),nodesInitialized:re(!1),edgesInitialized:re(!1),viewportInitialized:re(!1),initialized:ft(!1)}};function e0(t){const e=Jt([t.edges,t.nodes,t.nodeLookup,t.onlyRenderVisibleElements,t.viewport,t.width,t.height],([n,,i,r,o,s,l])=>r&&s&&l?n.filter(u=>{const f=i.get(u.source),c=i.get(u.target);return f&&c&&Rg({sourceNode:f,targetNode:c,width:s,height:l,transform:[o.x,o.y,o.zoom]})}):n);return Jt([e,t.nodes,t.nodeLookup,t.connectionMode,t.onerror],([n,,i,r,o])=>n.reduce((l,a)=>{const u=i.get(a.source),f=i.get(a.target);if(!u||!f)return l;const c=Wg({id:a.id,sourceNode:u,targetNode:f,sourceHandle:a.sourceHandle||null,targetHandle:a.targetHandle||null,connectionMode:r,onError:o});return c&&l.push({...a,zIndex:Dg({selected:a.selected,zIndex:a.zIndex,sourceNode:u,targetNode:f,elevateOnSelect:!1}),...c}),l},[]))}function t0(t){return Jt([t.nodeLookup,t.onlyRenderVisibleElements,t.width,t.height,t.viewport,t.nodes],([e,n,i,r,o])=>{const s=[o.x,o.y,o.zoom];return n?Sa(e,{x:0,y:0,width:i,height:r},s,!0):Array.from(e.values())})}const yo=Symbol();function n0({nodes:t,edges:e,width:n,height:i,fitView:r}){const o=$m({nodes:t,edges:e,width:n,height:i,fitView:r});function s(P){o.nodeTypes.set({...Ja,...P})}function l(P){o.edgeTypes.set({...Ua,...P})}function a(P){const k=ee(o.edges);o.edges.set(Hg(P,k))}const u=(P,k=!1)=>{var M;const F=ee(o.nodeLookup);for(const[N,H]of P){const K=(M=F.get(N))==null?void 0:M.internals.userNode;K&&(K.position=H.position,K.dragging=k)}o.nodes.update(N=>N)};function f(P){var N,H,K;const k=ee(o.nodeLookup),{changes:F,updatedInternals:M}=Jg(P,k,ee(o.parentLookup),ee(o.domNode),ee(o.nodeOrigin));if(M){if(!ee(o.fitViewOnInitDone)&&ee(o.fitViewOnInit)){const Y=ee(o.fitViewOptions),G=c({...Y,nodes:Y==null?void 0:Y.nodes});o.fitViewOnInitDone.set(G)}for(const Y of F){const G=(N=k.get(Y.id))==null?void 0:N.internals.userNode;if(G)switch(Y.type){case\"dimensions\":{const q={...G.measured,...Y.dimensions};Y.setAttributes&&(G.width=((H=Y.dimensions)==null?void 0:H.width)??G.width,G.height=((K=Y.dimensions)==null?void 0:K.height)??G.height),G.measured=q;break}case\"position\":G.position=Y.position??G.position;break}}o.nodes.update(Y=>Y),ee(o.nodesInitialized)||o.nodesInitialized.set(!0)}}function c(P){const k=ee(o.panZoom);return k?kg({nodeLookup:ee(o.nodeLookup),width:ee(o.width),height:ee(o.height),minZoom:ee(o.minZoom),maxZoom:ee(o.maxZoom),panZoom:k,nodeOrigin:ee(o.nodeOrigin)},P):!1}function d(P,k){const F=ee(o.panZoom);F&&F.scaleBy(P,k)}function h(P){d(1.2,P)}function g(P){d(1/1.2,P)}function y(P){const k=ee(o.panZoom);k&&(k.setScaleExtent([P,ee(o.maxZoom)]),o.minZoom.set(P))}function p(P){const k=ee(o.panZoom);k&&(k.setScaleExtent([ee(o.minZoom),P]),o.maxZoom.set(P))}function m(P){const k=ee(o.panZoom);k&&(k.setTranslateExtent(P),o.translateExtent.set(P))}function w(P){let k=!1;return P.forEach(F=>{F.selected&&(F.selected=!1,k=!0)}),k}function b(P){w((P==null?void 0:P.nodes)||ee(o.nodes))&&o.nodes.set(ee(o.nodes)),w((P==null?void 0:P.edges)||ee(o.edges))&&o.edges.set(ee(o.edges))}o.deleteKeyPressed.subscribe(async P=>{var k;if(P){const F=ee(o.nodes),M=ee(o.edges),N=F.filter(G=>G.selected),H=M.filter(G=>G.selected),{nodes:K,edges:Y}=await Cg({nodesToRemove:N,edgesToRemove:H,nodes:F,edges:M,onBeforeDelete:ee(o.onbeforedelete)});(K.length||Y.length)&&(o.nodes.update(G=>G.filter(q=>!K.some(se=>se.id===q.id))),o.edges.update(G=>G.filter(q=>!Y.some(se=>se.id===q.id))),(k=ee(o.ondelete))==null||k({nodes:K,edges:Y}))}});function _(P){const k=ee(o.multiselectionKeyPressed);o.nodes.update(F=>F.map(M=>{const N=P.includes(M.id),H=k&&M.selected||N;return M.selected=H,M})),k||o.edges.update(F=>F.map(M=>(M.selected=!1,M)))}function I(P){const k=ee(o.multiselectionKeyPressed);o.edges.update(F=>F.map(M=>{const N=P.includes(M.id),H=k&&M.selected||N;return M.selected=H,M})),k||o.nodes.update(F=>F.map(M=>(M.selected=!1,M)))}function v(P){var F;const k=(F=ee(o.nodes))==null?void 0:F.find(M=>M.id===P);if(!k){console.warn(\"012\",li.error012(P));return}o.selectionRect.set(null),o.selectionRectMode.set(null),k.selected?k.selected&&ee(o.multiselectionKeyPressed)&&b({nodes:[k],edges:[]}):_([P])}function S(P){const k=ee(o.viewport);return Ug({delta:P,panZoom:ee(o.panZoom),transform:[k.x,k.y,k.zoom],translateExtent:ee(o.translateExtent),width:ee(o.width),height:ee(o.height)})}const C={connectionStartHandle:null,connectionEndHandle:null,connectionPosition:null,connectionStatus:null},O=re(C),R=P=>{O.set(P)};function D(){R(C)}function W(){o.fitViewOnInitDone.set(!1),o.selectionRect.set(null),o.selectionRectMode.set(null),o.snapGrid.set(null),o.isValidConnection.set(()=>!0),b(),D()}return{...o,connection:xm(o,O),visibleEdges:e0(o),visibleNodes:t0(o),markers:Jt([o.edges,o.defaultMarkerColor,o.flowId],([P,k,F])=>Xg(P,{defaultColor:k,id:F})),initialized:(()=>{let P=!1;const k=ee(o.nodes).length,F=ee(o.edges).length;return Jt([o.nodesInitialized,o.edgesInitialized,o.viewportInitialized],([M,N,H])=>P||(k===0?P=H:F===0?P=H&&M:P=H&&M&&N,P))})(),syncNodeStores:P=>Jm(o.nodes,P),syncEdgeStores:P=>Um(o.edges,P),syncViewport:P=>jm(o.panZoom,o.viewport,P),setNodeTypes:s,setEdgeTypes:l,addEdge:a,updateNodePositions:u,updateNodeInternals:f,zoomIn:h,zoomOut:g,fitView:P=>c(P),setMinZoom:y,setMaxZoom:p,setTranslateExtent:m,unselectNodesAndEdges:b,addSelectedNodes:_,addSelectedEdges:I,handleNodeSelection:v,panBy:S,updateConnection:R,cancelConnection:D,reset:W}}function Ke(){const t=Hi(yo);if(!t)throw new Error(\"In order to use useStore you need to wrap your component in a <SvelteFlowProvider />\");return t.getStore()}function i0({nodes:t,edges:e,width:n,height:i,fitView:r}){const o=n0({nodes:t,edges:e,width:n,height:i,fitView:r});return Li(yo,{getStore:()=>o}),o}function r0(t,e){const{panZoom:n,minZoom:i,maxZoom:r,initialViewport:o,viewport:s,dragging:l,translateExtent:a}=e,u=um({domNode:t,minZoom:i,maxZoom:r,translateExtent:a,viewport:o,onTransformChange:c=>s.set({x:c[0],y:c[1],zoom:c[2]}),onDraggingChange:l.set}),f=u.getViewport();return s.set(f),n.set(u),u.update(e),{update(c){u.update(c)}}}function o0(t){let e,n,i,r,o;const s=t[33].default,l=ot(s,t,t[32],null);return{c(){e=Z(\"div\"),l&&l.c(),E(e,\"class\",\"svelte-flow__zoom svelte-4xkw84\")},m(a,u){V(a,e,u),l&&l.m(e,null),i=!0,r||(o=Ue(n=r0.call(null,e,{viewport:t[17],minZoom:t[11],maxZoom:t[12],initialViewport:t[10],dragging:t[22],panZoom:t[18],onPanZoomStart:t[0],onPanZoom:t[1],onPanZoomEnd:t[2],zoomOnScroll:t[5],zoomOnDoubleClick:t[6],zoomOnPinch:t[7],panOnScroll:t[8],panOnDrag:t[9],panOnScrollSpeed:.5,panOnScrollMode:t[3]||Ct.Free,zoomActivationKeyPressed:t[13],preventScrolling:typeof t[4]==\"boolean\"?t[4]:!0,noPanClassName:\"nopan\",noWheelClassName:\"nowheel\",userSelectionActive:t[14],translateExtent:t[15],lib:t[16]})),r=!0)},p(a,u){l&&l.p&&(!i||u[1]&2)&&lt(l,s,a,a[32],i?st(s,a[32],u,null):at(a[32]),null),n&&Re(n.update)&&u[0]&131071&&n.update.call(null,{viewport:a[17],minZoom:a[11],maxZoom:a[12],initialViewport:a[10],dragging:a[22],panZoom:a[18],onPanZoomStart:a[0],onPanZoom:a[1],onPanZoomEnd:a[2],zoomOnScroll:a[5],zoomOnDoubleClick:a[6],zoomOnPinch:a[7],panOnScroll:a[8],panOnDrag:a[9],panOnScrollSpeed:.5,panOnScrollMode:a[3]||Ct.Free,zoomActivationKeyPressed:a[13],preventScrolling:typeof a[4]==\"boolean\"?a[4]:!0,noPanClassName:\"nopan\",noWheelClassName:\"nowheel\",userSelectionActive:a[14],translateExtent:a[15],lib:a[16]})},i(a){i||(A(l,a),i=!0)},o(a){z(l,a),i=!1},d(a){a&&B(e),l&&l.d(a),r=!1,o()}}}function s0(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,{$$slots:g={},$$scope:y}=e,{initialViewport:p=void 0}=e,{onMoveStart:m=void 0}=e,{onMove:w=void 0}=e,{onMoveEnd:b=void 0}=e,{panOnScrollMode:_}=e,{preventScrolling:I}=e,{zoomOnScroll:v}=e,{zoomOnDoubleClick:S}=e,{zoomOnPinch:C}=e,{panOnDrag:O}=e,{panOnScroll:R}=e;const{viewport:D,panZoom:W,selectionKeyPressed:P,minZoom:k,maxZoom:F,dragging:M,translateExtent:N,lib:H,panActivationKeyPressed:K,zoomActivationKeyPressed:Y,viewportInitialized:G}=Ke();return j(t,P,q=>n(14,c=q)),j(t,k,q=>n(11,a=q)),j(t,F,q=>n(12,u=q)),j(t,N,q=>n(15,d=q)),j(t,H,q=>n(16,h=q)),j(t,K,q=>n(31,l=q)),j(t,Y,q=>n(13,f=q)),j(t,G,q=>n(34,s=q)),Rn(()=>{zi(G,s=!0,s)}),t.$$set=q=>{\"initialViewport\"in q&&n(28,p=q.initialViewport),\"onMoveStart\"in q&&n(0,m=q.onMoveStart),\"onMove\"in q&&n(1,w=q.onMove),\"onMoveEnd\"in q&&n(2,b=q.onMoveEnd),\"panOnScrollMode\"in q&&n(3,_=q.panOnScrollMode),\"preventScrolling\"in q&&n(4,I=q.preventScrolling),\"zoomOnScroll\"in q&&n(5,v=q.zoomOnScroll),\"zoomOnDoubleClick\"in q&&n(6,S=q.zoomOnDoubleClick),\"zoomOnPinch\"in q&&n(7,C=q.zoomOnPinch),\"panOnDrag\"in q&&n(29,O=q.panOnDrag),\"panOnScroll\"in q&&n(30,R=q.panOnScroll),\"$$scope\"in q&&n(32,y=q.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&268435456&&n(10,i=p||{x:0,y:0,zoom:1}),t.$$.dirty[0]&536870912|t.$$.dirty[1]&1&&n(9,r=l||O),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(8,o=l||R)},[m,w,b,_,I,v,S,C,o,r,i,a,u,f,c,d,h,D,W,P,k,F,M,N,H,K,Y,G,p,O,R,l,y,g]}class l0 extends ue{constructor(e){super(),ae(this,e,s0,o0,ce,{initialViewport:28,onMoveStart:0,onMove:1,onMoveEnd:2,panOnScrollMode:3,preventScrolling:4,zoomOnScroll:5,zoomOnDoubleClick:6,zoomOnPinch:7,panOnDrag:29,panOnScroll:30},null,[-1,-1])}}function a0(t){let e,n,i,r;const o=t[29].default,s=ot(o,t,t[28],null);return{c(){e=Z(\"div\"),s&&s.c(),E(e,\"class\",\"svelte-flow__pane svelte-1esy7hx\"),ge(e,\"draggable\",t[0]),ge(e,\"dragging\",t[4]),ge(e,\"selection\",t[1])},m(l,a){V(l,e,a),s&&s.m(e,null),t[30](e),n=!0,i||(r=[de(e,\"click\",function(){Re(t[3]?void 0:wi(t[15],t[2]))&&(t[3]?void 0:wi(t[15],t[2])).apply(this,arguments)}),de(e,\"mousedown\",function(){Re(t[3]?t[16]:void 0)&&(t[3]?t[16]:void 0).apply(this,arguments)}),de(e,\"mousemove\",function(){Re(t[3]?t[17]:void 0)&&(t[3]?t[17]:void 0).apply(this,arguments)}),de(e,\"mouseup\",function(){Re(t[3]?t[18]:void 0)&&(t[3]?t[18]:void 0).apply(this,arguments)}),de(e,\"mouseleave\",function(){Re(t[3]?t[19]:void 0)&&(t[3]?t[19]:void 0).apply(this,arguments)}),de(e,\"contextmenu\",function(){Re(wi(t[20],t[2]))&&wi(t[20],t[2]).apply(this,arguments)})],i=!0)},p(l,a){t=l,s&&s.p&&(!n||a[0]&268435456)&&lt(s,o,t,t[28],n?st(o,t[28],a,null):at(t[28]),null),(!n||a[0]&1)&&ge(e,\"draggable\",t[0]),(!n||a[0]&16)&&ge(e,\"dragging\",t[4]),(!n||a[0]&2)&&ge(e,\"selection\",t[1])},i(l){n||(A(s,l),n=!0)},o(l){z(s,l),n=!1},d(l){l&&B(e),s&&s.d(l),t[30](null),i=!1,qe(r)}}}function wi(t,e){return n=>{n.target===e&&(t==null||t(n))}}function ys(t){return e=>{const n=t.includes(e.id);return e.selected!==n&&(e.selected=n),e}}function u0(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,{$$slots:p={},$$scope:m}=e,{panOnDrag:w=void 0}=e,{selectionOnDrag:b=void 0}=e;const _=an(),{nodes:I,nodeLookup:v,edges:S,viewport:C,dragging:O,elementsSelectable:R,selectionRect:D,selectionRectMode:W,selectionKeyPressed:P,selectionMode:k,panActivationKeyPressed:F,unselectNodesAndEdges:M}=Ke();j(t,v,L=>n(36,f=L)),j(t,S,L=>n(33,l=L)),j(t,C,L=>n(35,u=L)),j(t,O,L=>n(4,y=L)),j(t,R,L=>n(25,d=L)),j(t,D,L=>n(24,c=L)),j(t,W,L=>n(23,s=L)),j(t,P,L=>n(26,h=L)),j(t,k,L=>n(34,a=L)),j(t,F,L=>n(27,g=L));let N,H=null,K=[];function Y(L){_(\"paneclick\",{event:L}),M(),W.set(null)}function G(L){if(H=N.getBoundingClientRect(),!R||!r||L.button!==0||L.target!==N||!H)return;const{x:ve,y:Te}=zt(L,H);M(),D.set({width:0,height:0,startX:ve,startY:Te,x:ve,y:Te})}function q(L){if(!r||!H||!c)return;const ve=zt(L,H),Te=c.startX??0,Ee=c.startY??0,Fe={...c,x:ve.x<Te?ve.x:Te,y:ve.y<Ee?ve.y:Ee,width:Math.abs(ve.x-Te),height:Math.abs(ve.y-Ee)},De=K.map(Me=>Me.id),We=Ur(K,l).map(Me=>Me.id);K=Sa(f,Fe,[u.x,u.y,u.zoom],a===Ji.Partial,!0);const U=Ur(K,l).map(Me=>Me.id),Xe=K.map(Me=>Me.id);(De.length!==Xe.length||Xe.some(Me=>!De.includes(Me)))&&I.update(Me=>Me.map(ys(Xe))),(We.length!==U.length||U.some(Me=>!We.includes(Me)))&&S.update(Me=>Me.map(ys(U))),W.set(\"user\"),D.set(Fe)}function se(L){L.button===0&&(!r&&s===\"user\"&&L.target===N&&(Y==null||Y(L)),D.set(null),K.length>0&&zi(W,s=\"nodes\",s))}const oe=()=>{s===\"user\"&&W.set(K.length>0?\"nodes\":null),D.set(null)},pe=L=>{if(Array.isArray(i)&&(i!=null&&i.includes(2))){L.preventDefault();return}_(\"panecontextmenu\",{event:L})};function Se(L){It[L?\"unshift\":\"push\"](()=>{N=L,n(2,N)})}return t.$$set=L=>{\"panOnDrag\"in L&&n(0,w=L.panOnDrag),\"selectionOnDrag\"in L&&n(21,b=L.selectionOnDrag),\"$$scope\"in L&&n(28,m=L.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&134217729&&n(22,i=g||w),t.$$.dirty[0]&90177536&&n(1,r=h||c||b&&i!==!0),t.$$.dirty[0]&41943042&&n(3,o=d&&(r||s===\"user\"))},[w,r,N,o,y,v,S,C,O,R,D,W,P,k,F,Y,G,q,se,oe,pe,b,i,s,c,d,h,g,m,p,Se]}class f0 extends ue{constructor(e){super(),ae(this,e,u0,a0,ce,{panOnDrag:0,selectionOnDrag:21},null,[-1,-1])}}function c0(t){let e,n;const i=t[3].default,r=ot(i,t,t[2],null);return{c(){e=Z(\"div\"),r&&r.c(),E(e,\"class\",\"svelte-flow__viewport xyflow__viewport svelte-1floaup\"),fe(e,\"transform\",\"translate(\"+t[0].x+\"px, \"+t[0].y+\"px) scale(\"+t[0].zoom+\")\")},m(o,s){V(o,e,s),r&&r.m(e,null),n=!0},p(o,[s]){r&&r.p&&(!n||s&4)&&lt(r,i,o,o[2],n?st(i,o[2],s,null):at(o[2]),null),(!n||s&1)&&fe(e,\"transform\",\"translate(\"+o[0].x+\"px, \"+o[0].y+\"px) scale(\"+o[0].zoom+\")\")},i(o){n||(A(r,o),n=!0)},o(o){z(r,o),n=!1},d(o){o&&B(e),r&&r.d(o)}}}function d0(t,e,n){let i,{$$slots:r={},$$scope:o}=e;const{viewport:s}=Ke();return j(t,s,l=>n(0,i=l)),t.$$set=l=>{\"$$scope\"in l&&n(2,o=l.$$scope)},[i,s,o,r]}class h0 extends ue{constructor(e){super(),ae(this,e,d0,c0,ce,{})}}function ja(t,e){const{store:n,onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s}=e,l=Gg({onDrag:i,onDragStart:r,onDragStop:o,onNodeMouseDown:s,getStoreItems:()=>{const u=ee(n.snapGrid),f=ee(n.viewport);return{nodes:ee(n.nodes),nodeLookup:ee(n.nodeLookup),edges:ee(n.edges),nodeExtent:ee(n.nodeExtent),snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:[0,0],multiSelectionActive:ee(n.multiselectionKeyPressed),domNode:ee(n.domNode),transform:[f.x,f.y,f.zoom],autoPanOnNodeDrag:ee(n.autoPanOnNodeDrag),nodesDraggable:ee(n.nodesDraggable),selectNodesOnDrag:ee(n.selectNodesOnDrag),nodeDragThreshold:ee(n.nodeDragThreshold),unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,panBy:n.panBy}}});function a(u,f){if(f.disabled){l.destroy();return}l.update({domNode:u,noDragClassName:f.noDragClass,handleSelector:f.handleSelector,nodeId:f.nodeId,isSelectable:f.isSelectable})}return a(t,e),{update(u){a(t,u)},destroy(){l.destroy()}}}function g0({width:t,height:e,initialWidth:n,initialHeight:i,measuredWidth:r,measuredHeight:o}){if(r===void 0&&o===void 0){const s=t??n,l=e??i;return{width:s?`width:${s}px;`:\"\",height:l?`height:${l}px;`:\"\"}}return{width:t?`width:${t}px;`:\"\",height:e?`height:${e}px;`:\"\"}}function ps(t){let e,n,i,r,o,s=`translate(${t[14]}px, ${t[15]}px)`,l,a,u;var f=t[28];function c(d,h){return{props:{data:d[2],id:d[1],selected:d[3],selectable:d[5],deletable:d[7],sourcePosition:d[16],targetPosition:d[17],zIndex:d[18],dragging:d[9],draggable:d[4],dragHandle:d[21],parentId:d[23],type:d[26],isConnectable:d[29],positionAbsoluteX:d[12],positionAbsoluteY:d[13],width:d[19],height:d[20]}}}return f&&(n=Kt(f,c(t))),{c(){e=Z(\"div\"),n&&te(n.$$.fragment),E(e,\"data-id\",t[1]),E(e,\"class\",i=Ae([\"svelte-flow__node\",`svelte-flow__node-${t[26]}`,t[24]])),E(e,\"style\",r=(t[10]??\"\")+\";\"+t[27].width+t[27].height),ge(e,\"dragging\",t[9]),ge(e,\"selected\",t[3]),ge(e,\"draggable\",t[4]),ge(e,\"connectable\",t[6]),ge(e,\"selectable\",t[5]),ge(e,\"nopan\",t[4]),ge(e,\"parent\",t[11]),fe(e,\"z-index\",t[18]),fe(e,\"transform\",s),fe(e,\"visibility\",t[22]?\"visible\":\"hidden\")},m(d,h){V(d,e,h),n&&x(n,e,null),t[51](e),l=!0,a||(u=[Ue(o=ja.call(null,e,{nodeId:t[1],isSelectable:t[5],disabled:!1,handleSelector:t[21],noDragClass:\"nodrag\",onNodeMouseDown:t[32],onDrag:t[48],onDragStart:t[49],onDragStop:t[50],store:t[30]})),de(e,\"click\",t[35]),de(e,\"mouseenter\",t[52]),de(e,\"mouseleave\",t[53]),de(e,\"mousemove\",t[54]),de(e,\"contextmenu\",t[55])],a=!0)},p(d,h){if(h[0]&268435456&&f!==(f=d[28])){if(n){Oe();const y=n;z(y.$$.fragment,1,0,()=>{$(y,1)}),Ie()}f?(n=Kt(f,c(d)),te(n.$$.fragment),A(n.$$.fragment,1),x(n,e,null)):n=null}else if(f){const y={};h[0]&4&&(y.data=d[2]),h[0]&2&&(y.id=d[1]),h[0]&8&&(y.selected=d[3]),h[0]&32&&(y.selectable=d[5]),h[0]&128&&(y.deletable=d[7]),h[0]&65536&&(y.sourcePosition=d[16]),h[0]&131072&&(y.targetPosition=d[17]),h[0]&262144&&(y.zIndex=d[18]),h[0]&512&&(y.dragging=d[9]),h[0]&16&&(y.draggable=d[4]),h[0]&2097152&&(y.dragHandle=d[21]),h[0]&8388608&&(y.parentId=d[23]),h[0]&67108864&&(y.type=d[26]),h[0]&536870912&&(y.isConnectable=d[29]),h[0]&4096&&(y.positionAbsoluteX=d[12]),h[0]&8192&&(y.positionAbsoluteY=d[13]),h[0]&524288&&(y.width=d[19]),h[0]&1048576&&(y.height=d[20]),n.$set(y)}(!l||h[0]&2)&&E(e,\"data-id\",d[1]),(!l||h[0]&83886080&&i!==(i=Ae([\"svelte-flow__node\",`svelte-flow__node-${d[26]}`,d[24]])))&&E(e,\"class\",i),(!l||h[0]&134218752&&r!==(r=(d[10]??\"\")+\";\"+d[27].width+d[27].height))&&E(e,\"style\",r),o&&Re(o.update)&&h[0]&2097186&&o.update.call(null,{nodeId:d[1],isSelectable:d[5],disabled:!1,handleSelector:d[21],noDragClass:\"nodrag\",onNodeMouseDown:d[32],onDrag:d[48],onDragStart:d[49],onDragStop:d[50],store:d[30]}),(!l||h[0]&83886592)&&ge(e,\"dragging\",d[9]),(!l||h[0]&83886088)&&ge(e,\"selected\",d[3]),(!l||h[0]&83886096)&&ge(e,\"draggable\",d[4]),(!l||h[0]&83886144)&&ge(e,\"connectable\",d[6]),(!l||h[0]&83886112)&&ge(e,\"selectable\",d[5]),(!l||h[0]&83886096)&&ge(e,\"nopan\",d[4]),(!l||h[0]&83888128)&&ge(e,\"parent\",d[11]);const g=h[0]&134218752;(h[0]&134480896||g)&&fe(e,\"z-index\",d[18]),(h[0]&134267904&&s!==(s=`translate(${d[14]}px, ${d[15]}px)`)||g)&&fe(e,\"transform\",s),(h[0]&138413056||g)&&fe(e,\"visibility\",d[22]?\"visible\":\"hidden\")},i(d){l||(n&&A(n.$$.fragment,d),l=!0)},o(d){n&&z(n.$$.fragment,d),l=!1},d(d){d&&B(e),n&&$(n),t[51](null),a=!1,qe(u)}}}function m0(t){let e,n,i=!t[8]&&ps(t);return{c(){i&&i.c(),e=Ve()},m(r,o){i&&i.m(r,o),V(r,e,o),n=!0},p(r,o){r[8]?i&&(Oe(),z(i,1,1,()=>{i=null}),Ie()):i?(i.p(r,o),o[0]&256&&A(i,1)):(i=ps(r),i.c(),A(i,1),i.m(e.parentNode,e))},i(r){n||(A(i),n=!0)},o(r){z(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function y0(t,e,n){let i,r,o,s,l,a,{node:u}=e,{id:f}=e,{data:c={}}=e,{selected:d=!1}=e,{draggable:h=void 0}=e,{selectable:g=void 0}=e,{connectable:y=!0}=e,{deletable:p=!0}=e,{hidden:m=!1}=e,{dragging:w=!1}=e,{resizeObserver:b=null}=e,{style:_=void 0}=e,{type:I=\"default\"}=e,{isParent:v=!1}=e,{positionX:S}=e,{positionY:C}=e,{positionOriginX:O}=e,{positionOriginY:R}=e,{sourcePosition:D=void 0}=e,{targetPosition:W=void 0}=e,{zIndex:P}=e,{measuredWidth:k=void 0}=e,{measuredHeight:F=void 0}=e,{initialWidth:M=void 0}=e,{initialHeight:N=void 0}=e,{width:H=void 0}=e,{height:K=void 0}=e,{dragHandle:Y=void 0}=e,{initialized:G=!1}=e,{parentId:q=void 0}=e,{class:se=\"\"}=e;const oe=Ke(),{nodeTypes:pe,nodeDragThreshold:Se,selectNodesOnDrag:L,handleNodeSelection:ve,updateNodeInternals:Te}=oe;j(t,pe,J=>n(47,l=J));let Ee,Fe=null;const De=an(),We=re(y);j(t,We,J=>n(29,a=J));let U,Xe,Me;Li(\"svelteflow__node_id\",f),Li(\"svelteflow__node_connectable\",We),or(()=>{Fe&&(b==null||b.unobserve(Fe))});function At(J){g&&(!ee(L)||!h||ee(Se)>0)&&ve(f),De(\"nodeclick\",{node:u.internals.userNode,event:J})}const Pt=(J,pt,Q,xe)=>{De(\"nodedrag\",{event:J,targetNode:Q,nodes:xe})},Nt=(J,pt,Q,xe)=>{De(\"nodedragstart\",{event:J,targetNode:Q,nodes:xe})},je=(J,pt,Q,xe)=>{De(\"nodedragstop\",{event:J,targetNode:Q,nodes:xe})};function kt(J){It[J?\"unshift\":\"push\"](()=>{Ee=J,n(25,Ee)})}const ie=J=>De(\"nodemouseenter\",{node:u,event:J}),Bt=J=>De(\"nodemouseleave\",{node:u,event:J}),Vt=J=>De(\"nodemousemove\",{node:u,event:J}),Zt=J=>De(\"nodecontextmenu\",{node:u,event:J});return t.$$set=J=>{\"node\"in J&&n(0,u=J.node),\"id\"in J&&n(1,f=J.id),\"data\"in J&&n(2,c=J.data),\"selected\"in J&&n(3,d=J.selected),\"draggable\"in J&&n(4,h=J.draggable),\"selectable\"in J&&n(5,g=J.selectable),\"connectable\"in J&&n(6,y=J.connectable),\"deletable\"in J&&n(7,p=J.deletable),\"hidden\"in J&&n(8,m=J.hidden),\"dragging\"in J&&n(9,w=J.dragging),\"resizeObserver\"in J&&n(36,b=J.resizeObserver),\"style\"in J&&n(10,_=J.style),\"type\"in J&&n(37,I=J.type),\"isParent\"in J&&n(11,v=J.isParent),\"positionX\"in J&&n(12,S=J.positionX),\"positionY\"in J&&n(13,C=J.positionY),\"positionOriginX\"in J&&n(14,O=J.positionOriginX),\"positionOriginY\"in J&&n(15,R=J.positionOriginY),\"sourcePosition\"in J&&n(16,D=J.sourcePosition),\"targetPosition\"in J&&n(17,W=J.targetPosition),\"zIndex\"in J&&n(18,P=J.zIndex),\"measuredWidth\"in J&&n(38,k=J.measuredWidth),\"measuredHeight\"in J&&n(39,F=J.measuredHeight),\"initialWidth\"in J&&n(40,M=J.initialWidth),\"initialHeight\"in J&&n(41,N=J.initialHeight),\"width\"in J&&n(19,H=J.width),\"height\"in J&&n(20,K=J.height),\"dragHandle\"in J&&n(21,Y=J.dragHandle),\"initialized\"in J&&n(22,G=J.initialized),\"parentId\"in J&&n(23,q=J.parentId),\"class\"in J&&n(24,se=J.class)},t.$$.update=()=>{t.$$.dirty[1]&64&&n(26,i=I||\"default\"),t.$$.dirty[0]&67108864|t.$$.dirty[1]&65536&&n(46,r=!!l[i]),t.$$.dirty[0]&67108864|t.$$.dirty[1]&65536&&n(28,o=l[i]||Wa),t.$$.dirty[1]&32832&&(r||console.warn(\"003\",li.error003(I))),t.$$.dirty[0]&1572864|t.$$.dirty[1]&1920&&n(27,s=g0({width:H,height:K,initialWidth:M,initialHeight:N,measuredWidth:k,measuredHeight:F})),t.$$.dirty[0]&64&&We.set(!!y),t.$$.dirty[0]&100859906|t.$$.dirty[1]&28672&&((U&&i!==U||Xe&&D!==Xe||Me&&W!==Me)&&requestAnimationFrame(()=>Te(new Map([[f,{id:f,nodeElement:Ee,force:!0}]]))),n(43,U=i),n(44,Xe=D),n(45,Me=W)),t.$$.dirty[0]&37748736|t.$$.dirty[1]&2080&&b&&(Ee!==Fe||!G)&&(Fe&&b.unobserve(Fe),Ee&&b.observe(Ee),n(42,Fe=Ee))},[u,f,c,d,h,g,y,p,m,w,_,v,S,C,O,R,D,W,P,H,K,Y,G,q,se,Ee,i,s,o,a,oe,pe,ve,De,We,At,b,I,k,F,M,N,Fe,U,Xe,Me,r,l,Pt,Nt,je,kt,ie,Bt,Vt,Zt]}class p0 extends ue{constructor(e){super(),ae(this,e,y0,m0,Bl,{node:0,id:1,data:2,selected:3,draggable:4,selectable:5,connectable:6,deletable:7,hidden:8,dragging:9,resizeObserver:36,style:10,type:37,isParent:11,positionX:12,positionY:13,positionOriginX:14,positionOriginY:15,sourcePosition:16,targetPosition:17,zIndex:18,measuredWidth:38,measuredHeight:39,initialWidth:40,initialHeight:41,width:19,height:20,dragHandle:21,initialized:22,parentId:23,class:24},null,[-1,-1])}}const{Map:b0}=ql;function bs(t,e,n){const i=t.slice();i[20]=e[n];const r=ai(i[20]);i[21]=r;const o=Tg({x:i[20].internals.positionAbsolute.x,y:i[20].internals.positionAbsolute.y,...i[21],origin:i[20].origin});return i[22]=o,i}function _s(t,e){let n,i,r;return i=new p0({props:{node:e[20],id:e[20].id,data:e[20].data,selected:!!e[20].selected,hidden:!!e[20].hidden,draggable:!!(e[20].draggable||e[1]&&typeof e[20].draggable>\"u\"),selectable:!!(e[20].selectable||e[2]&&typeof e[20].selectable>\"u\"),connectable:!!(e[20].connectable||e[3]&&typeof e[20].connectable>\"u\"),deletable:e[20].deletable??!0,positionX:e[20].internals.positionAbsolute.x,positionY:e[20].internals.positionAbsolute.y,positionOriginX:e[22].x??0,positionOriginY:e[22].y??0,isParent:e[4].has(e[20].id),style:e[20].style,class:e[20].class,type:e[20].type??\"default\",sourcePosition:e[20].sourcePosition,targetPosition:e[20].targetPosition,dragging:e[20].dragging,zIndex:e[20].internals.z??0,dragHandle:e[20].dragHandle,initialized:Zi(e[20]),width:e[20].width,height:e[20].height,initialWidth:e[20].initialWidth,initialHeight:e[20].initialHeight,measuredWidth:e[20].measured.width,measuredHeight:e[20].measured.height,parentId:e[20].parentId,resizeObserver:e[10]}}),i.$on(\"nodeclick\",e[11]),i.$on(\"nodemouseenter\",e[12]),i.$on(\"nodemousemove\",e[13]),i.$on(\"nodemouseleave\",e[14]),i.$on(\"nodedrag\",e[15]),i.$on(\"nodedragstart\",e[16]),i.$on(\"nodedragstop\",e[17]),i.$on(\"nodecontextmenu\",e[18]),{key:t,first:null,c(){n=Ve(),te(i.$$.fragment),this.first=n},m(o,s){V(o,n,s),x(i,o,s),r=!0},p(o,s){e=o;const l={};s&1&&(l.node=e[20]),s&1&&(l.id=e[20].id),s&1&&(l.data=e[20].data),s&1&&(l.selected=!!e[20].selected),s&1&&(l.hidden=!!e[20].hidden),s&3&&(l.draggable=!!(e[20].draggable||e[1]&&typeof e[20].draggable>\"u\")),s&5&&(l.selectable=!!(e[20].selectable||e[2]&&typeof e[20].selectable>\"u\")),s&9&&(l.connectable=!!(e[20].connectable||e[3]&&typeof e[20].connectable>\"u\")),s&1&&(l.deletable=e[20].deletable??!0),s&1&&(l.positionX=e[20].internals.positionAbsolute.x),s&1&&(l.positionY=e[20].internals.positionAbsolute.y),s&1&&(l.positionOriginX=e[22].x??0),s&1&&(l.positionOriginY=e[22].y??0),s&17&&(l.isParent=e[4].has(e[20].id)),s&1&&(l.style=e[20].style),s&1&&(l.class=e[20].class),s&1&&(l.type=e[20].type??\"default\"),s&1&&(l.sourcePosition=e[20].sourcePosition),s&1&&(l.targetPosition=e[20].targetPosition),s&1&&(l.dragging=e[20].dragging),s&1&&(l.zIndex=e[20].internals.z??0),s&1&&(l.dragHandle=e[20].dragHandle),s&1&&(l.initialized=Zi(e[20])),s&1&&(l.width=e[20].width),s&1&&(l.height=e[20].height),s&1&&(l.initialWidth=e[20].initialWidth),s&1&&(l.initialHeight=e[20].initialHeight),s&1&&(l.measuredWidth=e[20].measured.width),s&1&&(l.measuredHeight=e[20].measured.height),s&1&&(l.parentId=e[20].parentId),i.$set(l)},i(o){r||(A(i.$$.fragment,o),r=!0)},o(o){z(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(i,o)}}}function _0(t){let e,n=[],i=new b0,r,o=Pe(t[0]);const s=l=>l[20].id;for(let l=0;l<o.length;l+=1){let a=bs(t,o,l),u=s(a);i.set(u,n[l]=_s(u,a))}return{c(){e=Z(\"div\");for(let l=0;l<n.length;l+=1)n[l].c();E(e,\"class\",\"svelte-flow__nodes svelte-tf4uy4\")},m(l,a){V(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[a]){a&1055&&(o=Pe(l[0]),Oe(),n=lr(n,a,s,1,l,o,i,e,sr,_s,null,bs),Ie())},i(l){if(!r){for(let a=0;a<o.length;a+=1)A(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)z(n[a]);r=!1},d(l){l&&B(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function w0(t,e,n){let i,r,o,s,l;const{visibleNodes:a,nodesDraggable:u,nodesConnectable:f,elementsSelectable:c,updateNodeInternals:d,parentLookup:h}=Ke();j(t,a,S=>n(0,i=S)),j(t,u,S=>n(1,r=S)),j(t,f,S=>n(3,s=S)),j(t,c,S=>n(2,o=S)),j(t,h,S=>n(4,l=S));const g=typeof ResizeObserver>\"u\"?null:new ResizeObserver(S=>{const C=new Map;S.forEach(O=>{const R=O.target.getAttribute(\"data-id\");C.set(R,{id:R,nodeElement:O.target,force:!0})}),d(C)});or(()=>{g==null||g.disconnect()});function y(S){_e.call(this,t,S)}function p(S){_e.call(this,t,S)}function m(S){_e.call(this,t,S)}function w(S){_e.call(this,t,S)}function b(S){_e.call(this,t,S)}function _(S){_e.call(this,t,S)}function I(S){_e.call(this,t,S)}function v(S){_e.call(this,t,S)}return[i,r,o,s,l,a,u,f,c,h,g,y,p,m,w,b,_,I,v]}class v0 extends ue{constructor(e){super(),ae(this,e,w0,_0,ce,{})}}function ws(t){let e,n,i,r,o,s,l,a;var u=t[27];function f(c,d){return{props:{id:c[0],source:c[1],target:c[2],sourceX:c[14],sourceY:c[15],targetX:c[16],targetY:c[17],sourcePosition:c[18],targetPosition:c[19],animated:c[6],selected:c[7],label:c[10],labelStyle:c[11],data:c[3],style:c[4],interactionWidth:c[21],selectable:c[24],deletable:c[8]??!0,type:c[23],sourceHandleId:c[12],targetHandleId:c[13],markerStart:c[26],markerEnd:c[25]}}}return u&&(i=Kt(u,f(t))),{c(){e=Ce(\"svg\"),n=Ce(\"g\"),i&&te(i.$$.fragment),E(n,\"class\",r=Ae([\"svelte-flow__edge\",t[22]])),E(n,\"data-id\",t[0]),E(n,\"aria-label\",o=t[20]===null?void 0:t[20]?t[20]:`Edge from ${t[1]} to ${t[2]}`),E(n,\"role\",\"img\"),ge(n,\"animated\",t[6]),ge(n,\"selected\",t[7]),ge(n,\"selectable\",t[24]),fe(e,\"z-index\",t[5])},m(c,d){V(c,e,d),X(e,n),i&&x(i,n,null),s=!0,l||(a=[de(n,\"click\",t[32]),de(n,\"contextmenu\",t[41]),de(n,\"mouseenter\",t[42]),de(n,\"mouseleave\",t[43])],l=!0)},p(c,d){if(d[0]&134217728&&u!==(u=c[27])){if(i){Oe();const h=i;z(h.$$.fragment,1,0,()=>{$(h,1)}),Ie()}u?(i=Kt(u,f(c)),te(i.$$.fragment),A(i.$$.fragment,1),x(i,n,null)):i=null}else if(u){const h={};d[0]&1&&(h.id=c[0]),d[0]&2&&(h.source=c[1]),d[0]&4&&(h.target=c[2]),d[0]&16384&&(h.sourceX=c[14]),d[0]&32768&&(h.sourceY=c[15]),d[0]&65536&&(h.targetX=c[16]),d[0]&131072&&(h.targetY=c[17]),d[0]&262144&&(h.sourcePosition=c[18]),d[0]&524288&&(h.targetPosition=c[19]),d[0]&64&&(h.animated=c[6]),d[0]&128&&(h.selected=c[7]),d[0]&1024&&(h.label=c[10]),d[0]&2048&&(h.labelStyle=c[11]),d[0]&8&&(h.data=c[3]),d[0]&16&&(h.style=c[4]),d[0]&2097152&&(h.interactionWidth=c[21]),d[0]&16777216&&(h.selectable=c[24]),d[0]&256&&(h.deletable=c[8]??!0),d[0]&8388608&&(h.type=c[23]),d[0]&4096&&(h.sourceHandleId=c[12]),d[0]&8192&&(h.targetHandleId=c[13]),d[0]&67108864&&(h.markerStart=c[26]),d[0]&33554432&&(h.markerEnd=c[25]),i.$set(h)}(!s||d[0]&4194304&&r!==(r=Ae([\"svelte-flow__edge\",c[22]])))&&E(n,\"class\",r),(!s||d[0]&1)&&E(n,\"data-id\",c[0]),(!s||d[0]&1048582&&o!==(o=c[20]===null?void 0:c[20]?c[20]:`Edge from ${c[1]} to ${c[2]}`))&&E(n,\"aria-label\",o),(!s||d[0]&4194368)&&ge(n,\"animated\",c[6]),(!s||d[0]&4194432)&&ge(n,\"selected\",c[7]),(!s||d[0]&20971520)&&ge(n,\"selectable\",c[24]),d[0]&32&&fe(e,\"z-index\",c[5])},i(c){s||(i&&A(i.$$.fragment,c),s=!0)},o(c){i&&z(i.$$.fragment,c),s=!1},d(c){c&&B(e),i&&$(i),l=!1,qe(a)}}}function k0(t){let e,n,i=!t[9]&&ws(t);return{c(){i&&i.c(),e=Ve()},m(r,o){i&&i.m(r,o),V(r,e,o),n=!0},p(r,o){r[9]?i&&(Oe(),z(i,1,1,()=>{i=null}),Ie()):i?(i.p(r,o),o[0]&512&&A(i,1)):(i=ws(r),i.c(),A(i,1),i.m(e.parentNode,e))},i(r){n||(A(i),n=!0)},o(r){z(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function S0(t,e,n){let i,r,o,s,l,a,u,f,c,{id:d}=e,{type:h=\"default\"}=e,{source:g=\"\"}=e,{target:y=\"\"}=e,{data:p={}}=e,{style:m=void 0}=e,{zIndex:w=void 0}=e,{animated:b=!1}=e,{selected:_=!1}=e,{selectable:I=void 0}=e,{deletable:v=void 0}=e,{hidden:S=!1}=e,{label:C=void 0}=e,{labelStyle:O=void 0}=e,{markerStart:R=void 0}=e,{markerEnd:D=void 0}=e,{sourceHandle:W=void 0}=e,{targetHandle:P=void 0}=e,{sourceX:k}=e,{sourceY:F}=e,{targetX:M}=e,{targetY:N}=e,{sourcePosition:H}=e,{targetPosition:K}=e,{ariaLabel:Y=void 0}=e,{interactionWidth:G=void 0}=e,{class:q=\"\"}=e;Li(\"svelteflow__edge_id\",d);const{edgeLookup:se,edgeTypes:oe,flowId:pe,elementsSelectable:Se}=Ke();j(t,se,U=>n(44,a=U)),j(t,oe,U=>n(40,c=U)),j(t,pe,U=>n(39,f=U)),j(t,Se,U=>n(38,u=U));const L=an(),ve=Xa();function Te(U){const Xe=a.get(d);Xe&&(ve(d),L(\"edgeclick\",{event:U,edge:Xe}))}function Ee(U,Xe){const Me=a.get(d);Me&&L(Xe,{event:U,edge:Me})}const Fe=U=>{Ee(U,\"edgecontextmenu\")},De=U=>{Ee(U,\"edgemouseenter\")},We=U=>{Ee(U,\"edgemouseleave\")};return t.$$set=U=>{\"id\"in U&&n(0,d=U.id),\"type\"in U&&n(34,h=U.type),\"source\"in U&&n(1,g=U.source),\"target\"in U&&n(2,y=U.target),\"data\"in U&&n(3,p=U.data),\"style\"in U&&n(4,m=U.style),\"zIndex\"in U&&n(5,w=U.zIndex),\"animated\"in U&&n(6,b=U.animated),\"selected\"in U&&n(7,_=U.selected),\"selectable\"in U&&n(35,I=U.selectable),\"deletable\"in U&&n(8,v=U.deletable),\"hidden\"in U&&n(9,S=U.hidden),\"label\"in U&&n(10,C=U.label),\"labelStyle\"in U&&n(11,O=U.labelStyle),\"markerStart\"in U&&n(36,R=U.markerStart),\"markerEnd\"in U&&n(37,D=U.markerEnd),\"sourceHandle\"in U&&n(12,W=U.sourceHandle),\"targetHandle\"in U&&n(13,P=U.targetHandle),\"sourceX\"in U&&n(14,k=U.sourceX),\"sourceY\"in U&&n(15,F=U.sourceY),\"targetX\"in U&&n(16,M=U.targetX),\"targetY\"in U&&n(17,N=U.targetY),\"sourcePosition\"in U&&n(18,H=U.sourcePosition),\"targetPosition\"in U&&n(19,K=U.targetPosition),\"ariaLabel\"in U&&n(20,Y=U.ariaLabel),\"interactionWidth\"in U&&n(21,G=U.interactionWidth),\"class\"in U&&n(22,q=U.class)},t.$$.update=()=>{t.$$.dirty[1]&8&&n(23,i=h||\"default\"),t.$$.dirty[0]&8388608|t.$$.dirty[1]&512&&n(27,r=c[i]||Ya),t.$$.dirty[1]&288&&n(26,o=R?`url('#${Gr(R,f)}')`:void 0),t.$$.dirty[1]&320&&n(25,s=D?`url('#${Gr(D,f)}')`:void 0),t.$$.dirty[1]&144&&n(24,l=I??u)},[d,g,y,p,m,w,b,_,v,S,C,O,W,P,k,F,M,N,H,K,Y,G,q,i,l,s,o,r,se,oe,pe,Se,Te,Ee,h,I,R,D,u,f,c,Fe,De,We]}class E0 extends ue{constructor(e){super(),ae(this,e,S0,k0,Bl,{id:0,type:34,source:1,target:2,data:3,style:4,zIndex:5,animated:6,selected:7,selectable:35,deletable:8,hidden:9,label:10,labelStyle:11,markerStart:36,markerEnd:37,sourceHandle:12,targetHandle:13,sourceX:14,sourceY:15,targetX:16,targetY:17,sourcePosition:18,targetPosition:19,ariaLabel:20,interactionWidth:21,class:22},null,[-1,-1])}}function C0(t,e,n){let{onMount:i=void 0}=e,{onDestroy:r=void 0}=e;return Rn(()=>(i==null||i(),r)),t.$$set=o=>{\"onMount\"in o&&n(0,i=o.onMount),\"onDestroy\"in o&&n(1,r=o.onDestroy)},[i,r]}class O0 extends ue{constructor(e){super(),ae(this,e,C0,null,ce,{onMount:0,onDestroy:1})}}function vs(t,e,n){const i=t.slice();return i[2]=e[n],i}function ks(t,e){let n,i,r;const o=[e[2]];let s={};for(let l=0;l<o.length;l+=1)s=we(s,o[l]);return i=new D0({props:s}),{key:t,first:null,c(){n=Ve(),te(i.$$.fragment),this.first=n},m(l,a){V(l,n,a),x(i,l,a),r=!0},p(l,a){e=l;const u=a&1?ct(o,[Tt(e[2])]):{};i.$set(u)},i(l){r||(A(i.$$.fragment,l),r=!0)},o(l){z(i.$$.fragment,l),r=!1},d(l){l&&B(n),$(i,l)}}}function I0(t){let e,n=[],i=new Map,r,o=Pe(t[0]);const s=l=>l[2].id;for(let l=0;l<o.length;l+=1){let a=vs(t,o,l),u=s(a);i.set(u,n[l]=ks(u,a))}return{c(){e=Ce(\"defs\");for(let l=0;l<n.length;l+=1)n[l].c()},m(l,a){V(l,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);r=!0},p(l,[a]){a&1&&(o=Pe(l[0]),Oe(),n=lr(n,a,s,1,l,o,i,e,sr,ks,null,vs),Ie())},i(l){if(!r){for(let a=0;a<o.length;a+=1)A(n[a]);r=!0}},o(l){for(let a=0;a<n.length;a+=1)z(n[a]);r=!1},d(l){l&&B(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function T0(t,e,n){let i;const{markers:r}=Ke();return j(t,r,o=>n(0,i=o)),[i,r]}class M0 extends ue{constructor(e){super(),ae(this,e,T0,I0,ce,{})}}function A0(t){let e;return{c(){e=Ce(\"polyline\"),E(e,\"stroke\",t[6]),E(e,\"stroke-linecap\",\"round\"),E(e,\"stroke-linejoin\",\"round\"),E(e,\"stroke-width\",t[7]),E(e,\"fill\",t[6]),E(e,\"points\",\"-5,-4 0,0 -5,4 -5,-4\")},m(n,i){V(n,e,i)},p(n,i){i&64&&E(e,\"stroke\",n[6]),i&128&&E(e,\"stroke-width\",n[7]),i&64&&E(e,\"fill\",n[6])},d(n){n&&B(e)}}}function P0(t){let e;return{c(){e=Ce(\"polyline\"),E(e,\"stroke\",t[6]),E(e,\"stroke-linecap\",\"round\"),E(e,\"stroke-linejoin\",\"round\"),E(e,\"stroke-width\",t[7]),E(e,\"fill\",\"none\"),E(e,\"points\",\"-5,-4 0,0 -5,4\")},m(n,i){V(n,e,i)},p(n,i){i&64&&E(e,\"stroke\",n[6]),i&128&&E(e,\"stroke-width\",n[7])},d(n){n&&B(e)}}}function N0(t){let e,n,i;function r(l,a){if(l[1]===Ui.Arrow)return P0;if(l[1]===Ui.ArrowClosed)return A0}let o=r(t),s=o&&o(t);return{c(){e=Ce(\"marker\"),s&&s.c(),E(e,\"class\",\"svelte-flow__arrowhead\"),E(e,\"id\",t[0]),E(e,\"markerWidth\",n=`${t[2]}`),E(e,\"markerHeight\",i=`${t[3]}`),E(e,\"viewBox\",\"-10 -10 20 20\"),E(e,\"markerUnits\",t[4]),E(e,\"orient\",t[5]),E(e,\"refX\",\"0\"),E(e,\"refY\",\"0\")},m(l,a){V(l,e,a),s&&s.m(e,null)},p(l,[a]){o===(o=r(l))&&s?s.p(l,a):(s&&s.d(1),s=o&&o(l),s&&(s.c(),s.m(e,null))),a&1&&E(e,\"id\",l[0]),a&4&&n!==(n=`${l[2]}`)&&E(e,\"markerWidth\",n),a&8&&i!==(i=`${l[3]}`)&&E(e,\"markerHeight\",i),a&16&&E(e,\"markerUnits\",l[4]),a&32&&E(e,\"orient\",l[5])},i:le,o:le,d(l){l&&B(e),s&&s.d()}}}function F0(t,e,n){let{id:i}=e,{type:r}=e,{width:o=12.5}=e,{height:s=12.5}=e,{markerUnits:l=\"strokeWidth\"}=e,{orient:a=\"auto-start-reverse\"}=e,{color:u=void 0}=e,{strokeWidth:f=void 0}=e;return t.$$set=c=>{\"id\"in c&&n(0,i=c.id),\"type\"in c&&n(1,r=c.type),\"width\"in c&&n(2,o=c.width),\"height\"in c&&n(3,s=c.height),\"markerUnits\"in c&&n(4,l=c.markerUnits),\"orient\"in c&&n(5,a=c.orient),\"color\"in c&&n(6,u=c.color),\"strokeWidth\"in c&&n(7,f=c.strokeWidth)},[i,r,o,s,l,a,u,f]}class D0 extends ue{constructor(e){super(),ae(this,e,F0,N0,ce,{id:0,type:1,width:2,height:3,markerUnits:4,orient:5,color:6,strokeWidth:7})}}function Ss(t,e,n){const i=t.slice();return i[14]=e[n],i}function Es(t,e){let n,i,r;return i=new E0({props:{id:e[14].id,source:e[14].source,target:e[14].target,data:e[14].data,style:e[14].style,animated:e[14].animated,selected:e[14].selected,selectable:e[14].selectable??e[1],deletable:e[14].deletable,hidden:e[14].hidden,label:e[14].label,labelStyle:e[14].labelStyle,markerStart:e[14].markerStart,markerEnd:e[14].markerEnd,sourceHandle:e[14].sourceHandle,targetHandle:e[14].targetHandle,sourceX:e[14].sourceX,sourceY:e[14].sourceY,targetX:e[14].targetX,targetY:e[14].targetY,sourcePosition:e[14].sourcePosition,targetPosition:e[14].targetPosition,ariaLabel:e[14].ariaLabel,interactionWidth:e[14].interactionWidth,class:e[14].class,type:e[14].type||\"default\",zIndex:e[14].zIndex}}),i.$on(\"edgeclick\",e[7]),i.$on(\"edgecontextmenu\",e[8]),i.$on(\"edgemouseenter\",e[9]),i.$on(\"edgemouseleave\",e[10]),{key:t,first:null,c(){n=Ve(),te(i.$$.fragment),this.first=n},m(o,s){V(o,n,s),x(i,o,s),r=!0},p(o,s){e=o;const l={};s&1&&(l.id=e[14].id),s&1&&(l.source=e[14].source),s&1&&(l.target=e[14].target),s&1&&(l.data=e[14].data),s&1&&(l.style=e[14].style),s&1&&(l.animated=e[14].animated),s&1&&(l.selected=e[14].selected),s&3&&(l.selectable=e[14].selectable??e[1]),s&1&&(l.deletable=e[14].deletable),s&1&&(l.hidden=e[14].hidden),s&1&&(l.label=e[14].label),s&1&&(l.labelStyle=e[14].labelStyle),s&1&&(l.markerStart=e[14].markerStart),s&1&&(l.markerEnd=e[14].markerEnd),s&1&&(l.sourceHandle=e[14].sourceHandle),s&1&&(l.targetHandle=e[14].targetHandle),s&1&&(l.sourceX=e[14].sourceX),s&1&&(l.sourceY=e[14].sourceY),s&1&&(l.targetX=e[14].targetX),s&1&&(l.targetY=e[14].targetY),s&1&&(l.sourcePosition=e[14].sourcePosition),s&1&&(l.targetPosition=e[14].targetPosition),s&1&&(l.ariaLabel=e[14].ariaLabel),s&1&&(l.interactionWidth=e[14].interactionWidth),s&1&&(l.class=e[14].class),s&1&&(l.type=e[14].type||\"default\"),s&1&&(l.zIndex=e[14].zIndex),i.$set(l)},i(o){r||(A(i.$$.fragment,o),r=!0)},o(o){z(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(i,o)}}}function Cs(t){let e,n;return e=new O0({props:{onMount:t[11],onDestroy:t[12]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&4&&(o.onMount=i[11]),r&4&&(o.onDestroy=i[12]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function R0(t){let e,n,i,r,o=[],s=new Map,l,a;i=new M0({});let u=Pe(t[0]);const f=d=>d[14].id;for(let d=0;d<u.length;d+=1){let h=Ss(t,u,d),g=f(h);s.set(g,o[d]=Es(g,h))}let c=t[0].length>0&&Cs(t);return{c(){e=Z(\"div\"),n=Ce(\"svg\"),te(i.$$.fragment),r=ne();for(let d=0;d<o.length;d+=1)o[d].c();l=ne(),c&&c.c(),E(n,\"class\",\"svelte-flow__marker\"),E(e,\"class\",\"svelte-flow__edges\")},m(d,h){V(d,e,h),X(e,n),x(i,n,null),X(e,r);for(let g=0;g<o.length;g+=1)o[g]&&o[g].m(e,null);X(e,l),c&&c.m(e,null),a=!0},p(d,[h]){h&3&&(u=Pe(d[0]),Oe(),o=lr(o,h,f,1,d,u,s,e,sr,Es,l,Ss),Ie()),d[0].length>0?c?(c.p(d,h),h&1&&A(c,1)):(c=Cs(d),c.c(),A(c,1),c.m(e,null)):c&&(Oe(),z(c,1,1,()=>{c=null}),Ie())},i(d){if(!a){A(i.$$.fragment,d);for(let h=0;h<u.length;h+=1)A(o[h]);A(c),a=!0}},o(d){z(i.$$.fragment,d);for(let h=0;h<o.length;h+=1)z(o[h]);z(c),a=!1},d(d){d&&B(e),$(i);for(let h=0;h<o.length;h+=1)o[h].d();c&&c.d()}}}function z0(t,e,n){let i,r,o,{defaultEdgeOptions:s}=e;const{visibleEdges:l,edgesInitialized:a,edges:{setDefaultOptions:u},elementsSelectable:f}=Ke();j(t,l,m=>n(0,i=m)),j(t,a,m=>n(2,o=m)),j(t,f,m=>n(1,r=m)),Rn(()=>{s&&u(s)});function c(m){_e.call(this,t,m)}function d(m){_e.call(this,t,m)}function h(m){_e.call(this,t,m)}function g(m){_e.call(this,t,m)}const y=()=>{zi(a,o=!0,o)},p=()=>{zi(a,o=!1,o)};return t.$$set=m=>{\"defaultEdgeOptions\"in m&&n(6,s=m.defaultEdgeOptions)},[i,r,o,l,a,f,s,c,d,h,g,y,p]}class L0 extends ue{constructor(e){super(),ae(this,e,z0,R0,ce,{defaultEdgeOptions:6})}}function Os(t){let e;return{c(){e=Z(\"div\"),E(e,\"class\",\"svelte-flow__selection svelte-1iugwpu\"),fe(e,\"width\",typeof t[2]==\"string\"?t[2]:`${t[2]}px`),fe(e,\"height\",typeof t[3]==\"string\"?t[3]:`${t[3]}px`),fe(e,\"transform\",`translate(${t[0]}px, ${t[1]}px)`)},m(n,i){V(n,e,i)},p(n,i){i&4&&fe(e,\"width\",typeof n[2]==\"string\"?n[2]:`${n[2]}px`),i&8&&fe(e,\"height\",typeof n[3]==\"string\"?n[3]:`${n[3]}px`),i&3&&fe(e,\"transform\",`translate(${n[0]}px, ${n[1]}px)`)},d(n){n&&B(e)}}}function H0(t){let e,n=t[4]&&Os(t);return{c(){n&&n.c(),e=Ve()},m(i,r){n&&n.m(i,r),V(i,e,r)},p(i,[r]){i[4]?n?n.p(i,r):(n=Os(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(i){i&&B(e),n&&n.d(i)}}}function B0(t,e,n){let{x:i=0}=e,{y:r=0}=e,{width:o=0}=e,{height:s=0}=e,{isVisible:l=!0}=e;return t.$$set=a=>{\"x\"in a&&n(0,i=a.x),\"y\"in a&&n(1,r=a.y),\"width\"in a&&n(2,o=a.width),\"height\"in a&&n(3,s=a.height),\"isVisible\"in a&&n(4,l=a.isVisible)},[i,r,o,s,l]}class Ga extends ue{constructor(e){super(),ae(this,e,B0,H0,ce,{x:0,y:1,width:2,height:3,isVisible:4})}}function V0(t){var i,r,o,s;let e,n;return e=new Ga({props:{isVisible:!!(t[0]&&t[1]===\"user\"),width:(i=t[0])==null?void 0:i.width,height:(r=t[0])==null?void 0:r.height,x:(o=t[0])==null?void 0:o.x,y:(s=t[0])==null?void 0:s.y}}),{c(){te(e.$$.fragment)},m(l,a){x(e,l,a),n=!0},p(l,[a]){var f,c,d,h;const u={};a&3&&(u.isVisible=!!(l[0]&&l[1]===\"user\")),a&1&&(u.width=(f=l[0])==null?void 0:f.width),a&1&&(u.height=(c=l[0])==null?void 0:c.height),a&1&&(u.x=(d=l[0])==null?void 0:d.x),a&1&&(u.y=(h=l[0])==null?void 0:h.y),e.$set(u)},i(l){n||(A(e.$$.fragment,l),n=!0)},o(l){z(e.$$.fragment,l),n=!1},d(l){$(e,l)}}}function q0(t,e,n){let i,r;const{selectionRect:o,selectionRectMode:s}=Ke();return j(t,o,l=>n(0,i=l)),j(t,s,l=>n(1,r=l)),[i,r,o,s]}class W0 extends ue{constructor(e){super(),ae(this,e,q0,V0,ce,{})}}function Is(t){let e,n,i,r,o;return n=new Ga({props:{width:\"100%\",height:\"100%\",x:0,y:0}}),{c(){e=Z(\"div\"),te(n.$$.fragment),E(e,\"class\",\"selection-wrapper nopan svelte-5pxri\"),fe(e,\"width\",t[1].width+\"px\"),fe(e,\"height\",t[1].height+\"px\"),fe(e,\"transform\",\"translate(\"+t[1].x+\"px, \"+t[1].y+\"px)\"),E(e,\"role\",\"button\"),E(e,\"tabindex\",\"-1\")},m(s,l){V(s,e,l),x(n,e,null),i=!0,r||(o=[Ue(ja.call(null,e,{disabled:!1,store:t[2],onDrag:t[11],onDragStart:t[12],onDragStop:t[13]})),de(e,\"contextmenu\",t[7]),de(e,\"click\",t[8]),de(e,\"keyup\",Y0)],r=!0)},p(s,l){(!i||l&2)&&fe(e,\"width\",s[1].width+\"px\"),(!i||l&2)&&fe(e,\"height\",s[1].height+\"px\"),(!i||l&2)&&fe(e,\"transform\",\"translate(\"+s[1].x+\"px, \"+s[1].y+\"px)\")},i(s){i||(A(n.$$.fragment,s),i=!0)},o(s){z(n.$$.fragment,s),i=!1},d(s){s&&B(e),$(n),r=!1,qe(o)}}}function X0(t){let e=t[0]===\"nodes\"&&t[1]&&kn(t[1].x)&&kn(t[1].y),n,i,r=e&&Is(t);return{c(){r&&r.c(),n=Ve()},m(o,s){r&&r.m(o,s),V(o,n,s),i=!0},p(o,[s]){s&3&&(e=o[0]===\"nodes\"&&o[1]&&kn(o[1].x)&&kn(o[1].y)),e?r?(r.p(o,s),s&3&&A(r,1)):(r=Is(o),r.c(),A(r,1),r.m(n.parentNode,n)):r&&(Oe(),z(r,1,1,()=>{r=null}),Ie())},i(o){i||(A(r),i=!0)},o(o){z(r),i=!1},d(o){o&&B(n),r&&r.d(o)}}}const Y0=()=>{};function K0(t,e,n){let i,r,o;const s=Ke(),{selectionRectMode:l,nodes:a,nodeLookup:u}=s;j(t,l,m=>n(0,o=m)),j(t,a,m=>n(9,i=m)),j(t,u,m=>n(10,r=m));const f=an();let c=null;function d(m){const w=i.filter(b=>b.selected);f(\"selectioncontextmenu\",{nodes:w,event:m})}function h(m){const w=i.filter(b=>b.selected);f(\"selectionclick\",{nodes:w,event:m})}const g=(m,w,b,_)=>{f(\"nodedrag\",{event:m,targetNode:null,nodes:_})},y=(m,w,b,_)=>{f(\"nodedragstart\",{event:m,targetNode:null,nodes:_})},p=(m,w,b,_)=>{f(\"nodedragstop\",{event:m,targetNode:null,nodes:_})};return t.$$.update=()=>{t.$$.dirty&1537&&o===\"nodes\"&&n(1,c=co(r,{filter:m=>!!m.selected}))},[o,c,s,l,a,u,f,d,h,i,r,g,y,p]}class J0 extends ue{constructor(e){super(),ae(this,e,K0,X0,ce,{})}}function St(t,e){let{enabled:n=!0,trigger:i,type:r=\"keydown\"}=e;function o(s){const l=Array.isArray(i)?i:[i],a={alt:s.altKey,ctrl:s.ctrlKey,shift:s.shiftKey,meta:s.metaKey};for(const u of l){const f={modifier:[],preventDefault:!1,enabled:!0,...u},{modifier:c,key:d,callback:h,preventDefault:g,enabled:y}=f;if(y){if(c.length&&!(Array.isArray(c)?c:[c]).map(w=>typeof w==\"string\"?[w]:w).some(w=>w.every(b=>a[b])))continue;if(s.key===d){g&&s.preventDefault();const p={node:t,trigger:f,originalEvent:s};t.dispatchEvent(new CustomEvent(\"shortcut\",{detail:p})),h==null||h(p)}}}}return n&&t.addEventListener(r,o),{update:s=>{const{enabled:l=!0,type:a=\"keydown\"}=s;n&&(!l||r!==a)?t.removeEventListener(r,o):!n&&l&&t.addEventListener(a,o),n=l,r=a,i=s.trigger},destroy:()=>{t.removeEventListener(r,o)}}}function U0(t){let e,n,i,r,o,s,l,a,u,f,c,d;return{c:le,m(h,g){c||(d=[Ue(e=St.call(null,window,{trigger:Ye(t[0],t[11]),type:\"keydown\"})),Ue(n=St.call(null,window,{trigger:Ye(t[0],t[12]),type:\"keyup\"})),Ue(i=St.call(null,window,{trigger:Ye(t[1],t[13]),type:\"keydown\"})),Ue(r=St.call(null,window,{trigger:Ye(t[1],t[14]),type:\"keyup\"})),Ue(o=St.call(null,window,{trigger:Ye(t[2],t[15]),type:\"keydown\"})),Ue(s=St.call(null,window,{trigger:Ye(t[2],t[16]),type:\"keyup\"})),Ue(l=St.call(null,window,{trigger:Ye(t[3],t[17]),type:\"keydown\"})),Ue(a=St.call(null,window,{trigger:Ye(t[3],t[18]),type:\"keyup\"})),Ue(u=St.call(null,window,{trigger:Ye(t[4],t[19]),type:\"keydown\"})),Ue(f=St.call(null,window,{trigger:Ye(t[4],t[20]),type:\"keyup\"})),de(window,\"blur\",t[10]),de(window,\"contextmenu\",t[10])],c=!0)},p(h,[g]){e&&Re(e.update)&&g&1&&e.update.call(null,{trigger:Ye(h[0],h[11]),type:\"keydown\"}),n&&Re(n.update)&&g&1&&n.update.call(null,{trigger:Ye(h[0],h[12]),type:\"keyup\"}),i&&Re(i.update)&&g&2&&i.update.call(null,{trigger:Ye(h[1],h[13]),type:\"keydown\"}),r&&Re(r.update)&&g&2&&r.update.call(null,{trigger:Ye(h[1],h[14]),type:\"keyup\"}),o&&Re(o.update)&&g&4&&o.update.call(null,{trigger:Ye(h[2],h[15]),type:\"keydown\"}),s&&Re(s.update)&&g&4&&s.update.call(null,{trigger:Ye(h[2],h[16]),type:\"keyup\"}),l&&Re(l.update)&&g&8&&l.update.call(null,{trigger:Ye(h[3],h[17]),type:\"keydown\"}),a&&Re(a.update)&&g&8&&a.update.call(null,{trigger:Ye(h[3],h[18]),type:\"keyup\"}),u&&Re(u.update)&&g&16&&u.update.call(null,{trigger:Ye(h[4],h[19]),type:\"keydown\"}),f&&Re(f.update)&&g&16&&f.update.call(null,{trigger:Ye(h[4],h[20]),type:\"keyup\"})},i:le,o:le,d(h){c=!1,qe(d)}}}function Za(t){return t!==null&&typeof t==\"object\"}function j0(t){return Za(t)?t.modifier||[]:[]}function G0(t){return t==null?\"\":Za(t)?t.key:t}function Ye(t,e){return(Array.isArray(t)?t:[t]).map(i=>{const r=G0(i);return{key:r,modifier:j0(i),enabled:r!==null,callback:e}})}function Z0(t,e,n){let{selectionKey:i=\"Shift\"}=e,{multiSelectionKey:r=Gi()?\"Meta\":\"Control\"}=e,{deleteKey:o=\"Backspace\"}=e,{panActivationKey:s=\" \"}=e,{zoomActivationKey:l=Gi()?\"Meta\":\"Control\"}=e;const{selectionKeyPressed:a,multiselectionKeyPressed:u,deleteKeyPressed:f,panActivationKeyPressed:c,zoomActivationKeyPressed:d,selectionRect:h}=Ke();function g(){h.set(null),a.set(!1),u.set(!1),f.set(!1),c.set(!1),d.set(!1)}const y=()=>a.set(!0),p=()=>a.set(!1),m=()=>u.set(!0),w=()=>u.set(!1),b=O=>{!(O.originalEvent.ctrlKey||O.originalEvent.metaKey||O.originalEvent.shiftKey)&&!Ng(O.originalEvent)&&f.set(!0)},_=()=>f.set(!1),I=()=>c.set(!0),v=()=>c.set(!1),S=()=>d.set(!0),C=()=>d.set(!1);return t.$$set=O=>{\"selectionKey\"in O&&n(0,i=O.selectionKey),\"multiSelectionKey\"in O&&n(1,r=O.multiSelectionKey),\"deleteKey\"in O&&n(2,o=O.deleteKey),\"panActivationKey\"in O&&n(3,s=O.panActivationKey),\"zoomActivationKey\"in O&&n(4,l=O.zoomActivationKey)},[i,r,o,s,l,a,u,f,c,d,g,y,p,m,w,b,_,I,v,S,C]}class Q0 extends ue{constructor(e){super(),ae(this,e,Z0,U0,ce,{selectionKey:0,multiSelectionKey:1,deleteKey:2,panActivationKey:3,zoomActivationKey:4})}}const x0=t=>({}),Ts=t=>({});function Ms(t){let e,n,i,r;const o=t[10].connectionLine,s=ot(o,t,t[9],Ts);let l=!t[2]&&As(t);return{c(){e=Ce(\"svg\"),n=Ce(\"g\"),s&&s.c(),l&&l.c(),E(n,\"class\",i=Ae([\"svelte-flow__connection\",t[3].status])),E(e,\"width\",t[4]),E(e,\"height\",t[5]),E(e,\"class\",\"svelte-flow__connectionline\"),E(e,\"style\",t[0])},m(a,u){V(a,e,u),X(e,n),s&&s.m(n,null),l&&l.m(n,null),r=!0},p(a,u){s&&s.p&&(!r||u&512)&&lt(s,o,a,a[9],r?st(o,a[9],u,x0):at(a[9]),Ts),a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=As(a),l.c(),l.m(n,null)),(!r||u&8&&i!==(i=Ae([\"svelte-flow__connection\",a[3].status])))&&E(n,\"class\",i),(!r||u&16)&&E(e,\"width\",a[4]),(!r||u&32)&&E(e,\"height\",a[5]),(!r||u&1)&&E(e,\"style\",a[0])},i(a){r||(A(s,a),r=!0)},o(a){z(s,a),r=!1},d(a){a&&B(e),s&&s.d(a),l&&l.d()}}}function As(t){let e,n;return{c(){e=Ce(\"path\"),E(e,\"d\",n=t[3].path),E(e,\"style\",t[1]),E(e,\"fill\",\"none\"),E(e,\"class\",\"svelte-flow__connection-path\")},m(i,r){V(i,e,r)},p(i,r){r&8&&n!==(n=i[3].path)&&E(e,\"d\",n),r&2&&E(e,\"style\",i[1])},d(i){i&&B(e)}}}function $0(t){let e,n,i=t[3].path&&Ms(t);return{c(){i&&i.c(),e=Ve()},m(r,o){i&&i.m(r,o),V(r,e,o),n=!0},p(r,[o]){r[3].path?i?(i.p(r,o),o&8&&A(i,1)):(i=Ms(r),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Oe(),z(i,1,1,()=>{i=null}),Ie())},i(r){n||(A(i),n=!0)},o(r){z(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function ey(t,e,n){let i,r,o,{$$slots:s={},$$scope:l}=e,{containerStyle:a=\"\"}=e,{style:u=\"\"}=e,{isCustomComponent:f=!1}=e;const{width:c,height:d,connection:h}=Ke();return j(t,c,g=>n(4,r=g)),j(t,d,g=>n(5,o=g)),j(t,h,g=>n(3,i=g)),t.$$set=g=>{\"containerStyle\"in g&&n(0,a=g.containerStyle),\"style\"in g&&n(1,u=g.style),\"isCustomComponent\"in g&&n(2,f=g.isCustomComponent),\"$$scope\"in g&&n(9,l=g.$$scope)},[a,u,f,i,r,o,c,d,h,l,s]}class ty extends ue{constructor(e){super(),ae(this,e,ey,$0,ce,{containerStyle:0,style:1,isCustomComponent:2})}}function ny(t){let e,n,i;const r=t[8].default,o=ot(r,t,t[7],null);let s=[{class:n=Ae([\"svelte-flow__panel\",t[1],...t[2]])},{style:t[0]},t[5]],l={};for(let a=0;a<s.length;a+=1)l=we(l,s[a]);return{c(){e=Z(\"div\"),o&&o.c(),An(e,l),fe(e,\"pointer-events\",t[3]?\"none\":\"\")},m(a,u){V(a,e,u),o&&o.m(e,null),i=!0},p(a,[u]){o&&o.p&&(!i||u&128)&&lt(o,r,a,a[7],i?st(r,a[7],u,null):at(a[7]),null),An(e,l=ct(s,[(!i||u&6&&n!==(n=Ae([\"svelte-flow__panel\",a[1],...a[2]])))&&{class:n},(!i||u&1)&&{style:a[0]},u&32&&a[5]])),fe(e,\"pointer-events\",a[3]?\"none\":\"\")},i(a){i||(A(o,a),i=!0)},o(a){z(o,a),i=!1},d(a){a&&B(e),o&&o.d(a)}}}function iy(t,e,n){let i;const r=[\"position\",\"style\",\"class\"];let o=Le(e,r),s,{$$slots:l={},$$scope:a}=e,{position:u=\"top-right\"}=e,{style:f=void 0}=e,{class:c=void 0}=e;const{selectionRectMode:d}=Ke();return j(t,d,h=>n(3,s=h)),t.$$set=h=>{e=we(we({},e),yt(h)),n(5,o=Le(e,r)),\"position\"in h&&n(6,u=h.position),\"style\"in h&&n(0,f=h.style),\"class\"in h&&n(1,c=h.class),\"$$scope\"in h&&n(7,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&64&&n(2,i=`${u}`.split(\"-\"))},[f,c,i,s,d,o,u,a,l]}class po extends ue{constructor(e){super(),ae(this,e,iy,ny,ce,{position:6,style:0,class:1})}}function Ps(t){let e,n;return e=new po({props:{position:t[1],class:\"svelte-flow__attribution\",\"data-message\":\"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us\",$$slots:{default:[ry]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.position=i[1]),r&4&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function ry(t){let e;return{c(){e=Z(\"a\"),e.textContent=\"Svelte Flow\",E(e,\"href\",\"https://svelteflow.dev\"),E(e,\"target\",\"_blank\"),E(e,\"rel\",\"noopener noreferrer\"),E(e,\"aria-label\",\"Svelte Flow attribution\")},m(n,i){V(n,e,i)},p:le,d(n){n&&B(e)}}}function oy(t){var r;let e,n,i=!((r=t[0])!=null&&r.hideAttribution)&&Ps(t);return{c(){i&&i.c(),e=Ve()},m(o,s){i&&i.m(o,s),V(o,e,s),n=!0},p(o,[s]){var l;(l=o[0])!=null&&l.hideAttribution?i&&(Oe(),z(i,1,1,()=>{i=null}),Ie()):i?(i.p(o,s),s&1&&A(i,1)):(i=Ps(o),i.c(),A(i,1),i.m(e.parentNode,e))},i(o){n||(A(i),n=!0)},o(o){z(i),n=!1},d(o){o&&B(e),i&&i.d(o)}}}function sy(t,e,n){let{proOptions:i=void 0}=e,{position:r=\"bottom-right\"}=e;return t.$$set=o=>{\"proOptions\"in o&&n(0,i=o.proOptions),\"position\"in o&&n(1,r=o.position)},[i,r]}class ly extends ue{constructor(e){super(),ae(this,e,sy,oy,ce,{proOptions:0,position:1})}}function Ns(t,{nodeTypes:e,edgeTypes:n,minZoom:i,maxZoom:r,translateExtent:o}){e!==void 0&&t.setNodeTypes(e),n!==void 0&&t.setEdgeTypes(n),i!==void 0&&t.setMinZoom(i),r!==void 0&&t.setMaxZoom(r),o!==void 0&&t.setTranslateExtent(o)}const ay=t=>Object.keys(t);function uy(t,e){ay(e).forEach(n=>{const i=e[n];i!==void 0&&t[n].set(i)})}function fy(){return typeof window>\"u\"||!window.matchMedia?null:window.matchMedia(\"(prefers-color-scheme: dark)\")}function cy(t=\"light\"){return ft(\"light\",n=>{if(t!==\"system\"){n(t);return}const i=fy(),r=()=>n(i!=null&&i.matches?\"dark\":\"light\");return n(i!=null&&i.matches?\"dark\":\"light\"),i==null||i.addEventListener(\"change\",r),()=>{i==null||i.removeEventListener(\"change\",r)}})}const dy=t=>({}),Fs=t=>({slot:\"connectionLine\"});function hy(t){let e;const n=t[71].connectionLine,i=ot(n,t,t[95],Fs);return{c(){i&&i.c()},m(r,o){i&&i.m(r,o),e=!0},p(r,o){i&&i.p&&(!e||o[3]&4)&&lt(i,n,r,r[95],e?st(n,r[95],o,dy):at(r[95]),Fs)},i(r){e||(A(i,r),e=!0)},o(r){z(i,r),e=!1},d(r){i&&i.d(r)}}}function gy(t){let e,n,i,r,o,s,l,a,u,f,c,d;return e=new L0({props:{defaultEdgeOptions:t[21]}}),e.$on(\"edgeclick\",t[74]),e.$on(\"edgecontextmenu\",t[75]),e.$on(\"edgemouseenter\",t[76]),e.$on(\"edgemouseleave\",t[77]),i=new ty({props:{containerStyle:t[7],style:t[6],isCustomComponent:t[32].connectionLine,$$slots:{connectionLine:[hy]},$$scope:{ctx:t}}}),u=new v0({}),u.$on(\"nodeclick\",t[78]),u.$on(\"nodemouseenter\",t[79]),u.$on(\"nodemousemove\",t[80]),u.$on(\"nodemouseleave\",t[81]),u.$on(\"nodedragstart\",t[82]),u.$on(\"nodedrag\",t[83]),u.$on(\"nodedragstop\",t[84]),u.$on(\"nodecontextmenu\",t[85]),c=new J0({}),c.$on(\"selectionclick\",t[86]),c.$on(\"selectioncontextmenu\",t[87]),c.$on(\"nodedragstart\",t[88]),c.$on(\"nodedrag\",t[89]),c.$on(\"nodedragstop\",t[90]),{c(){te(e.$$.fragment),n=ne(),te(i.$$.fragment),r=ne(),o=Z(\"div\"),s=ne(),l=Z(\"div\"),a=ne(),te(u.$$.fragment),f=ne(),te(c.$$.fragment),E(o,\"class\",\"svelte-flow__edgelabel-renderer\"),E(l,\"class\",\"svelte-flow__viewport-portal\")},m(h,g){x(e,h,g),V(h,n,g),x(i,h,g),V(h,r,g),V(h,o,g),V(h,s,g),V(h,l,g),V(h,a,g),x(u,h,g),V(h,f,g),x(c,h,g),d=!0},p(h,g){const y={};g[0]&2097152&&(y.defaultEdgeOptions=h[21]),e.$set(y);const p={};g[0]&128&&(p.containerStyle=h[7]),g[0]&64&&(p.style=h[6]),g[1]&2&&(p.isCustomComponent=h[32].connectionLine),g[3]&4&&(p.$$scope={dirty:g,ctx:h}),i.$set(p)},i(h){d||(A(e.$$.fragment,h),A(i.$$.fragment,h),A(u.$$.fragment,h),A(c.$$.fragment,h),d=!0)},o(h){z(e.$$.fragment,h),z(i.$$.fragment,h),z(u.$$.fragment,h),z(c.$$.fragment,h),d=!1},d(h){h&&(B(n),B(r),B(o),B(s),B(l),B(a),B(f)),$(e,h),$(i,h),$(u,h),$(c,h)}}}function my(t){let e,n,i,r;return e=new h0({props:{$$slots:{default:[gy]},$$scope:{ctx:t}}}),i=new W0({}),{c(){te(e.$$.fragment),n=ne(),te(i.$$.fragment)},m(o,s){x(e,o,s),V(o,n,s),x(i,o,s),r=!0},p(o,s){const l={};s[0]&2097344|s[1]&2|s[3]&4&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){r||(A(e.$$.fragment,o),A(i.$$.fragment,o),r=!0)},o(o){z(e.$$.fragment,o),z(i.$$.fragment,o),r=!1},d(o){o&&B(n),$(e,o),$(i,o)}}}function yy(t){let e,n;return e=new f0({props:{panOnDrag:t[17]===void 0?!0:t[17],selectionOnDrag:t[18],$$slots:{default:[my]},$$scope:{ctx:t}}}),e.$on(\"paneclick\",t[91]),e.$on(\"panecontextmenu\",t[92]),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&131072&&(o.panOnDrag=i[17]===void 0?!0:i[17]),r[0]&262144&&(o.selectionOnDrag=i[18]),r[0]&2097344|r[1]&2|r[3]&4&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function py(t){let e,n,i,r,o,s,l,a,u,f,c,d;n=new Q0({props:{selectionKey:t[1],deleteKey:t[5],panActivationKey:t[2],multiSelectionKey:t[3],zoomActivationKey:t[4]}}),r=new l0({props:{initialViewport:t[29],onMoveStart:t[8],onMove:t[9],onMoveEnd:t[10],panOnScrollMode:t[11]===void 0?Ct.Free:t[11],preventScrolling:t[12]===void 0?!0:t[12],zoomOnScroll:t[13]===void 0?!0:t[13],zoomOnDoubleClick:t[14]===void 0?!0:t[14],zoomOnPinch:t[15]===void 0?!0:t[15],panOnScroll:t[16]===void 0?!1:t[16],panOnDrag:t[17]===void 0?!0:t[17],$$slots:{default:[yy]},$$scope:{ctx:t}}}),s=new ly({props:{proOptions:t[20],position:t[19]}});const h=t[71].default,g=ot(h,t,t[95],null);let y=[{style:t[22]},{class:a=Ae([\"svelte-flow\",t[23],t[28]])},{\"data-testid\":\"svelte-flow__wrapper\"},t[31],{role:\"application\"}],p={};for(let m=0;m<y.length;m+=1)p=we(p,y[m]);return{c(){e=Z(\"div\"),te(n.$$.fragment),i=ne(),te(r.$$.fragment),o=ne(),te(s.$$.fragment),l=ne(),g&&g.c(),An(e,p),Bi(()=>t[94].call(e)),ge(e,\"svelte-12wlba6\",!0)},m(m,w){V(m,e,w),x(n,e,null),X(e,i),x(r,e,null),X(e,o),x(s,e,null),X(e,l),g&&g.m(e,null),t[93](e),u=Mf(e,t[94].bind(e)),f=!0,c||(d=[de(e,\"dragover\",t[72]),de(e,\"drop\",t[73])],c=!0)},p(m,w){const b={};w[0]&2&&(b.selectionKey=m[1]),w[0]&32&&(b.deleteKey=m[5]),w[0]&4&&(b.panActivationKey=m[2]),w[0]&8&&(b.multiSelectionKey=m[3]),w[0]&16&&(b.zoomActivationKey=m[4]),n.$set(b);const _={};w[0]&256&&(_.onMoveStart=m[8]),w[0]&512&&(_.onMove=m[9]),w[0]&1024&&(_.onMoveEnd=m[10]),w[0]&2048&&(_.panOnScrollMode=m[11]===void 0?Ct.Free:m[11]),w[0]&4096&&(_.preventScrolling=m[12]===void 0?!0:m[12]),w[0]&8192&&(_.zoomOnScroll=m[13]===void 0?!0:m[13]),w[0]&16384&&(_.zoomOnDoubleClick=m[14]===void 0?!0:m[14]),w[0]&32768&&(_.zoomOnPinch=m[15]===void 0?!0:m[15]),w[0]&65536&&(_.panOnScroll=m[16]===void 0?!1:m[16]),w[0]&131072&&(_.panOnDrag=m[17]===void 0?!0:m[17]),w[0]&2490560|w[1]&2|w[3]&4&&(_.$$scope={dirty:w,ctx:m}),r.$set(_);const I={};w[0]&1048576&&(I.proOptions=m[20]),w[0]&524288&&(I.position=m[19]),s.$set(I),g&&g.p&&(!f||w[3]&4)&&lt(g,h,m,m[95],f?st(h,m[95],w,null):at(m[95]),null),An(e,p=ct(y,[(!f||w[0]&4194304)&&{style:m[22]},(!f||w[0]&276824064&&a!==(a=Ae([\"svelte-flow\",m[23],m[28]])))&&{class:a},{\"data-testid\":\"svelte-flow__wrapper\"},w[1]&1&&m[31],{role:\"application\"}])),ge(e,\"svelte-12wlba6\",!0)},i(m){f||(A(n.$$.fragment,m),A(r.$$.fragment,m),A(s.$$.fragment,m),A(g,m),f=!0)},o(m){z(n.$$.fragment,m),z(r.$$.fragment,m),z(s.$$.fragment,m),z(g,m),f=!1},d(m){m&&B(e),$(n),$(r),$(s),g&&g.d(m),t[93](null),u(),c=!1,qe(d)}}}function by(t,e,n){let i;const r=[\"id\",\"nodes\",\"edges\",\"fitView\",\"fitViewOptions\",\"minZoom\",\"maxZoom\",\"initialViewport\",\"viewport\",\"nodeTypes\",\"edgeTypes\",\"selectionKey\",\"selectionMode\",\"panActivationKey\",\"multiSelectionKey\",\"zoomActivationKey\",\"nodesDraggable\",\"nodesConnectable\",\"nodeDragThreshold\",\"elementsSelectable\",\"snapGrid\",\"deleteKey\",\"connectionRadius\",\"connectionLineType\",\"connectionMode\",\"connectionLineStyle\",\"connectionLineContainerStyle\",\"onMoveStart\",\"onMove\",\"onMoveEnd\",\"isValidConnection\",\"translateExtent\",\"onlyRenderVisibleElements\",\"panOnScrollMode\",\"preventScrolling\",\"zoomOnScroll\",\"zoomOnDoubleClick\",\"zoomOnPinch\",\"panOnScroll\",\"panOnDrag\",\"selectionOnDrag\",\"autoPanOnConnect\",\"autoPanOnNodeDrag\",\"onerror\",\"ondelete\",\"onedgecreate\",\"attributionPosition\",\"proOptions\",\"defaultEdgeOptions\",\"width\",\"height\",\"colorMode\",\"onconnect\",\"onconnectstart\",\"onconnectend\",\"onbeforedelete\",\"oninit\",\"defaultMarkerColor\",\"style\",\"class\"];let o=Le(e,r),s,l,a=le,u=()=>(a(),a=Zn(C,T=>n(96,l=T)),C),f,c=le,d=()=>(c(),c=Zn(i,T=>n(28,f=T)),i);t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>c());let{$$slots:h={},$$scope:g}=e;const y=Cf(h);let{id:p=\"1\"}=e,{nodes:m}=e,{edges:w}=e,{fitView:b=void 0}=e,{fitViewOptions:_=void 0}=e,{minZoom:I=void 0}=e,{maxZoom:v=void 0}=e,{initialViewport:S=void 0}=e,{viewport:C=void 0}=e;u();let{nodeTypes:O=void 0}=e,{edgeTypes:R=void 0}=e,{selectionKey:D=void 0}=e,{selectionMode:W=void 0}=e,{panActivationKey:P=void 0}=e,{multiSelectionKey:k=void 0}=e,{zoomActivationKey:F=void 0}=e,{nodesDraggable:M=void 0}=e,{nodesConnectable:N=void 0}=e,{nodeDragThreshold:H=void 0}=e,{elementsSelectable:K=void 0}=e,{snapGrid:Y=void 0}=e,{deleteKey:G=void 0}=e,{connectionRadius:q=void 0}=e,{connectionLineType:se=void 0}=e,{connectionMode:oe=Ut.Strict}=e,{connectionLineStyle:pe=\"\"}=e,{connectionLineContainerStyle:Se=\"\"}=e,{onMoveStart:L=void 0}=e,{onMove:ve=void 0}=e,{onMoveEnd:Te=void 0}=e,{isValidConnection:Ee=void 0}=e,{translateExtent:Fe=void 0}=e,{onlyRenderVisibleElements:De=void 0}=e,{panOnScrollMode:We=Ct.Free}=e,{preventScrolling:U=!0}=e,{zoomOnScroll:Xe=!0}=e,{zoomOnDoubleClick:Me=!0}=e,{zoomOnPinch:At=!0}=e,{panOnScroll:Pt=!1}=e,{panOnDrag:Nt=!0}=e,{selectionOnDrag:je=void 0}=e,{autoPanOnConnect:kt=!0}=e,{autoPanOnNodeDrag:ie=!0}=e,{onerror:Bt=void 0}=e,{ondelete:Vt=void 0}=e,{onedgecreate:Zt=void 0}=e,{attributionPosition:J=void 0}=e,{proOptions:pt=void 0}=e,{defaultEdgeOptions:Q=void 0}=e,{width:xe=void 0}=e,{height:tt=void 0}=e,{colorMode:ut=\"light\"}=e,{onconnect:un=void 0}=e,{onconnectstart:fn=void 0}=e,{onconnectend:cn=void 0}=e,{onbeforedelete:dn=void 0}=e,{oninit:qt=void 0}=e,{defaultMarkerColor:hn=\"#b1b1b7\"}=e,{style:To=void 0}=e,{class:Mo=void 0}=e,fi,gn,mn;const Qu=l||S,$e=Nf(yo)?Ke():i0({nodes:ee(m),edges:ee(w),width:xe,height:tt,fitView:b});Rn(()=>($e.width.set(gn),$e.height.set(mn),$e.domNode.set(fi),$e.syncNodeStores(m),$e.syncEdgeStores(w),$e.syncViewport(C),b!==void 0&&$e.fitViewOnInit.set(b),_&&$e.fitViewOptions.set(_),Ns($e,{nodeTypes:O,edgeTypes:R,minZoom:I,maxZoom:v,translateExtent:Fe}),()=>{$e.reset()}));const{initialized:Ao}=$e;j(t,Ao,T=>n(70,s=T));let wr=!1;function xu(T){_e.call(this,t,T)}function $u(T){_e.call(this,t,T)}function ef(T){_e.call(this,t,T)}function tf(T){_e.call(this,t,T)}function nf(T){_e.call(this,t,T)}function rf(T){_e.call(this,t,T)}function of(T){_e.call(this,t,T)}function sf(T){_e.call(this,t,T)}function lf(T){_e.call(this,t,T)}function af(T){_e.call(this,t,T)}function uf(T){_e.call(this,t,T)}function ff(T){_e.call(this,t,T)}function cf(T){_e.call(this,t,T)}function df(T){_e.call(this,t,T)}function hf(T){_e.call(this,t,T)}function gf(T){_e.call(this,t,T)}function mf(T){_e.call(this,t,T)}function yf(T){_e.call(this,t,T)}function pf(T){_e.call(this,t,T)}function bf(T){_e.call(this,t,T)}function _f(T){_e.call(this,t,T)}function wf(T){It[T?\"unshift\":\"push\"](()=>{fi=T,n(26,fi)})}function vf(){gn=this.clientWidth,mn=this.clientHeight,n(24,gn),n(25,mn)}return t.$$set=T=>{e=we(we({},e),yt(T)),n(31,o=Le(e,r)),\"id\"in T&&n(33,p=T.id),\"nodes\"in T&&n(34,m=T.nodes),\"edges\"in T&&n(35,w=T.edges),\"fitView\"in T&&n(36,b=T.fitView),\"fitViewOptions\"in T&&n(37,_=T.fitViewOptions),\"minZoom\"in T&&n(38,I=T.minZoom),\"maxZoom\"in T&&n(39,v=T.maxZoom),\"initialViewport\"in T&&n(40,S=T.initialViewport),\"viewport\"in T&&u(n(0,C=T.viewport)),\"nodeTypes\"in T&&n(41,O=T.nodeTypes),\"edgeTypes\"in T&&n(42,R=T.edgeTypes),\"selectionKey\"in T&&n(1,D=T.selectionKey),\"selectionMode\"in T&&n(43,W=T.selectionMode),\"panActivationKey\"in T&&n(2,P=T.panActivationKey),\"multiSelectionKey\"in T&&n(3,k=T.multiSelectionKey),\"zoomActivationKey\"in T&&n(4,F=T.zoomActivationKey),\"nodesDraggable\"in T&&n(44,M=T.nodesDraggable),\"nodesConnectable\"in T&&n(45,N=T.nodesConnectable),\"nodeDragThreshold\"in T&&n(46,H=T.nodeDragThreshold),\"elementsSelectable\"in T&&n(47,K=T.elementsSelectable),\"snapGrid\"in T&&n(48,Y=T.snapGrid),\"deleteKey\"in T&&n(5,G=T.deleteKey),\"connectionRadius\"in T&&n(49,q=T.connectionRadius),\"connectionLineType\"in T&&n(50,se=T.connectionLineType),\"connectionMode\"in T&&n(51,oe=T.connectionMode),\"connectionLineStyle\"in T&&n(6,pe=T.connectionLineStyle),\"connectionLineContainerStyle\"in T&&n(7,Se=T.connectionLineContainerStyle),\"onMoveStart\"in T&&n(8,L=T.onMoveStart),\"onMove\"in T&&n(9,ve=T.onMove),\"onMoveEnd\"in T&&n(10,Te=T.onMoveEnd),\"isValidConnection\"in T&&n(52,Ee=T.isValidConnection),\"translateExtent\"in T&&n(53,Fe=T.translateExtent),\"onlyRenderVisibleElements\"in T&&n(54,De=T.onlyRenderVisibleElements),\"panOnScrollMode\"in T&&n(11,We=T.panOnScrollMode),\"preventScrolling\"in T&&n(12,U=T.preventScrolling),\"zoomOnScroll\"in T&&n(13,Xe=T.zoomOnScroll),\"zoomOnDoubleClick\"in T&&n(14,Me=T.zoomOnDoubleClick),\"zoomOnPinch\"in T&&n(15,At=T.zoomOnPinch),\"panOnScroll\"in T&&n(16,Pt=T.panOnScroll),\"panOnDrag\"in T&&n(17,Nt=T.panOnDrag),\"selectionOnDrag\"in T&&n(18,je=T.selectionOnDrag),\"autoPanOnConnect\"in T&&n(55,kt=T.autoPanOnConnect),\"autoPanOnNodeDrag\"in T&&n(56,ie=T.autoPanOnNodeDrag),\"onerror\"in T&&n(57,Bt=T.onerror),\"ondelete\"in T&&n(58,Vt=T.ondelete),\"onedgecreate\"in T&&n(59,Zt=T.onedgecreate),\"attributionPosition\"in T&&n(19,J=T.attributionPosition),\"proOptions\"in T&&n(20,pt=T.proOptions),\"defaultEdgeOptions\"in T&&n(21,Q=T.defaultEdgeOptions),\"width\"in T&&n(60,xe=T.width),\"height\"in T&&n(61,tt=T.height),\"colorMode\"in T&&n(62,ut=T.colorMode),\"onconnect\"in T&&n(63,un=T.onconnect),\"onconnectstart\"in T&&n(64,fn=T.onconnectstart),\"onconnectend\"in T&&n(65,cn=T.onconnectend),\"onbeforedelete\"in T&&n(66,dn=T.onbeforedelete),\"oninit\"in T&&n(67,qt=T.oninit),\"defaultMarkerColor\"in T&&n(68,hn=T.defaultMarkerColor),\"style\"in T&&n(22,To=T.style),\"class\"in T&&n(23,Mo=T.class),\"$$scope\"in T&&n(95,g=T.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&50331648&&gn!==void 0&&mn!==void 0&&($e.width.set(gn),$e.height.set(mn)),t.$$.dirty[2]&416&&!wr&&s&&(qt==null||qt(),n(69,wr=!0)),t.$$.dirty[1]&532672516|t.$$.dirty[2]&94&&uy($e,{flowId:p,connectionLineType:se,connectionRadius:q,selectionMode:W,snapGrid:Y,defaultMarkerColor:hn,nodesDraggable:M,nodesConnectable:N,elementsSelectable:K,onlyRenderVisibleElements:De,isValidConnection:Ee,autoPanOnConnect:kt,autoPanOnNodeDrag:ie,onerror:Bt,ondelete:Vt,onedgecreate:Zt,connectionMode:oe,nodeDragThreshold:H,onconnect:un,onconnectstart:fn,onconnectend:cn,onbeforedelete:dn}),t.$$.dirty[1]&4197760&&Ns($e,{nodeTypes:O,edgeTypes:R,minZoom:I,maxZoom:v,translateExtent:Fe}),t.$$.dirty[2]&1&&d(n(27,i=cy(ut)))},[C,D,P,k,F,G,pe,Se,L,ve,Te,We,U,Xe,Me,At,Pt,Nt,je,J,pt,Q,To,Mo,gn,mn,fi,i,f,Qu,Ao,o,y,p,m,w,b,_,I,v,S,O,R,W,M,N,H,K,Y,q,se,oe,Ee,Fe,De,kt,ie,Bt,Vt,Zt,xe,tt,ut,un,fn,cn,dn,qt,hn,wr,s,h,xu,$u,ef,tf,nf,rf,of,sf,lf,af,uf,ff,cf,df,hf,gf,mf,yf,pf,bf,_f,wf,vf,g]}class _y extends ue{constructor(e){super(),ae(this,e,by,py,ce,{id:33,nodes:34,edges:35,fitView:36,fitViewOptions:37,minZoom:38,maxZoom:39,initialViewport:40,viewport:0,nodeTypes:41,edgeTypes:42,selectionKey:1,selectionMode:43,panActivationKey:2,multiSelectionKey:3,zoomActivationKey:4,nodesDraggable:44,nodesConnectable:45,nodeDragThreshold:46,elementsSelectable:47,snapGrid:48,deleteKey:5,connectionRadius:49,connectionLineType:50,connectionMode:51,connectionLineStyle:6,connectionLineContainerStyle:7,onMoveStart:8,onMove:9,onMoveEnd:10,isValidConnection:52,translateExtent:53,onlyRenderVisibleElements:54,panOnScrollMode:11,preventScrolling:12,zoomOnScroll:13,zoomOnDoubleClick:14,zoomOnPinch:15,panOnScroll:16,panOnDrag:17,selectionOnDrag:18,autoPanOnConnect:55,autoPanOnNodeDrag:56,onerror:57,ondelete:58,onedgecreate:59,attributionPosition:19,proOptions:20,defaultEdgeOptions:21,width:60,height:61,colorMode:62,onconnect:63,onconnectstart:64,onconnectend:65,onbeforedelete:66,oninit:67,defaultMarkerColor:68,style:22,class:23},null,[-1,-1,-1,-1])}}const wy=t=>({}),Ds=t=>({class:\"button-svg\"});function vy(t){let e,n,i,r,o;const s=t[8].default,l=ot(s,t,t[7],Ds);let a=[{type:\"button\"},{class:n=Ae([\"svelte-flow__controls-button\",t[0]])},t[6]],u={};for(let f=0;f<a.length;f+=1)u=we(u,a[f]);return{c(){e=Z(\"button\"),l&&l.c(),An(e,u),fe(e,\"--xy-controls-button-background-color-props\",t[1]),fe(e,\"--xy-controls-button-background-color-hover-props\",t[2]),fe(e,\"--xy-controls-button-color-props\",t[3]),fe(e,\"--xy-controls-button-color-hover-props\",t[4]),fe(e,\"--xy-controls-button-border-color-props\",t[5])},m(f,c){V(f,e,c),l&&l.m(e,null),e.autofocus&&e.focus(),i=!0,r||(o=de(e,\"click\",t[9]),r=!0)},p(f,[c]){l&&l.p&&(!i||c&128)&&lt(l,s,f,f[7],i?st(s,f[7],c,wy):at(f[7]),Ds),An(e,u=ct(a,[{type:\"button\"},(!i||c&1&&n!==(n=Ae([\"svelte-flow__controls-button\",f[0]])))&&{class:n},c&64&&f[6]])),fe(e,\"--xy-controls-button-background-color-props\",f[1]),fe(e,\"--xy-controls-button-background-color-hover-props\",f[2]),fe(e,\"--xy-controls-button-color-props\",f[3]),fe(e,\"--xy-controls-button-color-hover-props\",f[4]),fe(e,\"--xy-controls-button-border-color-props\",f[5])},i(f){i||(A(l,f),i=!0)},o(f){z(l,f),i=!1},d(f){f&&B(e),l&&l.d(f),r=!1,o()}}}function ky(t,e,n){const i=[\"class\"];let r=Le(e,i),{$$slots:o={},$$scope:s}=e,{class:l=void 0}=e,a,u,f,c,d;function h(g){_e.call(this,t,g)}return t.$$set=g=>{e=we(we({},e),yt(g)),n(6,r=Le(e,i)),\"class\"in g&&n(0,l=g.class),\"$$scope\"in g&&n(7,s=g.$$scope)},[l,a,u,f,c,d,r,s,o,h]}class xi extends ue{constructor(e){super(),ae(this,e,ky,vy,ce,{class:0})}}function Sy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),E(n,\"d\",\"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\"),E(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),E(e,\"viewBox\",\"0 0 32 32\")},m(i,r){V(i,e,r),X(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class Ey extends ue{constructor(e){super(),ae(this,e,null,Sy,ce,{})}}function Cy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),E(n,\"d\",\"M0 0h32v4.2H0z\"),E(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),E(e,\"viewBox\",\"0 0 32 5\")},m(i,r){V(i,e,r),X(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class Oy extends ue{constructor(e){super(),ae(this,e,null,Cy,ce,{})}}function Iy(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),E(n,\"d\",\"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\"),E(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),E(e,\"viewBox\",\"0 0 32 30\")},m(i,r){V(i,e,r),X(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class Ty extends ue{constructor(e){super(),ae(this,e,null,Iy,ce,{})}}function My(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),E(n,\"d\",\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\"),E(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),E(e,\"viewBox\",\"0 0 25 32\")},m(i,r){V(i,e,r),X(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class Ay extends ue{constructor(e){super(),ae(this,e,null,My,ce,{})}}function Py(t){let e,n;return{c(){e=Ce(\"svg\"),n=Ce(\"path\"),E(n,\"d\",\"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\"),E(e,\"xmlns\",\"http://www.w3.org/2000/svg\"),E(e,\"viewBox\",\"0 0 25 32\")},m(i,r){V(i,e,r),X(e,n)},p:le,i:le,o:le,d(i){i&&B(e)}}}class Ny extends ue{constructor(e){super(),ae(this,e,null,Py,ce,{})}}const Fy=t=>({}),Rs=t=>({}),Dy=t=>({}),zs=t=>({});function Ls(t){let e,n,i,r;const o=[{class:\"svelte-flow__controls-zoomin\"},{title:\"zoom in\"},{\"aria-label\":\"zoom in\"},{disabled:t[9]},t[17]];let s={$$slots:{default:[Ry]},$$scope:{ctx:t}};for(let u=0;u<o.length;u+=1)s=we(s,o[u]);e=new xi({props:s}),e.$on(\"click\",t[18]);const l=[{class:\"svelte-flow__controls-zoomout\"},{title:\"zoom out\"},{\"aria-label\":\"zoom out\"},{disabled:t[10]},t[17]];let a={$$slots:{default:[zy]},$$scope:{ctx:t}};for(let u=0;u<l.length;u+=1)a=we(a,l[u]);return i=new xi({props:a}),i.$on(\"click\",t[19]),{c(){te(e.$$.fragment),n=ne(),te(i.$$.fragment)},m(u,f){x(e,u,f),V(u,n,f),x(i,u,f),r=!0},p(u,f){const c=f[0]&131584?ct(o,[o[0],o[1],o[2],f[0]&512&&{disabled:u[9]},f[0]&131072&&Tt(u[17])]):{};f[1]&32&&(c.$$scope={dirty:f,ctx:u}),e.$set(c);const d=f[0]&132096?ct(l,[l[0],l[1],l[2],f[0]&1024&&{disabled:u[10]},f[0]&131072&&Tt(u[17])]):{};f[1]&32&&(d.$$scope={dirty:f,ctx:u}),i.$set(d)},i(u){r||(A(e.$$.fragment,u),A(i.$$.fragment,u),r=!0)},o(u){z(e.$$.fragment,u),z(i.$$.fragment,u),r=!1},d(u){u&&B(n),$(e,u),$(i,u)}}}function Ry(t){let e,n;return e=new Ey({}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function zy(t){let e,n;return e=new Oy({}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Hs(t){let e,n;const i=[{class:\"svelte-flow__controls-fitview\"},{title:\"fit view\"},{\"aria-label\":\"fit view\"},t[17]];let r={$$slots:{default:[Ly]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=we(r,i[o]);return e=new xi({props:r}),e.$on(\"click\",t[20]),{c(){te(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){const l=s[0]&131072?ct(i,[i[0],i[1],i[2],Tt(o[17])]):{};s[1]&32&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Ly(t){let e,n;return e=new Ty({}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Bs(t){let e,n;const i=[{class:\"svelte-flow__controls-interactive\"},{title:\"toggle interactivity\"},{\"aria-label\":\"toggle interactivity\"},t[17]];let r={$$slots:{default:[Vy]},$$scope:{ctx:t}};for(let o=0;o<i.length;o+=1)r=we(r,i[o]);return e=new xi({props:r}),e.$on(\"click\",t[21]),{c(){te(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){const l=s[0]&131072?ct(i,[i[0],i[1],i[2],Tt(o[17])]):{};s[0]&256|s[1]&32&&(l.$$scope={dirty:s,ctx:o}),e.$set(l)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function Hy(t){let e,n;return e=new Ay({}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function By(t){let e,n;return e=new Ny({}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Vy(t){let e,n,i,r;const o=[By,Hy],s=[];function l(a,u){return a[8]?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),i=Ve()},m(a,u){s[e].m(a,u),V(a,i,u),r=!0},p(a,u){let f=e;e=l(a),e!==f&&(Oe(),z(s[f],1,1,()=>{s[f]=null}),Ie(),n=s[e],n||(n=s[e]=o[e](a),n.c()),A(n,1),n.m(i.parentNode,i))},i(a){r||(A(n),r=!0)},o(a){z(n),r=!1},d(a){a&&B(i),s[e].d(a)}}}function qy(t){let e,n,i,r,o,s;const l=t[35].before,a=ot(l,t,t[36],zs);let u=t[1]&&Ls(t),f=t[2]&&Hs(t),c=t[3]&&Bs(t);const d=t[35].default,h=ot(d,t,t[36],null),g=t[35].after,y=ot(g,t,t[36],Rs);return{c(){a&&a.c(),e=ne(),u&&u.c(),n=ne(),f&&f.c(),i=ne(),c&&c.c(),r=ne(),h&&h.c(),o=ne(),y&&y.c()},m(p,m){a&&a.m(p,m),V(p,e,m),u&&u.m(p,m),V(p,n,m),f&&f.m(p,m),V(p,i,m),c&&c.m(p,m),V(p,r,m),h&&h.m(p,m),V(p,o,m),y&&y.m(p,m),s=!0},p(p,m){a&&a.p&&(!s||m[1]&32)&&lt(a,l,p,p[36],s?st(l,p[36],m,Dy):at(p[36]),zs),p[1]?u?(u.p(p,m),m[0]&2&&A(u,1)):(u=Ls(p),u.c(),A(u,1),u.m(n.parentNode,n)):u&&(Oe(),z(u,1,1,()=>{u=null}),Ie()),p[2]?f?(f.p(p,m),m[0]&4&&A(f,1)):(f=Hs(p),f.c(),A(f,1),f.m(i.parentNode,i)):f&&(Oe(),z(f,1,1,()=>{f=null}),Ie()),p[3]?c?(c.p(p,m),m[0]&8&&A(c,1)):(c=Bs(p),c.c(),A(c,1),c.m(r.parentNode,r)):c&&(Oe(),z(c,1,1,()=>{c=null}),Ie()),h&&h.p&&(!s||m[1]&32)&&lt(h,d,p,p[36],s?st(d,p[36],m,null):at(p[36]),null),y&&y.p&&(!s||m[1]&32)&&lt(y,g,p,p[36],s?st(g,p[36],m,Fy):at(p[36]),Rs)},i(p){s||(A(a,p),A(u),A(f),A(c),A(h,p),A(y,p),s=!0)},o(p){z(a,p),z(u),z(f),z(c),z(h,p),z(y,p),s=!1},d(p){p&&(B(e),B(n),B(i),B(r),B(o)),a&&a.d(p),u&&u.d(p),f&&f.d(p),c&&c.d(p),h&&h.d(p),y&&y.d(p)}}}function Wy(t){let e,n;return e=new po({props:{class:Ae([\"svelte-flow__controls\",t[7],t[6]]),position:t[0],\"data-testid\":\"svelte-flow__controls\",\"aria-label\":t[4]??\"Svelte Flow controls\",style:t[5],$$slots:{default:[qy]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&192&&(o.class=Ae([\"svelte-flow__controls\",i[7],i[6]])),r[0]&1&&(o.position=i[0]),r[0]&16&&(o[\"aria-label\"]=i[4]??\"Svelte Flow controls\"),r[0]&32&&(o.style=i[5]),r[0]&1806|r[1]&32&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Xy(t,e,n){let i,r,o,s,l,a,u,f,c,d,{$$slots:h={},$$scope:g}=e,{position:y=\"bottom-left\"}=e,{showZoom:p=!0}=e,{showFitView:m=!0}=e,{showLock:w=!0}=e,{buttonBgColor:b=void 0}=e,{buttonBgColorHover:_=void 0}=e,{buttonColor:I=void 0}=e,{buttonColorHover:v=void 0}=e,{buttonBorderColor:S=void 0}=e,{ariaLabel:C=void 0}=e,{style:O=void 0}=e,{orientation:R=\"vertical\"}=e,{fitViewOptions:D=void 0}=e,{class:W=\"\"}=e;const{zoomIn:P,zoomOut:k,fitView:F,viewport:M,minZoom:N,maxZoom:H,nodesDraggable:K,nodesConnectable:Y,elementsSelectable:G}=Ke();j(t,M,L=>n(30,a=L)),j(t,N,L=>n(31,u=L)),j(t,H,L=>n(29,l=L)),j(t,K,L=>n(34,d=L)),j(t,Y,L=>n(33,c=L)),j(t,G,L=>n(32,f=L));const q={bgColor:b,bgColorHover:_,color:I,colorHover:v,borderColor:S},se=()=>{P()},oe=()=>{k()},pe=()=>{F(D)},Se=()=>{n(8,i=!i),K.set(i),Y.set(i),G.set(i)};return t.$$set=L=>{\"position\"in L&&n(0,y=L.position),\"showZoom\"in L&&n(1,p=L.showZoom),\"showFitView\"in L&&n(2,m=L.showFitView),\"showLock\"in L&&n(3,w=L.showLock),\"buttonBgColor\"in L&&n(22,b=L.buttonBgColor),\"buttonBgColorHover\"in L&&n(23,_=L.buttonBgColorHover),\"buttonColor\"in L&&n(24,I=L.buttonColor),\"buttonColorHover\"in L&&n(25,v=L.buttonColorHover),\"buttonBorderColor\"in L&&n(26,S=L.buttonBorderColor),\"ariaLabel\"in L&&n(4,C=L.ariaLabel),\"style\"in L&&n(5,O=L.style),\"orientation\"in L&&n(27,R=L.orientation),\"fitViewOptions\"in L&&n(28,D=L.fitViewOptions),\"class\"in L&&n(6,W=L.class),\"$$scope\"in L&&n(36,g=L.$$scope)},t.$$.update=()=>{t.$$.dirty[1]&14&&n(8,i=d||c||f),t.$$.dirty[0]&1073741824|t.$$.dirty[1]&1&&n(10,r=a.zoom<=u),t.$$.dirty[0]&1610612736&&n(9,o=a.zoom>=l),t.$$.dirty[0]&134217728&&n(7,s=R===\"horizontal\"?\"horizontal\":\"vertical\")},[y,p,m,w,C,O,W,s,i,o,r,M,N,H,K,Y,G,q,se,oe,pe,Se,b,_,I,v,S,R,D,l,a,u,f,c,d,h,g]}class Yy extends ue{constructor(e){super(),ae(this,e,Xy,Wy,ce,{position:0,showZoom:1,showFitView:2,showLock:3,buttonBgColor:22,buttonBgColorHover:23,buttonColor:24,buttonColorHover:25,buttonBorderColor:26,ariaLabel:4,style:5,orientation:27,fitViewOptions:28,class:6},null,[-1,-1])}}var Yt;(function(t){t.Lines=\"lines\",t.Dots=\"dots\",t.Cross=\"cross\"})(Yt||(Yt={}));function Ky(t){let e,n;return{c(){e=Ce(\"circle\"),E(e,\"cx\",t[0]),E(e,\"cy\",t[0]),E(e,\"r\",t[0]),E(e,\"class\",n=Ae([\"svelte-flow__background-pattern\",\"dots\",t[1]]))},m(i,r){V(i,e,r)},p(i,[r]){r&1&&E(e,\"cx\",i[0]),r&1&&E(e,\"cy\",i[0]),r&1&&E(e,\"r\",i[0]),r&2&&n!==(n=Ae([\"svelte-flow__background-pattern\",\"dots\",i[1]]))&&E(e,\"class\",n)},i:le,o:le,d(i){i&&B(e)}}}function Jy(t,e,n){let{radius:i=5}=e,{class:r=\"\"}=e;return t.$$set=o=>{\"radius\"in o&&n(0,i=o.radius),\"class\"in o&&n(1,r=o.class)},[i,r]}class Uy extends ue{constructor(e){super(),ae(this,e,Jy,Ky,ce,{radius:0,class:1})}}function jy(t){let e,n,i;return{c(){e=Ce(\"path\"),E(e,\"stroke-width\",t[0]),E(e,\"d\",n=`M${t[1][0]/2} 0 V${t[1][1]} M0 ${t[1][1]/2} H${t[1][0]}`),E(e,\"class\",i=Ae([\"svelte-flow__background-pattern\",t[2],t[3]]))},m(r,o){V(r,e,o)},p(r,[o]){o&1&&E(e,\"stroke-width\",r[0]),o&2&&n!==(n=`M${r[1][0]/2} 0 V${r[1][1]} M0 ${r[1][1]/2} H${r[1][0]}`)&&E(e,\"d\",n),o&12&&i!==(i=Ae([\"svelte-flow__background-pattern\",r[2],r[3]]))&&E(e,\"class\",i)},i:le,o:le,d(r){r&&B(e)}}}function Gy(t,e,n){let{lineWidth:i=1}=e,{dimensions:r}=e,{variant:o=void 0}=e,{class:s=\"\"}=e;return t.$$set=l=>{\"lineWidth\"in l&&n(0,i=l.lineWidth),\"dimensions\"in l&&n(1,r=l.dimensions),\"variant\"in l&&n(2,o=l.variant),\"class\"in l&&n(3,s=l.class)},[i,r,o,s]}class Zy extends ue{constructor(e){super(),ae(this,e,Gy,jy,ce,{lineWidth:0,dimensions:1,variant:2,class:3})}}function Qy(t){let e,n;return e=new Zy({props:{dimensions:t[6],variant:t[0],lineWidth:t[1],class:t[4]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&64&&(o.dimensions=i[6]),r&1&&(o.variant=i[0]),r&2&&(o.lineWidth=i[1]),r&16&&(o.class=i[4]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function xy(t){let e,n;return e=new Uy({props:{radius:t[7]/2,class:t[4]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&128&&(o.radius=i[7]/2),r&16&&(o.class=i[4]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function $y(t){let e,n,i,r,o,s,l,a,u,f,c,d,h;const g=[xy,Qy],y=[];function p(m,w){return m[14]?0:1}return i=p(t),r=y[i]=g[i](t),{c(){e=Ce(\"svg\"),n=Ce(\"pattern\"),r.c(),f=Ce(\"rect\"),E(n,\"id\",t[11]),E(n,\"x\",o=t[9].x%t[8][0]),E(n,\"y\",s=t[9].y%t[8][1]),E(n,\"width\",l=t[8][0]),E(n,\"height\",a=t[8][1]),E(n,\"patternUnits\",\"userSpaceOnUse\"),E(n,\"patternTransform\",u=`translate(-${t[10][0]},-${t[10][1]})`),E(f,\"x\",\"0\"),E(f,\"y\",\"0\"),E(f,\"width\",\"100%\"),E(f,\"height\",\"100%\"),E(f,\"fill\",c=`url(#${t[11]})`),E(e,\"class\",d=No(Ae([\"svelte-flow__background\",t[5]]))+\" svelte-1r7pe8d\"),E(e,\"data-testid\",\"svelte-flow__background\"),fe(e,\"--xy-background-color-props\",t[2]),fe(e,\"--xy-background-pattern-color-props\",t[3])},m(m,w){V(m,e,w),X(e,n),y[i].m(n,null),X(e,f),h=!0},p(m,[w]){r.p(m,w),(!h||w&2048)&&E(n,\"id\",m[11]),(!h||w&768&&o!==(o=m[9].x%m[8][0]))&&E(n,\"x\",o),(!h||w&768&&s!==(s=m[9].y%m[8][1]))&&E(n,\"y\",s),(!h||w&256&&l!==(l=m[8][0]))&&E(n,\"width\",l),(!h||w&256&&a!==(a=m[8][1]))&&E(n,\"height\",a),(!h||w&1024&&u!==(u=`translate(-${m[10][0]},-${m[10][1]})`))&&E(n,\"patternTransform\",u),(!h||w&2048&&c!==(c=`url(#${m[11]})`))&&E(f,\"fill\",c),(!h||w&32&&d!==(d=No(Ae([\"svelte-flow__background\",m[5]]))+\" svelte-1r7pe8d\"))&&E(e,\"class\",d),w&4&&fe(e,\"--xy-background-color-props\",m[2]),w&8&&fe(e,\"--xy-background-pattern-color-props\",m[3])},i(m){h||(A(r),h=!0)},o(m){z(r),h=!1},d(m){m&&B(e),y[i].d()}}}const e1={[Yt.Dots]:1,[Yt.Lines]:1,[Yt.Cross]:6};function t1(t,e,n){let i,r,o,s,l,a,u,{id:f=void 0}=e,{variant:c=Yt.Dots}=e,{gap:d=20}=e,{size:h=1}=e,{lineWidth:g=1}=e,{bgColor:y=void 0}=e,{patternColor:p=void 0}=e,{patternClass:m=void 0}=e,{class:w=\"\"}=e;const{viewport:b,flowId:_}=Ke();j(t,b,O=>n(9,a=O)),j(t,_,O=>n(18,u=O));const I=h||e1[c],v=c===Yt.Dots,S=c===Yt.Cross,C=Array.isArray(d)?d:[d,d];return t.$$set=O=>{\"id\"in O&&n(15,f=O.id),\"variant\"in O&&n(0,c=O.variant),\"gap\"in O&&n(16,d=O.gap),\"size\"in O&&n(17,h=O.size),\"lineWidth\"in O&&n(1,g=O.lineWidth),\"bgColor\"in O&&n(2,y=O.bgColor),\"patternColor\"in O&&n(3,p=O.patternColor),\"patternClass\"in O&&n(4,m=O.patternClass),\"class\"in O&&n(5,w=O.class)},t.$$.update=()=>{t.$$.dirty&294912&&n(11,i=`background-pattern-${u}-${f||\"\"}`),t.$$.dirty&512&&n(8,r=[C[0]*a.zoom||1,C[1]*a.zoom||1]),t.$$.dirty&512&&n(7,o=I*a.zoom),t.$$.dirty&384&&n(6,s=S?[o,o]:r),t.$$.dirty&192&&n(10,l=v?[o/2,o/2]:[s[0]/2,s[1]/2])},[c,g,y,p,m,w,s,o,r,a,l,i,b,_,v,f,d,h,u]}class n1 extends ue{constructor(e){super(),ae(this,e,t1,$y,ce,{id:15,variant:0,gap:16,size:17,lineWidth:1,bgColor:2,patternColor:3,patternClass:4,class:5})}}function i1(t){let e,n,i;return{c(){e=Ce(\"rect\"),E(e,\"class\",n=Ae([\"svelte-flow__minimap-node\",t[10]])),E(e,\"x\",t[0]),E(e,\"y\",t[1]),E(e,\"rx\",t[4]),E(e,\"ry\",t[4]),E(e,\"width\",t[2]),E(e,\"height\",t[3]),E(e,\"style\",i=`${t[5]?`fill: ${t[5]};`:\"\"}${t[7]?`stroke: ${t[7]};`:\"\"}${t[8]?`stroke-width: ${t[8]};`:\"\"}`),E(e,\"shape-rendering\",t[6]),ge(e,\"selected\",t[9])},m(r,o){V(r,e,o)},p(r,[o]){o&1024&&n!==(n=Ae([\"svelte-flow__minimap-node\",r[10]]))&&E(e,\"class\",n),o&1&&E(e,\"x\",r[0]),o&2&&E(e,\"y\",r[1]),o&16&&E(e,\"rx\",r[4]),o&16&&E(e,\"ry\",r[4]),o&4&&E(e,\"width\",r[2]),o&8&&E(e,\"height\",r[3]),o&416&&i!==(i=`${r[5]?`fill: ${r[5]};`:\"\"}${r[7]?`stroke: ${r[7]};`:\"\"}${r[8]?`stroke-width: ${r[8]};`:\"\"}`)&&E(e,\"style\",i),o&64&&E(e,\"shape-rendering\",r[6]),o&1536&&ge(e,\"selected\",r[9])},i:le,o:le,d(r){r&&B(e)}}}function r1(t,e,n){let{x:i}=e,{y:r}=e,{width:o=0}=e,{height:s=0}=e,{borderRadius:l=5}=e,{color:a=void 0}=e,{shapeRendering:u}=e,{strokeColor:f=void 0}=e,{strokeWidth:c=2}=e,{selected:d=!1}=e,{class:h=\"\"}=e;return t.$$set=g=>{\"x\"in g&&n(0,i=g.x),\"y\"in g&&n(1,r=g.y),\"width\"in g&&n(2,o=g.width),\"height\"in g&&n(3,s=g.height),\"borderRadius\"in g&&n(4,l=g.borderRadius),\"color\"in g&&n(5,a=g.color),\"shapeRendering\"in g&&n(6,u=g.shapeRendering),\"strokeColor\"in g&&n(7,f=g.strokeColor),\"strokeWidth\"in g&&n(8,c=g.strokeWidth),\"selected\"in g&&n(9,d=g.selected),\"class\"in g&&n(10,h=g.class)},[i,r,o,s,l,a,u,f,c,d,h]}class o1 extends ue{constructor(e){super(),ae(this,e,r1,i1,ce,{x:0,y:1,width:2,height:3,borderRadius:4,color:5,shapeRendering:6,strokeColor:7,strokeWidth:8,selected:9,class:10})}}function s1(t,e){const n=tm({domNode:t,panZoom:e.panZoom,getTransform:()=>{const r=ee(e.viewport);return[r.x,r.y,r.zoom]},getViewScale:e.getViewScale});function i(r){n.update({translateExtent:r.translateExtent,width:r.width,height:r.height,inversePan:r.inversePan,zoomStep:r.zoomStep,pannable:r.pannable,zoomable:r.zoomable})}return{update:i,destroy(){n.destroy()}}}function Vs(t,e,n){const i=t.slice();i[55]=e[n];const r=i[20].get(i[55].id);return i[56]=r,i}function Ar(t){const e=t.slice(),n=zn(e[56]).positionAbsolute;e[59]=n;const i=ai(e[56]);return e[60]=i,e}function qs(t){let e,n,i=[],r=new Map,o,s,l,a,u,f,c,d=t[1]&&Ws(t),h=Pe(t[19]);const g=y=>y[55].id;for(let y=0;y<h.length;y+=1){let p=Vs(t,h,y),m=g(p);r.set(m,i[y]=Ys(m,p))}return{c(){e=Ce(\"svg\"),d&&d.c(),n=Ve();for(let y=0;y<i.length;y+=1)i[y].c();o=Ce(\"path\"),E(o,\"class\",\"svelte-flow__minimap-mask\"),E(o,\"d\",s=\"M\"+(t[26]-t[15])+\",\"+(t[25]-t[15])+\"h\"+(t[24]+t[15]*2)+\"v\"+(t[23]+t[15]*2)+\"h\"+(-t[24]-t[15]*2)+`z\n      M`+t[18].x+\",\"+t[18].y+\"h\"+t[18].width+\"v\"+t[18].height+\"h\"+-t[18].width+\"z\"),E(o,\"fill-rule\",\"evenodd\"),E(o,\"pointer-events\",\"none\"),E(e,\"width\",t[17]),E(e,\"height\",t[16]),E(e,\"viewBox\",l=t[26]+\" \"+t[25]+\" \"+t[24]+\" \"+t[23]),E(e,\"class\",\"svelte-flow__minimap-svg\"),E(e,\"role\",\"img\"),E(e,\"aria-labelledby\",t[41]),fe(e,\"--xy-minimap-mask-background-color-props\",t[5]),fe(e,\"--xy-minimap-mask-stroke-color-props\",t[6]),fe(e,\"--xy-minimap-mask-stroke-width-props\",t[7]?t[7]*t[14]:void 0)},m(y,p){V(y,e,p),d&&d.m(e,null),X(e,n);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);X(e,o),u=!0,f||(c=Ue(a=s1.call(null,e,{panZoom:t[27],viewport:t[31],getViewScale:t[42],translateExtent:t[28],width:t[22],height:t[21],inversePan:t[10],zoomStep:t[11],pannable:t[8],zoomable:t[9]})),f=!0)},p(y,p){y[1]?d?d.p(y,p):(d=Ws(y),d.c(),d.m(e,n)):d&&(d.d(1),d=null),p[0]&1572876|p[1]&960&&(h=Pe(y[19]),Oe(),i=lr(i,p,g,1,y,h,r,e,sr,Ys,o,Vs),Ie()),(!u||p[0]&126124032&&s!==(s=\"M\"+(y[26]-y[15])+\",\"+(y[25]-y[15])+\"h\"+(y[24]+y[15]*2)+\"v\"+(y[23]+y[15]*2)+\"h\"+(-y[24]-y[15]*2)+`z\n      M`+y[18].x+\",\"+y[18].y+\"h\"+y[18].width+\"v\"+y[18].height+\"h\"+-y[18].width+\"z\"))&&E(o,\"d\",s),(!u||p[0]&131072)&&E(e,\"width\",y[17]),(!u||p[0]&65536)&&E(e,\"height\",y[16]),(!u||p[0]&125829120&&l!==(l=y[26]+\" \"+y[25]+\" \"+y[24]+\" \"+y[23]))&&E(e,\"viewBox\",l),a&&Re(a.update)&&p[0]&408948480&&a.update.call(null,{panZoom:y[27],viewport:y[31],getViewScale:y[42],translateExtent:y[28],width:y[22],height:y[21],inversePan:y[10],zoomStep:y[11],pannable:y[8],zoomable:y[9]}),p[0]&32&&fe(e,\"--xy-minimap-mask-background-color-props\",y[5]),p[0]&64&&fe(e,\"--xy-minimap-mask-stroke-color-props\",y[6]),p[0]&16512&&fe(e,\"--xy-minimap-mask-stroke-width-props\",y[7]?y[7]*y[14]:void 0)},i(y){if(!u){for(let p=0;p<h.length;p+=1)A(i[p]);u=!0}},o(y){for(let p=0;p<i.length;p+=1)z(i[p]);u=!1},d(y){y&&B(e),d&&d.d();for(let p=0;p<i.length;p+=1)i[p].d();f=!1,c()}}}function Ws(t){let e,n;return{c(){e=Ce(\"title\"),n=ze(t[1]),E(e,\"id\",t[41])},m(i,r){V(i,e,r),X(e,n)},p(i,r){r[0]&2&&Qe(n,i[1])},d(i){i&&B(e)}}}function Xs(t){var o;let e,n;const i=[{x:t[59].x},{y:t[59].y},t[60],{selected:t[56].selected},{color:(o=t[37])==null?void 0:o.call(t,t[56])},{borderRadius:t[2]},{strokeColor:t[38](t[56])},{strokeWidth:t[3]},{shapeRendering:t[40]},{class:t[39](t[56])}];let r={};for(let s=0;s<i.length;s+=1)r=we(r,i[s]);return e=new o1({props:r}),{c(){te(e.$$.fragment)},m(s,l){x(e,s,l),n=!0},p(s,l){var u;const a=l[0]&1572876|l[1]&960?ct(i,[l[0]&1572864&&{x:s[59].x},l[0]&1572864&&{y:s[59].y},l[0]&1572864&&Tt(s[60]),l[0]&1572864&&{selected:s[56].selected},l[0]&1572864|l[1]&64&&{color:(u=s[37])==null?void 0:u.call(s,s[56])},l[0]&4&&{borderRadius:s[2]},l[0]&1572864|l[1]&128&&{strokeColor:s[38](s[56])},l[0]&8&&{strokeWidth:s[3]},l[1]&512&&{shapeRendering:s[40]},l[0]&1572864|l[1]&256&&{class:s[39](s[56])}]):{};e.$set(a)},i(s){n||(A(e.$$.fragment,s),n=!0)},o(s){z(e.$$.fragment,s),n=!1},d(s){$(e,s)}}}function Ys(t,e){let n,i=e[56]&&Zi(e[56]),r,o,s=i&&Xs(Ar(e));return{key:t,first:null,c(){n=Ve(),s&&s.c(),r=Ve(),this.first=n},m(l,a){V(l,n,a),s&&s.m(l,a),V(l,r,a),o=!0},p(l,a){e=l,a[0]&1572864&&(i=e[56]&&Zi(e[56])),i?s?(s.p(Ar(e),a),a[0]&1572864&&A(s,1)):(s=Xs(Ar(e)),s.c(),A(s,1),s.m(r.parentNode,r)):s&&(Oe(),z(s,1,1,()=>{s=null}),Ie())},i(l){o||(A(s),o=!0)},o(l){z(s),o=!1},d(l){l&&(B(n),B(r)),s&&s.d(l)}}}function l1(t){let e,n,i=t[27]&&qs(t);return{c(){i&&i.c(),e=Ve()},m(r,o){i&&i.m(r,o),V(r,e,o),n=!0},p(r,o){r[27]?i?(i.p(r,o),o[0]&134217728&&A(i,1)):(i=qs(r),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Oe(),z(i,1,1,()=>{i=null}),Ie())},i(r){n||(A(i),n=!0)},o(r){z(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function a1(t){let e,n;return e=new po({props:{position:t[0],style:t[12]+(t[4]?`;--xy-minimap-background-color-props:${t[4]}`:\"\"),class:Ae([\"svelte-flow__minimap\",t[13]]),\"data-testid\":\"svelte-flow__minimap\",$$slots:{default:[l1]},$$scope:{ctx:t}}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r[0]&1&&(o.position=i[0]),r[0]&4112&&(o.style=i[12]+(i[4]?`;--xy-minimap-background-color-props:${i[4]}`:\"\")),r[0]&8192&&(o.class=Ae([\"svelte-flow__minimap\",i[13]])),r[0]&536858606|r[1]&1073741824&&(o.$$scope={dirty:r,ctx:i}),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}const Pr=t=>t instanceof Function?t:()=>t,u1=200,f1=150;function c1(t,e,n){let i,r,o,s,l,a,u,f,c,d,h,g,y,p,m,w,b,_,I,v,S,{position:C=\"bottom-right\"}=e,{ariaLabel:O=\"Mini map\"}=e,{nodeStrokeColor:R=\"transparent\"}=e,{nodeColor:D=void 0}=e,{nodeClass:W=\"\"}=e,{nodeBorderRadius:P=5}=e,{nodeStrokeWidth:k=2}=e,{bgColor:F=void 0}=e,{maskColor:M=void 0}=e,{maskStrokeColor:N=void 0}=e,{maskStrokeWidth:H=void 0}=e,{width:K=void 0}=e,{height:Y=void 0}=e,{pannable:G=!0}=e,{zoomable:q=!0}=e,{inversePan:se=void 0}=e,{zoomStep:oe=void 0}=e,{style:pe=\"\"}=e,{class:Se=\"\"}=e;const{nodes:L,nodeLookup:ve,viewport:Te,width:Ee,height:Fe,flowId:De,panZoom:We,translateExtent:U}=Ke();j(t,L,ie=>n(19,p=ie)),j(t,ve,ie=>n(20,m=ie)),j(t,Te,ie=>n(53,w=ie)),j(t,Ee,ie=>n(22,_=ie)),j(t,Fe,ie=>n(21,b=ie)),j(t,De,ie=>n(54,I=ie)),j(t,We,ie=>n(27,v=ie)),j(t,U,ie=>n(28,S=ie));const Xe=D===void 0?void 0:Pr(D),Me=Pr(R),At=Pr(W),Pt=typeof window>\"u\"||window.chrome?\"crispEdges\":\"geometricPrecision\",Nt=`svelte-flow__minimap-desc-${I}`;let je=i;const kt=()=>a;return t.$$set=ie=>{\"position\"in ie&&n(0,C=ie.position),\"ariaLabel\"in ie&&n(1,O=ie.ariaLabel),\"nodeStrokeColor\"in ie&&n(43,R=ie.nodeStrokeColor),\"nodeColor\"in ie&&n(44,D=ie.nodeColor),\"nodeClass\"in ie&&n(45,W=ie.nodeClass),\"nodeBorderRadius\"in ie&&n(2,P=ie.nodeBorderRadius),\"nodeStrokeWidth\"in ie&&n(3,k=ie.nodeStrokeWidth),\"bgColor\"in ie&&n(4,F=ie.bgColor),\"maskColor\"in ie&&n(5,M=ie.maskColor),\"maskStrokeColor\"in ie&&n(6,N=ie.maskStrokeColor),\"maskStrokeWidth\"in ie&&n(7,H=ie.maskStrokeWidth),\"width\"in ie&&n(46,K=ie.width),\"height\"in ie&&n(47,Y=ie.height),\"pannable\"in ie&&n(8,G=ie.pannable),\"zoomable\"in ie&&n(9,q=ie.zoomable),\"inversePan\"in ie&&n(10,se=ie.inversePan),\"zoomStep\"in ie&&n(11,oe=ie.zoomStep),\"style\"in ie&&n(12,pe=ie.style),\"class\"in ie&&n(13,Se=ie.class)},t.$$.update=()=>{t.$$.dirty[0]&6291456|t.$$.dirty[1]&4194304&&n(18,i={x:-w.x/w.zoom,y:-w.y/w.zoom,width:_/w.zoom,height:b/w.zoom}),t.$$.dirty[0]&1835008&&n(48,je=m.size>0?Ca(co(m),i):i),t.$$.dirty[1]&32768&&n(17,r=K??u1),t.$$.dirty[1]&65536&&n(16,o=Y??f1),t.$$.dirty[0]&131072|t.$$.dirty[1]&131072&&n(52,s=je.width/r),t.$$.dirty[0]&65536|t.$$.dirty[1]&131072&&n(51,l=je.height/o),t.$$.dirty[1]&3145728&&n(14,a=Math.max(s,l)),t.$$.dirty[0]&147456&&n(50,u=a*r),t.$$.dirty[0]&81920&&n(49,f=a*o),t.$$.dirty[0]&16384&&n(15,c=5*a),t.$$.dirty[0]&32768|t.$$.dirty[1]&655360&&n(26,d=je.x-(u-je.width)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&393216&&n(25,h=je.y-(f-je.height)/2-c),t.$$.dirty[0]&32768|t.$$.dirty[1]&524288&&n(24,g=u+c*2),t.$$.dirty[0]&32768|t.$$.dirty[1]&262144&&n(23,y=f+c*2)},[C,O,P,k,F,M,N,H,G,q,se,oe,pe,Se,a,c,o,r,i,p,m,b,_,y,g,h,d,v,S,L,ve,Te,Ee,Fe,De,We,U,Xe,Me,At,Pt,Nt,kt,R,D,W,K,Y,je,f,u,l,s,w]}class d1 extends ue{constructor(e){super(),ae(this,e,c1,a1,ce,{position:0,ariaLabel:1,nodeStrokeColor:43,nodeColor:44,nodeClass:45,nodeBorderRadius:2,nodeStrokeWidth:3,bgColor:4,maskColor:5,maskStrokeColor:6,maskStrokeWidth:7,width:46,height:47,pannable:8,zoomable:9,inversePan:10,zoomStep:11,style:12,class:13},null,[-1,-1])}}var h1={};const Nr=Symbol.for(\"remult-static1\");let Pi={defaultRemultFactory:void 0,remultFactory:void 0,defaultRemult:void 0,asyncContext:void 0,columnsOfType:new Map,allEntities:[],classHelpers:new Map,actionInfo:{allActions:[],runningOnServer:!1,runActionWithoutBlockingUI:t=>t(),startBusyWithProgress:()=>({progress:t=>{},close:()=>{}})},captionTransformer:void 0,defaultDataProvider:()=>{}};typeof process<\"u\"&&h1.IGNORE_GLOBAL_REMULT_IN_TESTS||typeof globalThis[Nr]>\"u\"?(globalThis[Nr]=Pi,Pi.remultFactory=()=>Qa()):Pi=globalThis[Nr];const he=Pi;function Qa(){return he.defaultRemult||(he.defaultRemult=he.defaultRemultFactory()),he.defaultRemult}function g1(){he.remultFactory=()=>Qa()}function nn(t){const e=t;if(typeof e[ii]==\"function\")return e[ii]();throw Error(\"Error getting repository internal from \"+t)}const ii=Symbol.for(\"getInternal\");class m1{constructor(){this.iAmRemultProxy=!0,this.repoCache=new Map,this.repo=(...e)=>{let n=he,i=this.repoCache.get(e[0]);i||this.repoCache.set(e[0],i=new Map);let r=i.get(e[1]);return r||(r={get fields(){return he.remultFactory().repo(...e).metadata.fields},[ii](){return n.remultFactory().repo(...e)[ii]()},relations:o=>n.remultFactory().repo(...e).relations(o),validate:(o,...s)=>n.remultFactory().repo(...e).validate(o,...s),addEventListener:(...o)=>n.remultFactory().repo(...e).addEventListener(...o),count:(...o)=>n.remultFactory().repo(...e).count(...o),create:(...o)=>n.remultFactory().repo(...e).create(...o),delete:o=>n.remultFactory().repo(...e).delete(o),deleteMany:o=>n.remultFactory().repo(...e).deleteMany(o),updateMany:(...o)=>n.remultFactory().repo(...e).updateMany(...o),find:(...o)=>n.remultFactory().repo(...e).find(...o),findFirst:(...o)=>n.remultFactory().repo(...e).findFirst(...o),findOne:(...o)=>n.remultFactory().repo(...e).findOne(...o),findId:(o,s)=>n.remultFactory().repo(...e).findId(o,s),toJson:o=>n.remultFactory().repo(...e).toJson(o),fromJson:(o,s)=>n.remultFactory().repo(...e).fromJson(o,s),getEntityRef:(...o)=>n.remultFactory().repo(...e).getEntityRef(...o),insert:o=>n.remultFactory().repo(...e).insert(o),liveQuery:(...o)=>n.remultFactory().repo(...e).liveQuery(...o),get metadata(){return he.remultFactory().repo(...e).metadata},query:(...o)=>n.remultFactory().repo(...e).query(...o),save:o=>n.remultFactory().repo(...e).save(o),update:(o,s)=>n.remultFactory().repo(...e).update(o,s)},i.set(e[1],r),r)}}get liveQuerySubscriber(){return he.remultFactory().liveQuerySubscriber}set liveQuerySubscriber(e){he.remultFactory().liveQuerySubscriber=e}get liveQueryStorage(){return he.remultFactory().liveQueryStorage}set liveQueryStorage(e){he.remultFactory().liveQueryStorage=e}get liveQueryPublisher(){return he.remultFactory().liveQueryPublisher}set liveQueryPublisher(e){he.remultFactory().liveQueryPublisher=e}call(e,n,...i){return he.remultFactory().call(e,n,...i)}get context(){return he.remultFactory().context}get dataProvider(){return he.remultFactory().dataProvider}set dataProvider(e){he.remultFactory().dataProvider=e}get repCache(){return he.remultFactory().repCache}authenticated(){return he.remultFactory().authenticated()}isAllowed(e){return he.remultFactory().isAllowed(e)}isAllowedForInstance(e,n){return he.remultFactory().isAllowedForInstance(e,n)}clearAllCache(){return he.remultFactory().clearAllCache()}get user(){return he.remultFactory().user}set user(e){he.remultFactory().user=e}get apiClient(){return he.remultFactory().apiClient}set apiClient(e){he.remultFactory().apiClient=e}get subscriptionServer(){return he.remultFactory().subscriptionServer}set subscriptionServer(e){he.remultFactory().subscriptionServer=e}}const wt=new m1;var Ks=typeof globalThis<\"u\"?globalThis:typeof window<\"u\"?window:typeof global<\"u\"?global:typeof self<\"u\"?self:{},jt={},Ne={},et={};Object.defineProperty(et,\"__esModule\",{value:!0});et.output=et.exists=et.hash=et.bytes=et.bool=et.number=void 0;function $i(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}et.number=$i;function xa(t){if(typeof t!=\"boolean\")throw new Error(`Expected boolean, not ${t}`)}et.bool=xa;function bo(t,...e){if(!(t instanceof Uint8Array))throw new Error(\"Expected Uint8Array\");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}et.bytes=bo;function $a(t){if(typeof t!=\"function\"||typeof t.create!=\"function\")throw new Error(\"Hash should be wrapped by utils.wrapConstructor\");$i(t.outputLen),$i(t.blockLen)}et.hash=$a;function eu(t,e=!0){if(t.destroyed)throw new Error(\"Hash instance has been destroyed\");if(e&&t.finished)throw new Error(\"Hash#digest() has already been called\")}et.exists=eu;function tu(t,e){bo(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}et.output=tu;const y1={number:$i,bool:xa,bytes:bo,hash:$a,exists:eu,output:tu};et.default=y1;var me={};Object.defineProperty(me,\"__esModule\",{value:!0});me.add5L=me.add5H=me.add4H=me.add4L=me.add3H=me.add3L=me.add=me.rotlBL=me.rotlBH=me.rotlSL=me.rotlSH=me.rotr32L=me.rotr32H=me.rotrBL=me.rotrBH=me.rotrSL=me.rotrSH=me.shrSL=me.shrSH=me.toBig=me.split=me.fromBig=void 0;const vi=BigInt(2**32-1),Zr=BigInt(32);function _o(t,e=!1){return e?{h:Number(t&vi),l:Number(t>>Zr&vi)}:{h:Number(t>>Zr&vi)|0,l:Number(t&vi)|0}}me.fromBig=_o;function nu(t,e=!1){let n=new Uint32Array(t.length),i=new Uint32Array(t.length);for(let r=0;r<t.length;r++){const{h:o,l:s}=_o(t[r],e);[n[r],i[r]]=[o,s]}return[n,i]}me.split=nu;const iu=(t,e)=>BigInt(t>>>0)<<Zr|BigInt(e>>>0);me.toBig=iu;const ru=(t,e,n)=>t>>>n;me.shrSH=ru;const ou=(t,e,n)=>t<<32-n|e>>>n;me.shrSL=ou;const su=(t,e,n)=>t>>>n|e<<32-n;me.rotrSH=su;const lu=(t,e,n)=>t<<32-n|e>>>n;me.rotrSL=lu;const au=(t,e,n)=>t<<64-n|e>>>n-32;me.rotrBH=au;const uu=(t,e,n)=>t>>>n-32|e<<64-n;me.rotrBL=uu;const fu=(t,e)=>e;me.rotr32H=fu;const cu=(t,e)=>t;me.rotr32L=cu;const du=(t,e,n)=>t<<n|e>>>32-n;me.rotlSH=du;const hu=(t,e,n)=>e<<n|t>>>32-n;me.rotlSL=hu;const gu=(t,e,n)=>e<<n-32|t>>>64-n;me.rotlBH=gu;const mu=(t,e,n)=>t<<n-32|e>>>64-n;me.rotlBL=mu;function yu(t,e,n,i){const r=(e>>>0)+(i>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}me.add=yu;const pu=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);me.add3L=pu;const bu=(t,e,n,i)=>e+n+i+(t/2**32|0)|0;me.add3H=bu;const _u=(t,e,n,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0);me.add4L=_u;const wu=(t,e,n,i,r)=>e+n+i+r+(t/2**32|0)|0;me.add4H=wu;const vu=(t,e,n,i,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0)+(r>>>0);me.add5L=vu;const ku=(t,e,n,i,r,o)=>e+n+i+r+o+(t/2**32|0)|0;me.add5H=ku;const p1={fromBig:_o,split:nu,toBig:iu,shrSH:ru,shrSL:ou,rotrSH:su,rotrSL:lu,rotrBH:au,rotrBL:uu,rotr32H:fu,rotr32L:cu,rotlSH:du,rotlSL:hu,rotlBH:gu,rotlBL:mu,add:yu,add3L:pu,add3H:bu,add4L:_u,add4H:wu,add5H:ku,add5L:vu};me.default=p1;var Su={},br={};Object.defineProperty(br,\"__esModule\",{value:!0});br.crypto=void 0;br.crypto=typeof globalThis==\"object\"&&\"crypto\"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,\"__esModule\",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;const e=br,n=v=>v instanceof Uint8Array,i=v=>new Uint8Array(v.buffer,v.byteOffset,v.byteLength);t.u8=i;const r=v=>new Uint32Array(v.buffer,v.byteOffset,Math.floor(v.byteLength/4));t.u32=r;const o=v=>new DataView(v.buffer,v.byteOffset,v.byteLength);t.createView=o;const s=(v,S)=>v<<32-S|v>>>S;if(t.rotr=s,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error(\"Non little-endian hardware is not supported\");const l=Array.from({length:256},(v,S)=>S.toString(16).padStart(2,\"0\"));function a(v){if(!n(v))throw new Error(\"Uint8Array expected\");let S=\"\";for(let C=0;C<v.length;C++)S+=l[v[C]];return S}t.bytesToHex=a;function u(v){if(typeof v!=\"string\")throw new Error(\"hex string expected, got \"+typeof v);const S=v.length;if(S%2)throw new Error(\"padded hex string expected, got unpadded hex of length \"+S);const C=new Uint8Array(S/2);for(let O=0;O<C.length;O++){const R=O*2,D=v.slice(R,R+2),W=Number.parseInt(D,16);if(Number.isNaN(W)||W<0)throw new Error(\"Invalid byte sequence\");C[O]=W}return C}t.hexToBytes=u;const f=async()=>{};t.nextTick=f;async function c(v,S,C){let O=Date.now();for(let R=0;R<v;R++){C(R);const D=Date.now()-O;D>=0&&D<S||(await(0,t.nextTick)(),O+=D)}}t.asyncLoop=c;function d(v){if(typeof v!=\"string\")throw new Error(`utf8ToBytes expected string, got ${typeof v}`);return new Uint8Array(new TextEncoder().encode(v))}t.utf8ToBytes=d;function h(v){if(typeof v==\"string\"&&(v=d(v)),!n(v))throw new Error(`expected Uint8Array, got ${typeof v}`);return v}t.toBytes=h;function g(...v){const S=new Uint8Array(v.reduce((O,R)=>O+R.length,0));let C=0;return v.forEach(O=>{if(!n(O))throw new Error(\"Uint8Array expected\");S.set(O,C),C+=O.length}),S}t.concatBytes=g;class y{clone(){return this._cloneInto()}}t.Hash=y;const p={}.toString;function m(v,S){if(S!==void 0&&p.call(S)!==\"[object Object]\")throw new Error(\"Options should be object or undefined\");return Object.assign(v,S)}t.checkOpts=m;function w(v){const S=O=>v().update(h(O)).digest(),C=v();return S.outputLen=C.outputLen,S.blockLen=C.blockLen,S.create=()=>v(),S}t.wrapConstructor=w;function b(v){const S=(O,R)=>v(R).update(h(O)).digest(),C=v({});return S.outputLen=C.outputLen,S.blockLen=C.blockLen,S.create=O=>v(O),S}t.wrapConstructorWithOpts=b;function _(v){const S=(O,R)=>v(R).update(h(O)).digest(),C=v({});return S.outputLen=C.outputLen,S.blockLen=C.blockLen,S.create=O=>v(O),S}t.wrapXOFConstructorWithOpts=_;function I(v=32){if(e.crypto&&typeof e.crypto.getRandomValues==\"function\")return e.crypto.getRandomValues(new Uint8Array(v));throw new Error(\"crypto.getRandomValues must be defined\")}t.randomBytes=I})(Su);Object.defineProperty(Ne,\"__esModule\",{value:!0});Ne.shake256=Ne.shake128=Ne.keccak_512=Ne.keccak_384=Ne.keccak_256=Ne.keccak_224=Ne.sha3_512=Ne.sha3_384=Ne.sha3_256=Ne.sha3_224=Ne.Keccak=Ne.keccakP=void 0;const bn=et,ri=me,Jn=Su,[Eu,Cu,Ou]=[[],[],[]],b1=BigInt(0),Vn=BigInt(1),_1=BigInt(2),w1=BigInt(7),v1=BigInt(256),k1=BigInt(113);for(let t=0,e=Vn,n=1,i=0;t<24;t++){[n,i]=[i,(2*n+3*i)%5],Eu.push(2*(5*i+n)),Cu.push((t+1)*(t+2)/2%64);let r=b1;for(let o=0;o<7;o++)e=(e<<Vn^(e>>w1)*k1)%v1,e&_1&&(r^=Vn<<(Vn<<BigInt(o))-Vn);Ou.push(r)}const[S1,E1]=(0,ri.split)(Ou,!0),Js=(t,e,n)=>n>32?(0,ri.rotlBH)(t,e,n):(0,ri.rotlSH)(t,e,n),Us=(t,e,n)=>n>32?(0,ri.rotlBL)(t,e,n):(0,ri.rotlSL)(t,e,n);function Iu(t,e=24){const n=new Uint32Array(10);for(let i=24-e;i<24;i++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const l=(s+8)%10,a=(s+2)%10,u=n[a],f=n[a+1],c=Js(u,f,1)^n[l],d=Us(u,f,1)^n[l+1];for(let h=0;h<50;h+=10)t[s+h]^=c,t[s+h+1]^=d}let r=t[2],o=t[3];for(let s=0;s<24;s++){const l=Cu[s],a=Js(r,o,l),u=Us(r,o,l),f=Eu[s];r=t[f],o=t[f+1],t[f]=a,t[f+1]=u}for(let s=0;s<50;s+=10){for(let l=0;l<10;l++)n[l]=t[s+l];for(let l=0;l<10;l++)t[s+l]^=~n[(l+2)%10]&n[(l+4)%10]}t[0]^=S1[i],t[1]^=E1[i]}n.fill(0)}Ne.keccakP=Iu;class ui extends Jn.Hash{constructor(e,n,i,r=!1,o=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=i,this.enableXOF=r,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,bn.number)(i),0>=this.blockLen||this.blockLen>=200)throw new Error(\"Sha3 supports only keccak-f1600 function\");this.state=new Uint8Array(200),this.state32=(0,Jn.u32)(this.state)}keccak(){Iu(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,bn.exists)(this);const{blockLen:n,state:i}=this;e=(0,Jn.toBytes)(e);const r=e.length;for(let o=0;o<r;){const s=Math.min(n-this.pos,r-o);for(let l=0;l<s;l++)i[this.pos++]^=e[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:i,blockLen:r}=this;e[i]^=n,n&128&&i===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,bn.exists)(this,!1),(0,bn.bytes)(e),this.finish();const n=this.state,{blockLen:i}=this;for(let r=0,o=e.length;r<o;){this.posOut>=i&&this.keccak();const s=Math.min(i-this.posOut,o-r);e.set(n.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error(\"XOF is not possible for this instance\");return this.writeInto(e)}xof(e){return(0,bn.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,bn.output)(e,this),this.finished)throw new Error(\"digest() was already called\");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:i,outputLen:r,rounds:o,enableXOF:s}=this;return e||(e=new ui(n,i,r,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=i,e.outputLen=r,e.enableXOF=s,e.destroyed=this.destroyed,e}}Ne.Keccak=ui;const Gt=(t,e,n)=>(0,Jn.wrapConstructor)(()=>new ui(e,t,n));Ne.sha3_224=Gt(6,144,224/8);Ne.sha3_256=Gt(6,136,256/8);Ne.sha3_384=Gt(6,104,384/8);Ne.sha3_512=Gt(6,72,512/8);Ne.keccak_224=Gt(1,144,224/8);Ne.keccak_256=Gt(1,136,256/8);Ne.keccak_384=Gt(1,104,384/8);Ne.keccak_512=Gt(1,72,512/8);const Tu=(t,e,n)=>(0,Jn.wrapXOFConstructorWithOpts)((i={})=>new ui(e,t,i.dkLen===void 0?n:i.dkLen,!0));Ne.shake128=Tu(31,168,128/8);Ne.shake256=Tu(31,136,256/8);const{sha3_512:C1}=Ne,Mu=24,Un=32,Qr=(t=4,e=Math.random)=>{let n=\"\";for(;n.length<t;)n=n+Math.floor(e()*36).toString(36);return n};function Au(t){let e=8n,n=0n;for(const i of t.values()){const r=BigInt(i);n=(n<<e)+r}return n}const Pu=(t=\"\")=>Au(C1(t)).toString(36).slice(1),js=Array.from({length:26},(t,e)=>String.fromCharCode(e+97)),O1=t=>js[Math.floor(t()*js.length)],Nu=({globalObj:t=typeof Ks<\"u\"?Ks:typeof window<\"u\"?window:{},random:e=Math.random}={})=>{const n=Object.keys(t).toString(),i=n.length?n+Qr(Un,e):Qr(Un,e);return Pu(i).substring(0,Un)},Fu=t=>()=>t++,I1=476782367,Du=({random:t=Math.random,counter:e=Fu(Math.floor(t()*I1)),length:n=Mu,fingerprint:i=Nu({random:t})}={})=>function(){const o=O1(t),s=Date.now().toString(36),l=e().toString(36),a=Qr(n,t),u=`${s+a+l+i}`;return`${o+Pu(u).substring(1,n)}`},T1=Du(),M1=(t,{minLength:e=2,maxLength:n=Un}={})=>{const i=t.length,r=/^[0-9a-z]+$/;try{if(typeof t==\"string\"&&i>=e&&i<=n&&r.test(t))return!0}finally{}return!1};jt.getConstants=()=>({defaultLength:Mu,bigLength:Un});jt.init=Du;jt.createId=T1;jt.bufToBigInt=Au;jt.createCounter=Fu;jt.createFingerprint=Nu;jt.isCuid=M1;const{createId:A1,init:vb,getConstants:kb,isCuid:Sb}=jt;var Gs=A1,ki,P1=new Uint8Array(16);function N1(){if(!ki&&(ki=typeof crypto<\"u\"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<\"u\"&&typeof msCrypto.getRandomValues==\"function\"&&msCrypto.getRandomValues.bind(msCrypto),!ki))throw new Error(\"crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported\");return ki(P1)}const F1=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function D1(t){return typeof t==\"string\"&&F1.test(t)}var Je=[];for(var Fr=0;Fr<256;++Fr)Je.push((Fr+256).toString(16).substr(1));function R1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Je[t[e+0]]+Je[t[e+1]]+Je[t[e+2]]+Je[t[e+3]]+\"-\"+Je[t[e+4]]+Je[t[e+5]]+\"-\"+Je[t[e+6]]+Je[t[e+7]]+\"-\"+Je[t[e+8]]+Je[t[e+9]]+\"-\"+Je[t[e+10]]+Je[t[e+11]]+Je[t[e+12]]+Je[t[e+13]]+Je[t[e+14]]+Je[t[e+15]]).toLowerCase();if(!D1(n))throw TypeError(\"Stringified UUID is invalid\");return n}function xr(t,e,n){t=t||{};var i=t.random||(t.rng||N1)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,R1(i)}const Dt=class Dt{};Dt.number=\"number\",Dt.date=\"date\",Dt.checkbox=\"checkbox\",Dt.password=\"password\",Dt.email=\"email\",Dt.tel=\"tel\",Dt.time=\"time\";let jn=Dt;const be=class be{};be.Date={toJson:e=>{if(e===null)return null;if(!e)return\"\";if(typeof e==\"string\"&&(e=new Date(e)),e instanceof Date)return e.toISOString();throw new Error(\"Expected date but got \"+e)},fromJson:e=>{if(e===null)return null;if(e!=null&&e!=\"\"&&!e.startsWith(\"0000-00-00\"))return new Date(Date.parse(e))},toDb:e=>e,fromDb:e=>{if(typeof e==\"number\"&&(e=new Date(e)),typeof e==\"string\"&&(e=new Date(e)),e&&!(e instanceof Date))throw\"expected date but got \"+e;return e},fromInput:e=>be.Date.fromJson(e),toInput:e=>be.Date.toJson(e),displayValue:e=>e?e.toLocaleString():\"\"},be.DateOnly={fromInput:e=>be.DateOnly.fromJson(e),toInput:e=>be.DateOnly.toJson(e),toJson:e=>{var n=e;return(typeof n==\"string\"||typeof n==\"number\")&&(n=new Date(n)),!n||n==null?null:n.getHours()==0?new Date(n.valueOf()-n.getTimezoneOffset()*6e4).toISOString().substring(0,10):n.toISOString().substring(0,10)},fromJson:e=>{if(!e||e==\"\"||e==\"0000-00-00\")return null;let n=new Date(Date.parse(e));return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},inputType:jn.date,toDb:e=>e?be.DateOnly.fromJson(be.DateOnly.toJson(e)):null,fromDb:e=>be.Date.fromDb(e),fieldTypeInDb:\"date\",displayValue:e=>e?e.toLocaleDateString(void 0):\"\"},be.DateOnlyString={...be.DateOnly,toDb:e=>{let n=be.DateOnly.toJson(e);if(n)return n.replace(/-/g,\"\")},fromDb:e=>{if(e===null)return null;if(e)return new Date(e.substring(0,4)+\"-\"+e.substring(4,6)+\"-\"+e.substring(6,8))}},be.Boolean={toDb:e=>e,inputType:jn.checkbox,fromDb:e=>be.Boolean.fromJson(e),fromJson:e=>typeof e==\"boolean\"?e:e===1?!0:e!=null?e.toString().trim().toLowerCase()==\"true\":e,toJson:e=>e,fromInput:e=>be.Boolean.fromJson(e),toInput:e=>be.Boolean.toJson(e)},be.Number={fromDb:e=>{if(e===null)return null;if(e!==void 0)return+e},toDb:e=>e,fromJson:e=>be.Number.fromDb(e),toJson:e=>be.Number.toDb(e),fromInput:(e,n)=>{let i=+e;if(e!=null)return i},toInput:(e,n)=>e==null?void 0:e.toString(),inputType:jn.number},be.String={fromDb:_n,toDb:_n,fromJson:_n,toJson:_n,fromInput:_n,toInput:_n},be.Integer={...be.Number,toJson:e=>{let n=be.Number.toDb(e);return n&&+(+n).toFixed(0)},toDb:e=>be.Integer.toJson(e),fieldTypeInDb:\"integer\"},be.Default={fromJson:e=>e,toJson:e=>e,fromDb:e=>be.JsonString.fromDb(e),toDb:e=>be.JsonString.toDb(e),fromInput:e=>be.Default.fromJson(e),toInput:e=>be.Default.toJson(e),displayValue:e=>e+\"\",fieldTypeInDb:\"\",inputType:\"text\"},be.JsonString={fromJson:e=>e,toJson:e=>e,fromDb:e=>e==null?null:e?JSON.parse(be.JsonString.fromJson(e)):void 0,toDb:e=>e!==void 0?e===null?null:JSON.stringify(be.JsonString.toJson(e)):void 0,fromInput:e=>be.JsonString.fromJson(e),toInput:e=>be.JsonString.toJson(e)},be.JsonValue={fromJson:e=>e,toJson:e=>e,fromDb:e=>e,toDb:e=>e,fromInput:e=>be.JsonString.fromJson(e),toInput:e=>be.JsonString.toJson(e),fieldTypeInDb:\"json\"};let Ze=be;function _n(t){return t==null?t:typeof t!=\"string\"?t.toString():t}function Be(t,e=!0){var i;let n=t[vn];if(!n&&e)throw new Error(\"item \"+(((i=t.constructor)==null?void 0:i.name)||t)+\" was not initialized using a context\");return n}const vn=Symbol.for(\"entityMember\"),Ru=Symbol.for(\"entityInfo\"),zu=Symbol.for(\"entityInfo_key\");function mt(t,e=!0){if(t===void 0){if(e)throw new Error(\"Undefined is not an entity :)\");return}let n=t[Ru];if(!n&&e)throw new Error(t.prototype.constructor.name+\" is not a known entity, did you forget to set @Entity() or did you forget to add the '@' before the call to Entity?\");return n}function z1(t){return t[zu]}function L1(t){return t.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase()).replace(\"Email\",\"eMail\").replace(\" I D\",\" ID\")}class H1{constructor(e,n,i){this.repository=e,this.isReferenceRelation=n,this.allowNull=i}toJson(){if(this.storedItem)return this.item===null?null:this.repository.toJson(this.item)}setId(e){this.repository.metadata.idMetadata.field.valueType==Number&&(e=+e),this.id=e}waitLoadOf(e){return e==null?null:nn(this.repository)._getCachedByIdAsync(e,!1)}get(e){if(e==null)return null;const n=nn(this.repository)._getCachedById(e,this.isReferenceRelation);return this.isReferenceRelation&&!this.storedItem?!this.allowNull&&(this.id===0||this.id===\"\")?null:void 0:n}set(e){if(e===null&&!this.allowNull&&this.isReferenceRelation&&(this.id==0||this.id==\"\")){this.storedItem={item:null};return}if(this.storedItem=void 0,e)if(typeof e==\"string\"||typeof e==\"number\")this.id=e;else{let n=Be(e,!1);n&&!this.isReferenceRelation?(nn(this.repository)._addToCache(e),this.id=n.getId()):(this.storedItem={item:e},this.id=e[this.repository.metadata.idMetadata.field.key])}else e===null?this.id=null:this.id=void 0}get item(){return this.storedItem?this.storedItem.item:this.get(this.id)}async waitLoad(){return this.waitLoadOf(this.id)}}class $t{constructor(...e){this.fields=e}apiUpdateAllowed(e){throw new Error(\"Method not implemented.\")}displayValue(e){throw new Error(\"Method not implemented.\")}includedInApi(e){throw new Error(\"Method not implemented.\")}toInput(e,n){throw new Error(\"Method not implemented.\")}fromInput(e,n){throw new Error(\"Method not implemented.\")}getDbName(){return Promise.resolve(\"\")}getId(e){let n=r=>e[r.key];typeof e==\"function\"&&(n=e);let i=\"\";return this.fields.forEach(r=>{i.length>0&&(i+=\",\"),i+=r.valueConverter.toJson(n(r))}),i}get valueConverter(){throw new Error(\"cant get value converter of compound id\")}isEqualTo(e){let n={},r=e.toString().split(\",\");return this.fields.forEach((o,s)=>{n[o.key]=o.valueConverter.fromJson(r[s])}),n}}class Zs{constructor(e){this.url=e}add(e,n){this.url.indexOf(\"?\")>=0?this.url+=\"&\":this.url+=\"?\",this.url+=encodeURIComponent(e)+\"=\"+encodeURIComponent(n)}addObject(e,n=\"\"){if(e!=null)for(var i in e){let r=e[i];this.add(i+n,r)}}}const Lu={error500RetryCount:4};function _r(t){if(!t)return new xs;let e;return e||Hu(t)&&(e=new B1(t)),e||typeof t==\"function\"&&(e=new xs(t)),e}function Hu(t){let e=t;return!!(e&&e.get&&e.put&&e.post&&e.delete)}class B1{constructor(e){this.http=e}async post(e,n){return await er(()=>Si(this.http.post(e,n)))}delete(e){return Si(this.http.delete(e))}put(e,n){return Si(this.http.put(e,n))}async get(e){return await er(()=>Si(this.http.get(e)))}}async function er(t){var n,i,r,o;let e=0;for(;;)try{return await t()}catch(s){if(((n=s.message)!=null&&n.startsWith(\"Error occurred while trying to proxy\")||(i=s.message)!=null&&i.startsWith(\"Error occured while trying to proxy\")||(r=s.message)!=null&&r.includes(\"http proxy error\")||(o=s.message)!=null&&o.startsWith(\"Gateway Timeout\")||s.status==500)&&e++<Lu.error500RetryCount){await new Promise((l,a)=>{setTimeout(()=>{l({})},500)});continue}throw s}}function Si(t){let e;return t.toPromise!==void 0?e=t.toPromise():e=t,e.then(n=>n&&(n.status==200||n.status==201)&&n.headers&&n.request&&n.data?n.data:n).catch(async n=>{throw await V1(n)})}async function V1(t){var o,s,l;let e=await t;var n;e.error?n=e.error:e.isAxiosError&&(typeof((o=e.response)==null?void 0:o.data)==\"string\"?n=e.response.data:n=(s=e==null?void 0:e.response)==null?void 0:s.data),n||(n=e.message),e.status==0&&e.error.isTrusted&&(n=\"Network Error\"),typeof n==\"string\"&&(n={message:n}),e.modelState&&(n.modelState=e.modelState);let i=e.status;i===void 0&&(i=(l=e.response)==null?void 0:l.status),i!=null&&(n.httpStatusCode=i);var r=Object.assign(n,{});return r}const q1=Symbol.for(\"relationInfo\");function W1(t){return t==null?void 0:t[q1]}const $r=Symbol.for(\"fieldRelationInfo\");function He(t){return t[$r]}function X1(t,e,n){for(const i of t.fields.toArray()){const r=W1(i.options);if(r&&!i[$r]){const o=r.toType(),s=e.repo(o,n),l=i.options;i[$r]={type:r.type,toEntity:o,options:l,toRepo:s,getFields:()=>{let a=l.field,u={fields:l.fields,compoundIdField:void 0};function f(h){return Error(`Error for relation: \"${i.key}\" to \"${s.metadata.key}\": `+h)}let c=()=>a||u.fields;if(r.type===\"toMany\"&&!c()){for(const h of s.fields.toArray())if(!c()){const g=He(h),y=h.options;if(g&&g.toEntity===t.metadata.entityType){if(g.type===\"reference\")a=h.key;else if(g.type===\"toOne\"){if(y.field)a=y.field;else if(y.fields){let p={};for(const m in y.fields)if(Object.prototype.hasOwnProperty.call(y.fields,m)){const w=y.fields[m];p[w]=m}u.fields=p}}}}if(!c())throw f(\"No matching field found on target. Please specify field/fields\")}function d(h,g){const y=g.fields.find(h);if(!y)throw f(`Field \"${h}\" was not found in \"${g.key}\".`);return y}r.type===\"reference\"&&(a=i.key),a&&(r.type===\"toOne\"||r.type===\"reference\"?s.metadata.idMetadata.field instanceof $t?u.compoundIdField=a:u.fields={[s.metadata.idMetadata.field.key]:a}:t.metadata.idMetadata.field instanceof $t?u.compoundIdField=a:u.fields={[a]:t.metadata.idMetadata.field.key});for(const h in u.fields)Object.prototype.hasOwnProperty.call(u.fields,h)&&(d(h,s.metadata),d(u.fields[h],t.metadata));return u}}}}}let ke=class ht{constructor(e){this.apply=e}static throwErrorIfFilterIsEmpty(e,n){if(ht.isFilterEmpty(e))throw{message:`${n}: requires a filter to protect against accidental delete/update of all rows`,httpStatusCode:400}}static isFilterEmpty(e){if(e.$and){for(const n of e.$and)if(!ht.isFilterEmpty(n))return!1}if(e.$or){for(const n of e.$or)if(ht.isFilterEmpty(n))return!0;return!1}return Object.keys(e).filter(n=>![\"$or\",\"$and\"].includes(n)).length==0}static async getPreciseValues(e,n){const i=new nr;return await ht.fromEntityFilter(e,n).__applyToConsumer(i),i.preciseValues}async getPreciseValues(){const e=new nr;return await this.__applyToConsumer(e),e.preciseValues}static createCustom(e,n=\"\"){let i={key:n,rawFilterTranslator:e};return Object.assign(r=>{if(r==null&&(r={}),!i.key)throw\"Usage of custom filter before a key was assigned to it\";return{[rn+i.key]:r}},{rawFilterInfo:i})}static entityFilterToJson(e,n){return ht.fromEntityFilter(e,n).toJson()}static entityFilterFromJson(e,n){return Vu(e,{get:i=>n[i]})}static fromEntityFilter(e,n){let i=[];for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){let o=n[r];if(r==\"$or\")i.push(new J1(...o.map(s=>ht.fromEntityFilter(e,s))));else if(r==\"$and\")i.push(new Qs(...o.map(s=>ht.fromEntityFilter(e,s))));else if(r.startsWith(rn))i.push(new ht(s=>{s.custom(r.substring(rn.length),o)}));else if(r==Bu)i.push(new ht(s=>s.databaseCustom(o)));else{const s=e.fields[r],l=He(s),a=s.options;let u=(l==null?void 0:l.type)===\"toOne\"?a.fields?new K1(s,e.fields,a):new Y1(e.fields[a.field]):new tr(s),f=!1;if(o!==void 0&&o!=null){o.$id!==void 0&&(o=o.$id);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c];switch(c){case\"$gte\":case\">=\":i.push(u.isGreaterOrEqualTo(d)),f=!0;break;case\"$gt\":case\">\":i.push(u.isGreaterThan(d)),f=!0;break;case\"$lte\":case\"<=\":i.push(u.isLessOrEqualTo(d)),f=!0;break;case\"$lt\":case\"<\":i.push(u.isLessThan(d)),f=!0;break;case\"$ne\":case\"!=\":case\"$nin\":f=!0,Array.isArray(d)?i.push(u.isNotIn(d)):i.push(u.isDifferentFrom(d));break;case\"$in\":f=!0,i.push(u.isIn(d));break;case\"$contains\":f=!0,i.push(u.contains(d));break;case\"$notContains\":f=!0,i.push(u.notContains(d));break}}Array.isArray(o)&&(f=!0,i.push(u.isIn(o)))}!f&&o!==void 0&&i.push(u.isEqualTo(o))}}return new Qs(...i)}__applyToConsumer(e){this.apply(e)}static async resolve(e){return typeof e==\"function\"?await e():e}toJson(){let e=new wo;return this.__applyToConsumer(e),e.result}static async translateCustomWhere(e,n,i){let r=new vo(async(o,s)=>{let l=[];for(const a in n.entityType){const u=n.entityType[a];u&&u.rawFilterInfo&&u.rawFilterInfo.rawFilterTranslator&&u.rawFilterInfo.key==o&&l.push(await ht.fromEntityFilter(n,await u.rawFilterInfo.rawFilterTranslator(s,i)))}return l});return e.__applyToConsumer(r),await r.resolve(),e=new ht(o=>r.applyTo(o)),e}};class tr{constructor(e){this.metadata=e}processVal(e){if(mt(this.metadata.valueType,!1)){if(e==null){if(e===null&&!this.metadata.allowNull){const i=He(this.metadata);if((i==null?void 0:i.type)===\"reference\")return i.toRepo.metadata.idMetadata.field.options.valueType===Number?0:\"\"}return null}return typeof e==\"string\"||typeof e==\"number\"?e:Be(e).getId()}return e}contains(e){return new ke(n=>n.containsCaseInsensitive(this.metadata,e))}notContains(e){return new ke(n=>n.notContainsCaseInsensitive(this.metadata,e))}isLessThan(e){return e=this.processVal(e),new ke(n=>n.isLessThan(this.metadata,e))}isGreaterOrEqualTo(e){return e=this.processVal(e),new ke(n=>n.isGreaterOrEqualTo(this.metadata,e))}isNotIn(e){return new ke(n=>{for(const i of e)n.isDifferentFrom(this.metadata,this.processVal(i))})}isDifferentFrom(e){return e=this.processVal(e),e==null&&this.metadata.allowNull?new ke(n=>n.isNotNull(this.metadata)):new ke(n=>n.isDifferentFrom(this.metadata,e))}isLessOrEqualTo(e){return e=this.processVal(e),new ke(n=>n.isLessOrEqualTo(this.metadata,e))}isGreaterThan(e){return e=this.processVal(e),new ke(n=>n.isGreaterThan(this.metadata,e))}isEqualTo(e){return e=this.processVal(e),e==null&&this.metadata.allowNull?new ke(n=>n.isNull(this.metadata)):new ke(n=>n.isEqualTo(this.metadata,e))}isIn(e){return e=e.map(n=>this.processVal(n)),(e==null?void 0:e.length)==1&&e[0]!=null&&e[0]!==null?new ke(n=>n.isEqualTo(this.metadata,e[0])):new ke(n=>n.isIn(this.metadata,e))}}class Y1 extends tr{processVal(e){return e?typeof e==\"string\"||typeof e==\"number\"?e:Be(e).getId():null}}class K1{constructor(e,n,i){this.metadata=e,this.fields=n,this.relationOptions=i}processVal(e){throw new Error(\"Invalid for Many To One Relation Field\")}contains(e){throw new Error(\"Invalid for Many To One Relation Field\")}notContains(e){throw new Error(\"Invalid for Many To One Relation Field\")}isLessThan(e){throw new Error(\"Invalid for Many To One Relation Field\")}isGreaterOrEqualTo(e){throw new Error(\"Invalid for Many To One Relation Field\")}isNotIn(e){return new ke(n=>{e.forEach(i=>this.isDifferentFrom(i).__applyToConsumer(n))})}isDifferentFrom(e){return new ke(n=>{const i=[];for(const r in this.relationOptions.fields)if(Object.prototype.hasOwnProperty.call(this.relationOptions.fields,r)){const o=this.relationOptions.fields[r];i.push(new ke(s=>new tr(this.fields.find(o)).isDifferentFrom(e[r]).__applyToConsumer(s)))}n.or(i)})}isLessOrEqualTo(e){throw new Error(\"Invalid for Many To One Relation Field\")}isGreaterThan(e){throw new Error(\"Invalid for Many To One Relation Field\")}isEqualTo(e){return new ke(n=>{for(const i in this.relationOptions.fields)if(Object.prototype.hasOwnProperty.call(this.relationOptions.fields,i)){const r=this.relationOptions.fields[i];new tr(this.fields.find(r)).isEqualTo(e[i]).__applyToConsumer(n)}})}isIn(e){return new ke(n=>{n.or(e.map(i=>this.isEqualTo(i)))})}}class Qs extends ke{constructor(...e){super(n=>{for(const i of this.filters)i&&i.__applyToConsumer(n)}),this.filters=e}add(e){this.filters.push(e)}}class J1 extends ke{constructor(...e){super(n=>{let i=this.filters.filter(r=>r!==void 0);i.length>1?n.or(i):i.length==1&&i[0].__applyToConsumer(n)}),this.filters=e}}const rn=\"$custom$\",Bu=\"$db$\",eo=\"$an array\";class wo{constructor(){this.result={},this.hasUndefined=!1}databaseCustom(e){throw new Error(\"database custom is not allowed with api calls.\")}custom(e,n){Array.isArray(n)&&(n={[eo]:n}),this.add(rn+e,n)}add(e,n){n===void 0&&(this.hasUndefined=!0);let i=this.result;if(!i[e]){i[e]=n;return}let r=i[e];r instanceof Array?r.push(n):r=[r,n],i[e]=r}or(e){this.add(\"OR\",e.map(n=>{let i=new wo;return n.__applyToConsumer(i),i.result}))}isNull(e){this.add(e.key+\".null\",!0)}isNotNull(e){this.add(e.key+\".null\",!1)}isIn(e,n){this.add(e.key+\".in\",n.map(i=>e.valueConverter.toJson(i)))}isEqualTo(e,n){this.add(e.key,e.valueConverter.toJson(n))}isDifferentFrom(e,n){this.add(e.key+\".ne\",e.valueConverter.toJson(n))}isGreaterOrEqualTo(e,n){this.add(e.key+\".gte\",e.valueConverter.toJson(n))}isGreaterThan(e,n){this.add(e.key+\".gt\",e.valueConverter.toJson(n))}isLessOrEqualTo(e,n){this.add(e.key+\".lte\",e.valueConverter.toJson(n))}isLessThan(e,n){this.add(e.key+\".lt\",e.valueConverter.toJson(n))}containsCaseInsensitive(e,n){this.add(e.key+\".contains\",n)}notContainsCaseInsensitive(e,n){this.add(e.key+\".notContains\",n)}}function Vu(t,e){let n={};function i(l){n.$and||(n.$and=[]),n.$and.push(l)}function r(l,a){n[l]===void 0?n[l]=a:i({[l]:a})}[...t.fields].forEach(l=>{function a(f,c,d=!1,h=!1){let g=e.get(l.key+f);if(g!==void 0){let y=p=>{let m=p;if(d){let b;typeof p==\"string\"?b=JSON.parse(p):b=p,m=b.map(_=>h?_:l.valueConverter.fromJson(_))}else m=h?m:l.valueConverter.fromJson(m);let w=c(m);w!==void 0&&r(l.key,w)};if(!d&&g instanceof Array)g.forEach(p=>{y(p)});else{d&&typeof g==\"string\"&&(g=JSON.parse(g));const p=s(g);for(const m of p)y(m)}}}a(\"\",f=>f),a(\".gt\",f=>({$gt:f})),a(\".gte\",f=>({$gte:f})),a(\".lt\",f=>({$lt:f})),a(\".lte\",f=>({$lte:f})),a(\".ne\",f=>({$ne:f})),a(\".in\",f=>f,!0);var u=e.get(l.key+\".null\");if(u)switch(u=u.toString().trim().toLowerCase(),u){case\"y\":case\"true\":case\"yes\":r(l.key,null);break;default:r(l.key,{$ne:null});break}a(\".contains\",f=>({$contains:f}),!1,!0),a(\".notContains\",f=>({$notContains:f}),!1,!0)});let o=e.get(\"OR\");if(o){const a=s(o).map(u=>({$or:u.map(f=>Vu(t,{get:c=>f[c]}))}));a.length==1?n.$or?n.$or.push(a[0].$or):n.$or=a[0].$or:i({$and:a})}for(const l in t.entityType){const a=t.entityType[l];if(a&&a.rawFilterInfo&&a.rawFilterInfo.rawFilterTranslator){let u=e.get(rn+l);if(u!==void 0){const f=c=>{c[eo]!=null&&(c=c[eo]),r(rn+l,c)};Array.isArray(u)?u.forEach(c=>f(c)):f(u)}}}return n;function s(l){if(!Array.isArray(l))return[l];const a=[],u=[];for(const f of l)Array.isArray(f)?u.push(f):a.push(f);return u.push(a),u}}class vo{constructor(e){this.translateCustom=e,this.commands=[],this.promises=[]}applyTo(e){this.commands.forEach(n=>n(e))}or(e){let n;this.promises.push(Promise.all(e.map(async i=>{let r=new vo(this.translateCustom);return i.__applyToConsumer(r),await r.resolve(),new ke(o=>r.applyTo(o))})).then(i=>{n=i})),this.commands.push(i=>i.or(n))}isEqualTo(e,n){this.commands.push(i=>i.isEqualTo(e,n))}isDifferentFrom(e,n){this.commands.push(i=>i.isDifferentFrom(e,n))}isNull(e){this.commands.push(n=>n.isNull(e))}isNotNull(e){this.commands.push(n=>n.isNotNull(e))}isGreaterOrEqualTo(e,n){this.commands.push(i=>i.isGreaterOrEqualTo(e,n))}isGreaterThan(e,n){this.commands.push(i=>i.isGreaterThan(e,n))}isLessOrEqualTo(e,n){this.commands.push(i=>i.isLessOrEqualTo(e,n))}isLessThan(e,n){this.commands.push(i=>i.isLessThan(e,n))}containsCaseInsensitive(e,n){this.commands.push(i=>i.containsCaseInsensitive(e,n))}notContainsCaseInsensitive(e,n){this.commands.push(i=>i.notContainsCaseInsensitive(e,n))}isIn(e,n){this.commands.push(i=>i.isIn(e,n))}custom(e,n){this.promises.push((async()=>{let i=await this.translateCustom(e,n);i&&(Array.isArray(i)?i.forEach(r=>r.__applyToConsumer(this)):i.__applyToConsumer(this))})())}databaseCustom(e){this.commands.push(n=>n.databaseCustom(e))}async resolve(){for(;this.promises.length>0;){let e=this.promises;this.promises=[],await Promise.all(e)}}}class nr{constructor(){this.rawValues={},this.preciseValues=new Proxy(this.rawValues,{get:(e,n)=>{if(n in e){let i=e[n];if(i.bad)return;if(i.values.length>0){const r=He(i.field);if(r){if(r.type===\"reference\")return i.values.map(o=>r.toRepo.metadata.idMetadata.getIdFilter(o));throw new Error(\"Only relations toOne without field are supported.\")}return i.values}}}})}ok(e,...n){let i=this.rawValues[e.key];i?i.values.push(...n.filter(r=>!i.values.includes(r))):this.rawValues[e.key]={field:e,bad:!1,values:[...n]}}notOk(e){let n=this.rawValues[e.key];n?n.bad=!0:this.rawValues[e.key]={field:e,bad:!0,values:[]}}or(e){const n=e.map(i=>{let r=new nr;return i.__applyToConsumer(r),r});for(const i of n)for(const r in i.rawValues)if(Object.prototype.hasOwnProperty.call(i.rawValues,r)){const o=i.rawValues[r];o&&(o.bad?this.notOk(o.field):this.ok(o.field,...o.values))}for(const i in this.rawValues)if(Object.prototype.hasOwnProperty.call(this.rawValues,i))for(const r of n)r.rawValues[i]||this.notOk(this.rawValues[i].field)}isEqualTo(e,n){this.ok(e,n)}isDifferentFrom(e,n){this.notOk(e)}isNull(e){this.ok(e,null)}isNotNull(e){this.notOk(e)}isGreaterOrEqualTo(e,n){this.notOk(e)}isGreaterThan(e,n){this.notOk(e)}isLessOrEqualTo(e,n){this.notOk(e)}isLessThan(e,n){this.notOk(e)}containsCaseInsensitive(e,n){this.notOk(e)}notContainsCaseInsensitive(e,n){this.notOk(e)}isIn(e,n){this.ok(e,...n)}custom(e,n){}databaseCustom(e){}}class qu{constructor(e){this.apiProvider=e,this.isProxy=!0}getEntityDataProvider(e){return new U1(()=>{var i;let n=(i=this.apiProvider())==null?void 0:i.url;return n==null&&(n=\"/api\"),n+\"/\"+e.key},()=>_r(this.apiProvider().httpClient),e)}async transaction(e){throw new Error(\"Method not implemented.\")}}function ko(t,e){if(t.include){let n={};for(const i in t.include)if(Object.prototype.hasOwnProperty.call(t.include,i)){let r=t.include[i];if(typeof r==\"object\"){const o=He(e.fields.find(i));o&&(r=ko(r,o.toRepo.metadata))}n[i]=r}t={...t,include:n}}return t.where&&(t={...t,where:ke.entityFilterToJson(e,t.where)}),t.load&&(t={...t,load:t.load(e.fields).map(n=>n.key)}),t}class U1{constructor(e,n,i){this.url=e,this.http=n,this.entity=i}translateFromJson(e){let n={};for(const i of this.entity.fields)n[i.key]=i.valueConverter.fromJson(e[i.key]);return n}translateToJson(e){let n={};for(const i of this.entity.fields)n[i.key]=i.valueConverter.toJson(e[i.key]);return n}async count(e){const{run:n}=this.buildFindRequest({where:e});return n(\"count\").then(i=>+i.count)}async deleteMany(e){const{run:n}=this.buildFindRequest({where:e},\"delete\");return n(\"deleteMany\").then(i=>+i.deleted)}async updateMany(e,n){const{run:i}=this.buildFindRequest({where:e},\"put\");return i(\"updateMany\",this.toJsonOfIncludedKeys(n)).then(r=>+r.updated)}find(e){let{run:n}=this.buildFindRequest(e);return n().then(i=>i.map(r=>this.translateFromJson(r)))}buildFindRequest(e,n){n||(n=\"get\");let i=new Zs(this.url()),r;if(e){if(e.where&&(r=e.where.toJson(),G1(r,i)&&(r=void 0)),e.orderBy&&e.orderBy.Segments){let s=\"\",l=\"\",a=!1;e.orderBy.Segments.forEach(u=>{s.length>0&&(s+=\",\",l+=\",\"),s+=u.field.key,l+=u.isDescending?\"desc\":\"asc\",u.isDescending&&(a=!0)}),s&&i.add(\"_sort\",s),a&&i.add(\"_order\",l)}e.limit&&i.add(\"_limit\",e.limit),e.page&&i.add(\"_page\",e.page)}const o=(s,l)=>{let a=new Zs(i.url);return!s&&r&&(s=\"get\"),s&&a.add(\"__action\",s),r?(l={set:l,where:r},this.http().post(a.url,l)):this.http()[n](a.url,l)};return{createKey:()=>JSON.stringify({url:i,filterObject:r}),run:o,subscribe:async s=>({result:await o(Z1+s),unsubscribe:async()=>he.actionInfo.runActionWithoutBlockingUI(()=>this.http().post(this.url()+\"?__action=endLiveQuery\",{id:s}))})}}update(e,n){return this.http().put(this.url()+(e!=\"\"?\"/\"+encodeURIComponent(e):\"?__action=emptyId\"),this.toJsonOfIncludedKeys(n)).then(i=>this.translateFromJson(i))}toJsonOfIncludedKeys(e){let n={},i=Object.keys(e);for(const r of this.entity.fields)i.includes(r.key)&&(n[r.key]=r.valueConverter.toJson(e[r.key]));return n}async delete(e){if(e==\"\")await this.deleteMany(ke.fromEntityFilter(this.entity,this.entity.idMetadata.getIdFilter(e)));else return this.http().delete(this.url()+\"/\"+encodeURIComponent(e))}insert(e){return this.http().post(this.url(),this.translateToJson(e)).then(n=>this.translateFromJson(n))}insertMany(e){return this.http().post(this.url(),e.map(n=>this.translateToJson(n))).then(n=>n.map(i=>this.translateFromJson(i)))}}class xs{constructor(e){this.fetch=e}async get(e){return await er(async()=>this.myFetch(e).then(n=>n))}put(e,n){return this.myFetch(e,{method:\"put\",body:JSON.stringify(n)})}delete(e){return this.myFetch(e,{method:\"delete\"})}async post(e,n){return await er(()=>this.myFetch(e,{method:\"post\",body:JSON.stringify(n)}))}myFetch(e,n){const i={};if(n!=null&&n.body&&(i[\"Content-type\"]=\"application/json\"),typeof window<\"u\"&&typeof window.document<\"u\"&&typeof(window.document.cookie!==\"undefined\"))for(const r of window.document.cookie.split(\";\"))r.trim().startsWith(\"XSRF-TOKEN=\")&&(i[\"X-XSRF-TOKEN\"]=r.split(\"=\")[1]);return(this.fetch||fetch)(e,{credentials:\"include\",method:n==null?void 0:n.method,body:n==null?void 0:n.body,headers:i}).then(r=>j1(r)).catch(async r=>{throw await r})}}function j1(t){if(t.status!=204){if(t.status>=200&&t.status<300)return t.json();throw t.json().then(e=>({...e,message:e.message||t.statusText,url:t.url,status:t.status})).catch(()=>{throw{message:t.statusText,url:t.url,status:t.status}})}}function G1(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(Array.isArray(i)&&(i.length>0&&typeof i[0]==\"object\"||i.length>10))return!1}for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];Array.isArray(i)?n.endsWith(\".in\")?e.add(n,JSON.stringify(i)):i.forEach(r=>e.add(n,r)):n.startsWith(rn)?e.add(n,JSON.stringify(i)):e.add(n,i)}return!0}const Z1=\"liveQuery-\";class rt{toEntityOrderBy(){let e={};for(const n of this.Segments)n.isDescending?e[n.field.key]=\"desc\":e[n.field.key]=\"asc\";return e}constructor(...e){this.Segments=e}reverse(){let e=new rt;for(const n of this.Segments)e.Segments.push({field:n.field,isDescending:!n.isDescending});return e}compare(e,n,i){i||(i=o=>o.key);let r=0;for(let o=0;o<this.Segments.length;o++){let s=this.Segments[o],l=$s(e[i(s.field)]),a=$s(n[i(s.field)]);if(l>a?r=1:l<a&&(r=-1),r!=0)return s.isDescending&&(r*=-1),r}return r}static translateOrderByToSort(e,n){if(!n)return;let i=new rt;if(n){for(const r in n)if(Object.prototype.hasOwnProperty.call(n,r)){const o=n[r];let s=e.fields.find(r);const l=a=>{switch(o){case\"desc\":i.Segments.push({field:a,isDescending:!0});break;case\"asc\":i.Segments.push({field:a})}};if(s){const a=He(s);if((a==null?void 0:a.type)===\"toOne\"){const u=a.options;if(typeof u.field==\"string\")l(e.fields.find(u.field));else if(u.fields){for(const f in u.fields)if(Object.prototype.hasOwnProperty.call(u.fields,f)){const c=u.fields[f];l(e.fields.find(c.toString()))}}}else l(s)}}}return i}static createUniqueSort(e,n){(!n||Object.keys(n).length===0)&&e.options.defaultOrderBy&&(n=rt.translateOrderByToSort(e,e.options.defaultOrderBy)),n||(n=new rt);for(const i of e.idMetadata.fields)n.Segments.find(r=>r.field==i)||n.Segments.push({field:i});return n}static createUniqueEntityOrderBy(e,n){(!n||Object.keys(n).length===0)&&(n=e.options.defaultOrderBy),n?n={...n}:n={};for(const i of e.idMetadata.fields)n[i.key]||(n[i.key]=\"asc\");return n}}function $s(t){return t==null||t==null?t:t.id!==void 0?t.id:t}const Dr=\"stream\";class Q1{constructor(e,n,i){this.repo=e,this.query=n,this.unsubscribe=()=>{},this.defaultQueryState=[],this.listeners=[],this.id=xr(),this.queryChannel=`users:${i}:queries:${this.id}`,this.id=this.queryChannel}sendDefaultState(e){e(this.createReducerType(()=>[...this.defaultQueryState],this.allItemsMessage(this.defaultQueryState)))}async setAllItems(e){const n=await nn(this.repo)._fromJsonArray(e,this.query.options);this.forListeners(i=>{i(()=>n)},this.allItemsMessage(n))}allItemsMessage(e){return[{type:\"all\",data:e}]}forListeners(e,n){e(i=>{if(this.defaultQueryState=i(this.defaultQueryState),n.find(r=>r.type===\"add\"||r.type===\"replace\")&&this.query.options.orderBy){const r=rt.translateOrderByToSort(this.repo.metadata,this.query.options.orderBy);this.defaultQueryState.sort((o,s)=>r.compare(o,s))}});for(const i of this.listeners)e(r=>{i.next(this.createReducerType(r,n))})}createReducerType(e,n){return{applyChanges:e,changes:n,items:this.defaultQueryState}}async handle(e){{let n=e.filter(({type:r})=>r==\"add\"||r==\"replace\"),i=await nn(this.repo)._fromJsonArray(n.map(r=>r.data.item),this.query.options);for(let r=0;r<n.length;r++){const o=n[r];o.data.item=i[r]}}this.forListeners(n=>{n(i=>{i||(i=[]);for(const r of e)switch(r.type){case\"all\":this.setAllItems(r.data);break;case\"replace\":{i=i.map(o=>this.repo.metadata.idMetadata.getId(o)===r.data.oldId?r.data.item:o);break}case\"add\":i=i.filter(o=>this.repo.metadata.idMetadata.getId(o)!==this.repo.metadata.idMetadata.getId(r.data.item)),i.push(r.data.item);break;case\"remove\":i=i.filter(o=>this.repo.metadata.idMetadata.getId(o)!==r.data.id);break}return i})},e)}}const x1=\"_liveQueryKeepAlive\";class $1{constructor(e,n){this.apiProvider=e,this.getUserId=n,this.queries=new Map,this.channels=new Map}wrapMessageHandling(e){var n=this.apiProvider().wrapMessageHandling;n?n(e):e()}hasQueriesForTesting(){return this.queries.size>0}runPromise(e){return e}close(){this.queries.clear(),this.channels.clear(),this.closeIfNoListeners()}async subscribeChannel(e,n){let i=()=>{};const r=await this.openIfNoOpened();try{let o=this.channels.get(e);if(!o){this.channels.set(e,o=new ep);try{o.unsubscribe=await r.subscribe(e,s=>this.wrapMessageHandling(()=>o.handle(s)),s=>{n.error(s)})}catch(s){throw n.error(s),s}}o.listeners.push(n),i=()=>{o.listeners.splice(o.listeners.indexOf(n),1),o.listeners.length==0&&(this.channels.delete(e),o.unsubscribe()),this.closeIfNoListeners()}}catch(o){throw n.error(o),o}return()=>{i(),i=()=>{}}}closeIfNoListeners(){this.client&&this.queries.size===0&&this.channels.size===0&&(this.runPromise(this.client.then(e=>e.close())),this.client=void 0,clearInterval(this.interval),this.interval=void 0)}subscribe(e,n,i){let r=!0,o=()=>{r=!1};return this.runPromise(nn(e)._buildEntityDataProviderFindOptions(n).then(s=>{if(!r)return;const{createKey:l,subscribe:a}=new qu(this.apiProvider).getEntityDataProvider(e.metadata).buildFindRequest(s),u=l();let f=this.queries.get(u);f?f.sendDefaultState(i.next):(this.queries.set(u,f=new Q1(e,{entityKey:e.metadata.key,options:n},this.getUserId())),f.subscribeCode=()=>{f.unsubscribe&&(f.unsubscribe(),f.unsubscribe=()=>{}),this.runPromise(this.subscribeChannel(f.queryChannel,{next:c=>this.runPromise(f.handle(c)),complete:()=>{},error:c=>{f.listeners.forEach(d=>d.error(c))}}).then(c=>{if(f.listeners.length==0){c();return}this.runPromise(a(f.queryChannel).then(d=>{if(f.listeners.length===0){d.unsubscribe(),c();return}this.runPromise(f.setAllItems(d.result)),f.unsubscribe=()=>{f.unsubscribe=()=>{},c(),this.runPromise(d.unsubscribe())}}).catch(d=>{f.listeners.forEach(h=>h.error(d)),c(),this.queries.delete(u)}))})).catch(c=>{f.listeners.forEach(d=>d.error(c))})},f.subscribeCode()),f.listeners.push(i),o=()=>{f.listeners.splice(f.listeners.indexOf(i),1),i.complete(),f.listeners.length==0&&(this.queries.delete(u),f.unsubscribe()),this.closeIfNoListeners()}}).catch(s=>{i.error(s)})),()=>{o()}}openIfNoOpened(){return this.client?this.client:(this.interval=setInterval(async()=>{const e=[];for(const n of this.queries.values())e.push(n.queryChannel);if(e.length>0){let n=this.apiProvider();const i=await this.runPromise(await he.actionInfo.runActionWithoutBlockingUI(()=>_r(n.httpClient).post(n.url+\"/\"+x1,e)));for(const r of i)for(const o of this.queries.values())o.queryChannel===r&&o.subscribeCode()}},3e4),this.runPromise(this.client=this.apiProvider().subscriptionClient.openConnection(()=>{for(const e of this.queries.values())e.subscribeCode()})))}}class ep{constructor(){this.unsubscribe=()=>{},this.listeners=[]}async handle(e){for(const n of this.listeners)n.next(e)}}class So{openConnection(e){let n;const i=new Map,r=_r(wt.apiClient.httpClient);let o=!1,s;const l={close(){s.close()},async subscribe(f,c){let d=i.get(f);return d||(i.set(f,d=[]),await u(f)),d.push(c),()=>{d.splice(d.indexOf(c,1)),d.length==0&&(he.actionInfo.runActionWithoutBlockingUI(()=>r.post(wt.apiClient.url+\"/\"+Dr+\"/unsubscribe\",{channel:f,clientId:n})),i.delete(f))}}},a=()=>new Promise(f=>{d();let c=0;function d(){s&&s.close(),s=So.createEventSource(wt.apiClient.url+\"/\"+Dr),s.onmessage=h=>{let g=JSON.parse(h.data);const y=i.get(g.channel);y&&y.forEach(p=>p(g.data))},s.onerror=h=>{console.error(\"Live Query Event Source Error\",h),s.close(),c++<Lu.error500RetryCount&&setTimeout(()=>{d()},500)},s.addEventListener(\"connectionId\",async h=>{if(n=h.data,o){for(const g of i.keys())await u(g);e()}else o=!0,f(l)})}});return a();async function u(f){await he.actionInfo.runActionWithoutBlockingUI(()=>r.post(wt.apiClient.url+\"/\"+Dr+\"/subscribe\",{channel:f,clientId:n}))===tp&&await a()}}static createEventSource(e){return new EventSource(e,{withCredentials:!0})}}const tp=\"client connection not found\",np=Symbol.for(\"serverActionField\");class ip{constructor(e){this.remultObjectStorage=e}static enable(){he.remultFactory=()=>{const e=he.asyncContext.getStore();if(e)return e.remult;throw new Error(\"remult object was requested outside of a valid context, try running it within initApi or a remult request cycle\")}}static disable(){g1()}async run(e,n){return this.remultObjectStorage?this.remultObjectStorage.run({remult:e},()=>n(e)):n(e)}isInInitRequest(){var e,n;return(n=(e=this.remultObjectStorage)==null?void 0:e.getStore())==null?void 0:n.inInitRequest}setInInitRequest(e){var i;const n=(i=this.remultObjectStorage)==null?void 0:i.getStore();n&&(n.inInitRequest=e)}getStore(){if(!this.remultObjectStorage)throw new Error(\"can't use static remult in this environment, `async_hooks` were not initialized\");return this.remultObjectStorage.getStore()}}he.asyncContext||(he.asyncContext=new ip(void 0));function rp(){return he.actionInfo.runningOnServer||!wt.dataProvider.isProxy}const Oo=class Oo{constructor(e){if(this.repo=(n,i)=>{i===void 0&&(i=this.dataProvider);let r=this.repCache.get(i);r||this.repCache.set(i,r=new Map);let o=r.get(n);return o||(r.set(n,o=new Co(n,this,i,yp(n,this))),X1(o,this,i)),o},this.dataProvider=new qu(()=>this.apiClient),this.repCache=new Map,this.liveQueryPublisher={itemChanged:async()=>{}},this.liveQuerySubscriber=new $1(()=>this.apiClient,()=>{var n;return(n=this.user)==null?void 0:n.id}),this.context={},this.apiClient={url:\"/api\",subscriptionClient:new So},e&&e.getEntityDataProvider){this.dataProvider=e;return}if(Hu(e))this.apiClient.httpClient=e;else if(typeof e==\"function\")this.apiClient.httpClient=e;else if(e){const n=e;n.httpClient&&(this.apiClient.httpClient=n.httpClient),n.url&&(this.apiClient.url=n.url),n.subscriptionClient&&(this.apiClient.subscriptionClient=n.subscriptionClient),n.wrapMessageHandling&&(this.apiClient.wrapMessageHandling=n.wrapMessageHandling)}}authenticated(){var e;return((e=this.user)==null?void 0:e.id)!==void 0}isAllowed(e){var n,i;if(e!=null){if(e instanceof Array){for(const r of e)if(this.isAllowed(r)===!0)return!0;return!1}return typeof e==\"function\"?e(this):typeof e==\"boolean\"?e:!!(typeof e==\"string\"&&(i=(n=this.user)==null?void 0:n.roles)!=null&&i.includes(e.toString()))}}isAllowedForInstance(e,n){if(Array.isArray(n)){for(const i of n)if(this.isAllowedForInstance(e,i))return!0}else return typeof n==\"function\"?n(e,this):this.isAllowed(n)}call(e,n,...i){const r=e[np];if(!r.doWork)throw Error(\"The method received is not a valid backend method\");return r.doWork(i,n,this.apiClient.url,_r(this.apiClient.httpClient))}clearAllCache(){this.repCache.clear()}};Oo.onFind=(e,n)=>{};let Dn=Oo;he.defaultRemultFactory=()=>new Dn;class op{constructor(){this.classes=new Map}}function sp(t,e){let n=t;for(;;){let i=he.classHelpers.get(n);i||he.classHelpers.set(n,i=new op),i.classes.set(t,e);let r=Object.getPrototypeOf(n.prototype);if(r==null)break;n=r.constructor}}const rr=class rr{};rr.everyone=()=>!0,rr.authenticated=(...e)=>e.length>1?e[1].authenticated():e.length==1&&e[0].authenticated?e[0].authenticated():wt.authenticated();let el=rr;const lp={defaultPageSize:200};function to(t,e){return e&&Object.assign(t,e),t}function tl(t,e,n){let i=ke.fromEntityFilter(t,e);const r=()=>{};i&&i.__applyToConsumer({custom:r,databaseCustom:r,containsCaseInsensitive:r,notContainsCaseInsensitive:r,isDifferentFrom:r,isEqualTo:(o,s)=>{n[o.key]=s},isGreaterOrEqualTo:r,isGreaterThan:r,isIn:r,isLessOrEqualTo:r,isLessThan:r,isNotNull:r,isNull:r,or:r})}class nl{constructor(){this.entityLoaders=new Map,this.promises=[]}load(e,n){let i=this.entityLoaders.get(e.entityType);i||this.entityLoaders.set(e.entityType,i=new ap(e));const r=i.find(n);return this.promises.push(r),r}async resolveAll(){for(const n of this.entityLoaders.values())for(const i of n.queries.values())i.resolve();if(this.promises.length===0)return;const e=this.promises;this.promises=[],await Promise.all(e),await this.resolveAll()}}class ap{constructor(e){this.rel=e,this.queries=new Map}find(e){const{where:n,...i}=ko(e,this.rel.metadata),r=JSON.stringify(i);let o=this.queries.get(r);return o||this.queries.set(r,o=new up(this.rel)),o.find(e,n)}}class up{constructor(e){this.rel=e,this.pendingInStatements=new Map,this.whereVariations=new Map}find(e,n){const i=JSON.stringify(n);let r=this.whereVariations.get(i);if(!r){const o=Object.keys(n);if(o.length===1&&typeof n[o[0]]!=\"object\"&&!e.limit){let s=this.pendingInStatements.get(o[0]);s||this.pendingInStatements.set(o[0],s=new fp(this.rel,o[0],e)),this.whereVariations.set(i,r={result:s.find(n)})}else this.whereVariations.set(i,r={result:this.rel.find(e)})}return r.result}resolve(){const e=[...this.pendingInStatements.values()];this.pendingInStatements.clear();for(const n of e)n.resolve()}}class fp{constructor(e,n,i){this.rel=e,this.key=n,this.options=i,this.values=new Map}async resolve(){const e=[...this.values.values()];if(e.length==1){this.rel.find(this.options).then(e[0].resolve,e[0].reject);return}var n={...this.options};n.where={[this.key]:e.map(r=>r.value)},n.limit=1e3,n.page=1;let i=[];try{for(;;){const r=await this.rel.find(n);if(i.push(...r),r.length<n.limit)break;n.page++}for(const r of this.values.values())r.resolve(i.filter(o=>{const l=Be(o).fields.find(this.key),a=He(l.metadata),u=(a==null?void 0:a.type)===\"reference\"?l.getId():o[this.key];return r.value==u}))}catch(r){for(const o of this.values.values())o.reject(r)}}find(e){const n=e[this.key];let i=this.values.get(n);if(!i){let r,o,s=new Promise((l,a)=>{r=l,o=a});this.values.set(n,i={value:n,resolve:r,reject:o,result:s})}return i.result}}function Rr(t,e){return typeof t[e]<\"u\"}const Cn=class Cn{constructor(e){this.sql=e,this.wrapIdentifier=n=>n,this.createdEntities=[],e.wrapIdentifier&&(this.wrapIdentifier=n=>e.wrapIdentifier(n)),Rr(e,\"provideMigrationBuilder\")&&(this.provideMigrationBuilder=n=>e.provideMigrationBuilder(n)),Rr(e,\"end\")&&(this.end=()=>e.end())}static getDb(e){const n=e||wt.dataProvider;if(Rr(n,\"createCommand\"))return n;throw\"the data provider is not an SqlCommandFactory\"}createCommand(){return new dp(this.sql.createCommand(),Cn.LogToConsole)}async execute(e){return await this.createCommand().execute(e)}_getSourceSql(){return this.sql}async ensureSchema(e){this.sql.ensureSchema&&await this.sql.ensureSchema(e)}getEntityDataProvider(e){if(!this.sql.supportsJsonColumnType)for(const n of e.fields.toArray())n.valueConverter.fieldTypeInDb===\"json\"&&(n.valueConverter={...n.valueConverter,toDb:Ze.JsonString.toDb,fromDb:Ze.JsonString.fromDb});return new no(e,this,async n=>{this.createdEntities.indexOf(n.$entityName)<0&&(this.createdEntities.push(n.$entityName),await this.sql.entityIsUsedForTheFirstTime(e))},this.sql)}transaction(e){return this.sql.transaction(async n=>{let i=!1;try{await e(new Cn({createCommand:()=>{let r=n.createCommand();return{addParameterAndReturnSqlToken:o=>r.param(o),param:o=>r.param(o),execute:async o=>{if(i)throw\"can't run a command after the transaction was completed\";return r.execute(o)}}},getLimitSqlSyntax:this.sql.getLimitSqlSyntax,entityIsUsedForTheFirstTime:r=>n.entityIsUsedForTheFirstTime(r),transaction:r=>n.transaction(r),supportsJsonColumnType:this.sql.supportsJsonColumnType,wrapIdentifier:this.wrapIdentifier,end:this.end}))}finally{i=!0}})}static rawFilter(e){return{[Bu]:{buildSql:e}}}static async filterToRaw(e,n,i,r,o){i||(i=new hp);const s=Mp(e);var l=new en(i,r||await Wu(s.metadata,o));return l._addWhere=!1,await(await nn(s)._translateWhereToFilter(n)).__applyToConsumer(l),await l.resolveWhere()}};Cn.LogToConsole=!1,Cn.durationThreshold=0;let ir=Cn;const cp=new Map([[\"INSERT\",\"⚪\"],[\"SELECT\",\"🔵\"],[\"UPDATE\",\"🟣\"],[\"DELETE\",\"🟤\"],[\"CREATE\",\"🟩\"],[\"ALTER\",\"🟨\"],[\"DROP\",\"🟥\"],[\"TRUNCATE\",\"⬛\"],[\"GRANT\",\"🟪\"],[\"REVOKE\",\"🟫\"]]);class dp{constructor(e,n){this.origin=e,this.logToConsole=n,this.args={}}addParameterAndReturnSqlToken(e){return this.param(e)}param(e,n){let i=this.origin.param(e);return this.args[i]=e,i}async execute(e){try{let i=new Date,r=await this.origin.execute(e);if(this.logToConsole!==!1){var n=new Date().valueOf()-i.valueOf();if(n>ir.durationThreshold){const o=n/1e3;if(this.logToConsole===\"oneLiner\"){const s=e.replace(/(\\r\\n|\\n|\\r|\\t)/gm,\" \").replace(/  +/g,\" \").trim(),l=s.split(\" \")[0].toUpperCase();console.info(`${cp.get(l)||\"💢\"} (${o.toFixed(3)}) ${s} ${JSON.stringify(this.args)}`)}else typeof this.logToConsole==\"function\"?this.logToConsole(o,e,this.args):console.info(e+`\n`,{arguments:this.args,duration:o})}}return r}catch(i){throw console.error((i.message||\"Sql Error\")+`:\n`,e,{arguments:this.args,error:i}),i}}}const Io=class Io{constructor(e,n,i,r){this.entity=e,this.sql=n,this.iAmUsed=i,this.strategy=r}async init(){let e=await Wu(this.entity,n=>this.sql.wrapIdentifier(n));return await this.iAmUsed(e),e}async count(e){let n=await this.init(),i=\"select count(*) count from \"+n.$entityName,r=this.sql.createCommand();if(e){let o=new en(r,n);e.__applyToConsumer(o),i+=await o.resolveWhere()}return r.execute(i).then(o=>Number(o.rows[0].count))}async find(e){let n=await this.init(),{colKeys:i,select:r}=this.buildSelect(n);r=\"select \"+r,r+=`\n from `+n.$entityName;let o=this.sql.createCommand();if(e){if(e.where){let s=new en(o,n);e.where.__applyToConsumer(s),r+=await s.resolveWhere()}if(e.limit&&(e.orderBy=rt.createUniqueSort(this.entity,e.orderBy)),e.orderBy||(e.orderBy=rt.createUniqueSort(this.entity,new rt)),e.orderBy){let s=!0,l=[];for(const a of e.orderBy.Segments)l.push(a);for(const a of l)s?(r+=\" Order By \",s=!1):r+=\", \",r+=n.$dbNameOf(a.field),a.isDescending&&(r+=\" desc\"),this.sql._getSourceSql().orderByNullsFirst&&(a.isDescending?r+=\" nulls last\":r+=\" nulls first\")}if(e.limit){let s=1;e.page&&(s=e.page),s<1&&(s=1),r+=\" \"+this.strategy.getLimitSqlSyntax(e.limit,(s-1)*e.limit)}}return o.execute(r).then(s=>s.rows.map(l=>this.buildResultRow(i,l,s)))}buildResultRow(e,n,i){let r={};for(let o=0;o<e.length;o++){const s=e[o];try{r[s.key]=s.valueConverter.fromDb(n[i.getColumnKeyInResultForIndexInSelect(o)])}catch(l){throw new Error(\"Failed to load from db:\"+s.key+`\\r\n`+l)}}return r}buildSelect(e){let n=\"\",i=[];for(const r of this.entity.fields)r.isServerExpression||(i.length>0&&(n+=\", \"),n+=e.$dbNameOf(r),i.push(r));return{colKeys:i,select:n}}async update(e,n){let i=await this.init(),r=this.sql.createCommand(),o=\"update \"+i.$entityName+\" set \",s=!1;for(const c of this.entity.fields)if(!rl(c,i)){if(n[c.key]!==void 0){let d=c.valueConverter.toDb(n[c.key]);d!==void 0&&(s?o+=\", \":s=!0,o+=i.$dbNameOf(c)+\" = \"+r.param(d))}}const l=this.entity.idMetadata.getIdFilter(e);let a=new en(r,i);ke.fromEntityFilter(this.entity,l).__applyToConsumer(a),o+=await a.resolveWhere();let{colKeys:u,select:f}=this.buildSelect(i);return this.sql._getSourceSql().doesNotSupportReturningSyntax||(o+=\" returning \"+f),r.execute(o).then(c=>{var d,h;if((h=(d=this.sql._getSourceSql()).afterMutation)==null||h.call(d),this.sql._getSourceSql().doesNotSupportReturningSyntax)return il(this.entity,this,n,e,\"update\");if(c.rows.length!=1)throw new Error(\"Failed to update row with id \"+e+\", rows updated: \"+c.rows.length);return this.buildResultRow(u,c.rows[0],c)})}async delete(e){let n=await this.init(),i=this.sql.createCommand(),r=new en(i,n);ke.fromEntityFilter(this.entity,this.entity.idMetadata.getIdFilter(e)).__applyToConsumer(r);let o=\"delete from \"+n.$entityName;return o+=await r.resolveWhere(),i.execute(o).then(()=>{var s,l;(l=(s=this.sql._getSourceSql()).afterMutation)==null||l.call(s)})}async insert(e){let n=await this.init(),i=this.sql.createCommand(),r=\"\",o=\"\",s=!1;for(const f of this.entity.fields)if(!rl(f,n)){let c=f.valueConverter.toDb(e[f.key]);c!=null&&(s?(r+=\", \",o+=\", \"):s=!0,r+=n.$dbNameOf(f),o+=i.param(c))}let l=`insert into ${n.$entityName} (${r}) values (${o})`,{colKeys:a,select:u}=this.buildSelect(n);return this.sql._getSourceSql().doesNotSupportReturningSyntax||(l+=\" returning \"+u),await i.execute(l).then(f=>{var c,d;if((d=(c=this.sql._getSourceSql()).afterMutation)==null||d.call(c),this.sql._getSourceSql().doesNotSupportReturningSyntax)if(Sp(this.entity.idMetadata.field)){const h=f.rows[0];if(typeof h!=\"number\")throw new Error(\"Auto increment, for a database that is does not support returning syntax, should return an array with the single last added id. Instead it returned: \"+JSON.stringify(h));return this.find({where:new ke(g=>g.isEqualTo(this.entity.idMetadata.field,h))}).then(g=>g[0])}else return il(this.entity,this,e,void 0,\"insert\");return this.buildResultRow(a,f.rows[0],f)})}};Io.LogToConsole=!1;let no=Io;class hp{execute(e){throw new Error(\"Method not implemented.\")}addParameterAndReturnSqlToken(e){return this.param(e)}param(e){return e===null?\"null\":(e instanceof Date&&(e=e.toISOString()),typeof e==\"string\"?(e==null&&(e=\"\"),\"'\"+e.replace(/'/g,\"''\")+\"'\"):e.toString())}}function il(t,e,n,i,r){const o=i!==void 0?t.idMetadata.getIdFilter(i):{};return e.find({where:new ke(s=>{for(const l of t.idMetadata.fields)s.isEqualTo(l,n[l.key]??o[l.key])})}).then(s=>{if(s.length!=1)throw new Error(`Failed to ${r} row - result contained ${s.length} rows`);return s[0]})}class en{constructor(e,n){this.r=e,this.nameProvider=n,this.where=\"\",this._addWhere=!0,this.promises=[]}async resolveWhere(){for(;this.promises.length>0;){let e=this.promises;this.promises=[];for(const n of e)await n}return this.where}custom(e,n){throw new Error(\"Custom filter should be translated before it gets here\")}or(e){let n=\"\";this.promises.push((async()=>{for(const i of e){let r=new en(this.r,this.nameProvider);r._addWhere=!1,i.__applyToConsumer(r);let o=await r.resolveWhere();if(!o)return;o.length>0&&(n.length>0&&(n+=\" or \"),e.length>1?n+=\"(\"+o+\")\":n+=o)}this.addToWhere(\"(\"+n+\")\")})())}isNull(e){this.promises.push((async()=>this.addToWhere(this.nameProvider.$dbNameOf(e)+\" is null\"))())}isNotNull(e){this.promises.push((async()=>this.addToWhere(this.nameProvider.$dbNameOf(e)+\" is not null\"))())}isIn(e,n){this.promises.push((async()=>{n&&n.length>0?this.addToWhere(this.nameProvider.$dbNameOf(e)+\" in (\"+n.map(i=>this.r.param(e.valueConverter.toDb(i))).join(\",\")+\")\"):this.addToWhere(\"1 = 0 /*isIn with no values*/\")})())}isEqualTo(e,n){this.add(e,n,\"=\")}isDifferentFrom(e,n){this.add(e,n,\"<>\")}isGreaterOrEqualTo(e,n){this.add(e,n,\">=\")}isGreaterThan(e,n){this.add(e,n,\">\")}isLessOrEqualTo(e,n){this.add(e,n,\"<=\")}isLessThan(e,n){this.add(e,n,\"<\")}containsCaseInsensitive(e,n){this.promises.push((async()=>{this.addToWhere(\"lower (\"+this.nameProvider.$dbNameOf(e)+\") like lower ('%\"+n.replace(/'/g,\"''\")+\"%')\")})())}notContainsCaseInsensitive(e,n){this.promises.push((async()=>{this.addToWhere(\"not lower (\"+this.nameProvider.$dbNameOf(e)+\") like lower ('%\"+n.replace(/'/g,\"''\")+\"%')\")})())}add(e,n,i){this.promises.push((async()=>{let r=this.nameProvider.$dbNameOf(e)+\" \"+i+\" \"+this.r.param(e.valueConverter.toDb(n));this.addToWhere(r)})())}addToWhere(e){this.where.length==0?this._addWhere&&(this.where+=\" where \"):this.where+=\" and \",this.where+=e}databaseCustom(e){this.promises.push((async()=>{if(e!=null&&e.buildSql){let n=new gp(this.r,this.nameProvider.wrapIdentifier),i=await e.buildSql(n);typeof i!=\"string\"&&(i=n.sql),i&&this.addToWhere(\"(\"+i+\")\")}})())}}class gp{constructor(e,n){this.r=e,this.wrapIdentifier=n,this.sql=\"\",this.param=(i,r)=>(typeof r==\"object\"&&r.valueConverter.toDb&&(i=r.valueConverter.toDb(i)),this.r.param(i)),this.filterToRaw=async(i,r)=>ir.filterToRaw(i,r,this,void 0,this.wrapIdentifier),this.param.bind(this),this.filterToRaw.bind(this)}addParameterAndReturnSqlToken(e){return this.param(e)}}function rl(t,e){return t.dbReadOnly||t.isServerExpression||t.options.sqlExpression&&t.dbName!=e.$dbNameOf(t)}async function Wu(t,e){let n=typeof e==\"function\"?{wrapIdentifier:e}:e||{};var i=Tp(t);n.wrapIdentifier||(n.wrapIdentifier=wt.dataProvider.wrapIdentifier),n.wrapIdentifier||(n.wrapIdentifier=o=>o);const r={$entityName:await Xu(i,n.wrapIdentifier),toString:()=>r.$entityName,$dbNameOf:o=>{var s;return typeof o==\"string\"?s=o:s=o.key,r[s]},wrapIdentifier:n.wrapIdentifier};for(const o of i.fields){let s=await Eo(o,i,n.wrapIdentifier);o.options.sqlExpression||(typeof n.tableName==\"string\"?s=n.wrapIdentifier(n.tableName)+\".\"+s:n.tableName===!0&&(s=r.$entityName+\".\"+s)),r[o.key]=s}return r}async function Xu(t,e=n=>n){if(t.options.sqlExpression){if(typeof t.options.sqlExpression==\"string\")return t.options.sqlExpression;if(typeof t.options.sqlExpression==\"function\"){const n=t.options.sqlExpression;try{return t.options.sqlExpression=\"recursive sqlExpression call for entity '\"+t.key+\"'. \",await n(t)}finally{t.options.sqlExpression=n}}}return e(t.dbName)}async function Eo(t,e,n=i=>i){try{if(t.options.sqlExpression){let o;if(typeof t.options.sqlExpression==\"function\"){const s=t.options.sqlExpression;try{t.options.sqlExpression=\"recursive sqlExpression call for field '\"+t.key+\"'. \",o=await s(e),t.options.sqlExpression=()=>o}finally{}}else o=t.options.sqlExpression;return o||t.dbName}const i=He(t);let r=(i==null?void 0:i.type)===\"toOne\"&&t.options.field;if(r){let o=e.fields.find(r);if(o)return Eo(o,e,n)}return n(t.dbName)}finally{}}const Ge=class Ge{};Ge.required=Yn(async(e,n)=>n.value!=null&&n.value!=null&&n.value!==\"\",\"Should not be empty\"),Ge.unique=Yn(async(e,n)=>{if(!n.entityRef)throw\"unique validation may only work on columns that are attached to an entity\";return n.isBackend()&&(n.isNew||n.valueChanged())?await n.entityRef.repository.count({[n.metadata.key]:n.value})==0:!0},\"already exists\"),Ge.uniqueOnBackend=Yn(async(e,n)=>n.isBackend()&&(n.isNew||n.valueChanged())?await n.entityRef.repository.count({[n.metadata.key]:n.value})==0:!0,Ge.unique.defaultMessage),Ge.regex=qn((e,n)=>n.test(e)),Ge.email=Ni(e=>/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(e),\"Invalid Email\"),Ge.url=Ni(e=>!!new URL(e),\"Invalid Url\"),Ge.in=qn((e,n)=>n.includes(e),e=>`Value must be one of: ${e.map(n=>typeof n==\"object\"?n.id!==void 0?n.id:n.toString():n).join(\", \")}`),Ge.notNull=Ni(e=>e!=null,\"Should not be null\"),Ge.enum=qn((e,n)=>Object.values(n).includes(e),e=>`Value must be one of ${Fi(e).join(\", \")}`),Ge.relationExists=Yn(async(e,n)=>n.valueIsNull()||!n.isBackend()?!0:!!await n.load(),\"Relation value does not exist\"),Ge.maxLength=qn((e,n)=>e.length<=n,e=>`Value must be at most ${e} characters`),Ge.minLength=qn((e,n)=>e.length>=n,e=>`Value must be at least ${e} characters`),Ge.defaultMessage=\"Invalid value\";let Lt=Ge;function Yn(t,e){const n=async(r,o,s)=>{const l=await t(r,o);typeof l==\"string\"&&l.length>0?o.error=l:l||(o.error=typeof s==\"function\"&&s(r,o,void 0)||s||typeof e==\"function\"&&e(r,o,void 0)||e||Lt.defaultMessage)},i=(r,o,s)=>typeof r==\"string\"||r===\"function\"||r===void 0&&o===void 0?async(l,a,u)=>await n(l,a,r||u):n(r,o,s);return Object.defineProperty(i,\"defaultMessage\",{get:()=>e,set:r=>{e=r},enumerable:!0}),Object.assign(i,{withMessage:r=>async(o,s)=>i(o,s,r)})}function Ni(t,e){return Yn((n,i)=>i.value===void 0||i.value===null?!0:t(i.value),e)}function qn(t,e){const n=mp((i,r,o)=>r.value===void 0||r.value===null?!0:t(r.value,o),(i,r,o)=>typeof e==\"function\"&&e(o)||e,!0);return Object.assign((i,r)=>n(i,r),{get defaultMessage(){return e},set defaultMessage(i){e=i}})}function mp(t,e,n=!1){return Object.assign((r,o)=>async(s,l)=>{const a=await t(s,l,r);typeof a==\"string\"?l.error=a:a||(l.error=o?typeof o==\"function\"?n?o(r):o(s,l,r):o:e?typeof e==\"function\"?e(s,l,r):e:Lt.defaultMessage)},{get defaultMessage(){return e},set defaultMessage(r){e=r}})}function Fi(t){return Object.values(t).filter(e=>typeof t[e]!=\"number\")}function Di(t,e,n=!1){if(!e)return t;const i=Array.isArray(e)?e:[e],r=Array.isArray(t)?t:t?[t]:[];return n?[...i,...r]:[...r,...i]}class Co{constructor(e,n,i,r,o){this._entity=e,this._remult=n,this._dataProvider=i,this._info=r,this._defaultFindOptions=o,this._idCache=new Map,this._cache=new Map}_notFoundError(e){return{message:`id ${e} not found in entity ${this.metadata.key}`,httpStatusCode:404}}[ii](){return this}async _createAfterFilter(e,n){let i=new Map;for(const s of rt.translateOrderByToSort(this.metadata,e).Segments){let l=n[s.field.key];i.set(s.field.key,l)}let r={$or:[]},o=[];for(const s of rt.translateOrderByToSort(this.metadata,e).Segments){let l={};for(const a of o)l[a.key]=i.get(a.key);o.push(s.field),s.isDescending?l[s.field.key]={$lt:i.get(s.field.key)}:l[s.field.key]={$gt:i.get(s.field.key)},r.$or.push(l)}return r}relations(e){return new Proxy({},{get:(n,i)=>{const r=this.fields.find(i),o=He(r);if(!o)throw Error(i+\" is not a relation\");const{toRepo:s,returnNull:l,returnUndefined:a}=this._getFocusedRelationRepo(r,e);return o.type===\"toMany\"?s:{findOne:u=>l?Promise.resolve(null):a?Promise.resolve(void 0):s.findFirst({},u)}}})}_getFocusedRelationRepo(e,n){const i=He(e);let r=i.toRepo,{findOptions:o,returnNull:s,returnUndefined:l}=this._findOptionsBasedOnRelation(i,e,void 0,n,r);return{toRepo:new Co(r._entity,r._remult,r._dataProvider,r._info,o),returnNull:s,returnUndefined:l}}get _edp(){return this.__edp?this.__edp:this.__edp=this._dataProvider.getEntityDataProvider(this.metadata)}_getCachedById(e,n){e=e+\"\",this._getCachedByIdAsync(e,n);let i=this._idCache.get(e);if(!(i instanceof Promise))return i}async _getCachedByIdAsync(e,n){e=e+\"\";let i=this._idCache.get(e);if(i instanceof Promise)return await i;if(this._idCache.has(e))return i;if(n)return;this._idCache.set(e,void 0);let r=this.findId(e).then(o=>(o===void 0?i=null:i=o,this._idCache.set(e,i),i));return this._idCache.set(e,r),await r}_addToCache(e){e&&this._idCache.set(this.getEntityRef(e).getId()+\"\",e)}get metadata(){return this._info}addEventListener(e){return this.listeners||(this.listeners=[]),this.listeners.push(e),()=>{this.listeners.splice(this.listeners.indexOf(e),1)}}query(e){return new Ip(e,this)}getEntityRef(e){let n=e[vn];return n||(this._fixTypes(e),n=new Ei(this._info,e,this,this._edp,this._remult,!0),Object.defineProperty(e,vn,{get:()=>n}),n.saveOriginalData()),n}async delete(e){const n=Be(e,!1);if(n)return n.delete();if(typeof e==\"string\"||typeof e==\"number\"){if(this._dataProvider.isProxy)return this._edp.delete(e);{let r=await this.findId(e);if(!r)throw this._notFoundError(e);return await Be(r).delete()}}let i=this._getRefForExistingRow(e,void 0);return this._dataProvider.isProxy||await i.reload(),i.delete()}async insert(e){if(Array.isArray(e))if(this._dataProvider.isProxy){let n=[],i=[];for(const r of e){let o=Be(e,!1);if(o){if(!o.isNew())throw\"Item is not new\"}else o=await this.getEntityRef(this.create(r));n.push(o),i.push(await o.buildDtoForInsert())}return Gn(await this._edp.insertMany(i),(r,o)=>n[o].processInsertResponseDto(r))}else{let n=[];for(const i of e)n.push(await this.insert(i));return n}else{let n=Be(e,!1);if(n){if(!n.isNew())throw\"Item is not new\";return await n.save()}else return await this.getEntityRef(this.create(e)).save()}}get fields(){return this.metadata.fields}async validate(e,...n){{let i=Be(e,!1);if(i||(i=this.getEntityRef({...e})),!n||n.length===0)return await i.validate();{i.__clearErrorsAndReportChanged();let r=!1;for(const o of n)await i.fields.find(o).validate()||(r=!0);return r?i.buildErrorInfoObject():void 0}}}async updateMany({where:e,set:n}){if(ke.throwErrorIfFilterIsEmpty(e,\"updateMany\"),this._dataProvider.isProxy)return this._edp.updateMany(await this._translateWhereToFilter(e),n);{let i=0;for await(const r of this.query({where:e}))to(r,n),await Be(r).save(),i++;return i}}async update(e,n){{let r=Be(n,!1);if(r)return await r.save()}{let r=Be(e,!1);if(r)return to(e,n),r.save()}let i;if(typeof e==\"object\"?(i=this._getRefForExistingRow(e,this.metadata.idMetadata.getId(e)),Object.assign(i.instance,n)):i=this._getRefForExistingRow(n,e),this._dataProvider.isProxy)return await i.save(Object.keys(n));{const r=await i.reload();if(!r)throw this._notFoundError(i.id);for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){let s=i.fields[o];if(n[o]===void 0&&He(s.metadata))continue;s&&(r[o]=n[o])}return await this._fixTypes(r),await i.save()}}_getRefForExistingRow(e,n){let i=Be(e,!1);if(!i){const r=new this._entity(this._remult);for(const s of this._fieldsOf(e))r[s.key]=e[s.key];this._fixTypes(r);let o=new Ei(this._info,r,this,this._edp,this._remult,!1);typeof n==\"object\"&&(n=this.metadata.idMetadata.getId(n)),n?(o.id=n,o.originalId=n):o.id=o.getId(),i=o,Object.defineProperty(r,vn,{get:()=>o})}return i}async save(e){if(Array.isArray(e))return Gn(e,n=>this.save(n));{let n=Be(e,!1);if(n)return await n.save();if(e instanceof Op)return await this.getEntityRef(e).save();{let i=this.metadata.idMetadata.getId(e);return i===void 0?this.insert(e):this.update(i,e)}}}liveQuery(e){return e||(e={}),{subscribe:n=>{let i=n;return typeof n==\"function\"&&(i={next:n,complete:()=>{},error:()=>{}}),i.error??(i.error=()=>{}),i.complete??(i.complete=()=>{}),this._remult.liveQuerySubscriber.subscribe(this,e,i)}}}async _rawFind(e,n=!1,i){e||(e={}),this._defaultFindOptions&&(e={...this._defaultFindOptions,...e});let r=await this._buildEntityDataProviderFindOptions(e);n&&(delete r.orderBy,delete r.limit),Dn.onFind(this._info,e);const o=await this._edp.find(r);return await this._loadManyToOneForManyRows(o,e,i)}async find(e,n=!1){const i=new nl,r=await this._rawFind(e,n,i);return await i.resolveAll(),r}async _buildEntityDataProviderFindOptions(e){let n={};return n={},(!e.orderBy||Object.keys(e.orderBy).length===0)&&(e.orderBy=this._info.entityInfo.defaultOrderBy),n.where=await this._translateWhereToFilter(e.where),e.orderBy!==void 0&&(n.orderBy=rt.translateOrderByToSort(this.metadata,e.orderBy)),e.limit!==void 0&&(n.limit=e.limit),e.page!==void 0&&(n.page=e.page),n}async _fromJsonArray(e,n){const i=new nl,r=await this._loadManyToOneForManyRows(e.map(o=>{let s={};for(const l of this.metadata.fields.toArray())s[l.key]=l.valueConverter.fromJson(o[l.key]);return s}),n,i);return await i.resolveAll(),r}async _loadManyToOneForManyRows(e,n,i){var l;let r;n!=null&&n.load&&(r=n.load(this.metadata.fields));for(const a of this.metadata.fields)if(mt(a.valueType,!1)&&!He(a)){let c=!a.options.lazy;if(r!==void 0&&(c=r.includes(a)),c){let d=this._remult.repo(a.valueType),h=[];for(const g of e){let y=g[a.key];y!=null&&!h.includes(y)&&!d._idCache.has(y+\"\")&&h.push(y)}h.length>0&&await o(d,h)}}async function o(a,u){let f=await a.find({where:a.metadata.idMetadata.getIdFilter(...u)},!0);for(const c of f)a._addToCache(c)}let s=await Gn(e,async a=>await this._mapRawDataToResult(a,r));for(const a of this.metadata.fields){let u=He(a),f=a.options.defaultIncluded;if(((l=n==null?void 0:n.include)==null?void 0:l[a.key])!==void 0&&(f=n.include[a.key]),u&&f){const c=u.toRepo;for(const d of s){let{findOptions:h,returnNull:g}=this._findOptionsBasedOnRelation(u,a,f,d,c);if(g)d[a.key]=null;else{const y=u.toEntity,p=c;i.load({entityType:y,find:m=>p._rawFind(m,!1,i),metadata:p.metadata},h).then(m=>{m.length==0&&u.type==\"toOne\"||(d[a.key]=u.type!==\"toMany\"?m.length==0?null:m[0]:m)})}}}}return s}_findOptionsBasedOnRelation(e,n,i,r,o){let s=!1,l=!1,a=[],u={},f=[];typeof e.options.findOptions==\"function\"?f.push(e.options.findOptions(r)):typeof e.options.findOptions==\"object\"&&f.push(e.options.findOptions),typeof i==\"object\"&&f.push(i);for(const h of f){h.where&&a.push(h.where);for(const g of[\"limit\",\"include\",\"orderBy\"])h[g]&&(u[g]=h[g])}const c=e.getFields(),d=h=>{let g=e.type===\"reference\"?Be(r).fields.find(n.key).getId():r[h];return(e.type===\"toOne\"||e.type===\"reference\")&&(g===null?s=!0:g===void 0?l=!0:e.type===\"reference\"&&typeof g==\"object\"&&(g=o.metadata.idMetadata.getId(g))),g};c.compoundIdField&&(e.type===\"toMany\"?a.push({[c.compoundIdField]:this.metadata.idMetadata.getId(r)}):a.push(o.metadata.idMetadata.getIdFilter(d(c.compoundIdField))));for(const h in c.fields)Object.prototype.hasOwnProperty.call(c.fields,h)&&a.push({[h]:d(c.fields[h])});return u.where={$and:a},(e.type===\"toOne\"||e.type===\"reference\")&&u.orderBy&&(u.limit=1),{findOptions:u,returnNull:s,returnUndefined:l}}async _mapRawDataToResult(e,n){if(!e)return;let i=new this._entity(this._remult),r=new Ei(this._info,i,this,this._edp,this._remult,!1);return Object.defineProperty(i,vn,{get:()=>r}),await r.loadDataFrom(e,n),r.saveOriginalData(),i}toJson(e){return e==null?e:Array.isArray(e)?e.map(n=>this.toJson(n)):typeof e.then==\"function\"?e.then(n=>this.toJson(n)):this.getEntityRef(e).toApiJson(!0)}fromJson(e,n){if(e==null)return e;if(Array.isArray(e))return e.map(r=>this.fromJson(r,n));let i=new this._entity(this._remult);for(const r of this._fieldsOf(e))if(mt(r.valueType,!1)){let s=e[r.key];typeof s==\"string\"||typeof s==\"number\"?i[r.key]=s:i[r.key]=this._remult.repo(r.valueType).fromJson(s)}else e[r.key]!==void 0&&(i[r.key]=r.valueConverter.fromJson(e[r.key]));if(this._fixTypes(i),n)return this.create(i);{let r=new Ei(this._info,i,this,this._edp,this._remult,!1);return Object.defineProperty(i,vn,{get:()=>r}),r.saveOriginalData(),i}}async count(e){return this._edp.count(await this._translateWhereToFilter(e))}async deleteMany({where:e}){if(ke.throwErrorIfFilterIsEmpty(e,\"deleteMany\"),this._dataProvider.isProxy)return this._edp.deleteMany(await this._translateWhereToFilter(e));{let n=0;for await(const i of this.query({where:e}))await Be(i).delete(),n++;return n}}async findOne(e,n=!1){let i,r;if(e||(e={}),e.useCache){let o=ko(e,this.metadata),s=JSON.stringify(o);if(r=this._cache.get(s),r!==void 0)if(r.value&&this.getEntityRef(r.value).wasDeleted())r=void 0,this._cache.delete(s);else return this._cache.get(s).promise;else r={value:void 0,promise:void 0},this._cache.set(s,r)}return i=this.find({...e,limit:1},n).then(async o=>{let s;return o.length>0&&(s=o[0]),!s&&e.createIfNotFound&&(s=this.create(),e.where&&await tl(this.metadata,e.where,s)),s}),r&&(r.promise=i=i.then(o=>(r.value=o,o))),i}async findFirst(e,n,i=!1){if(n||(n={}),e)if(n.where){let r=n.where;n.where={$and:[r,e]}}else n.where=e;return this.findOne(n,i)}_fieldsOf(e){let n=Object.keys(e);return this.metadata.fields.toArray().filter(i=>n.includes(i.key))}create(e){var i;let n=new this._entity(this._remult);if(e){for(const r of this._fieldsOf(e))n[r.key]=e[r.key];this._fixTypes(n)}return(i=this._defaultFindOptions)!=null&&i.where&&(tl(this.metadata,this._defaultFindOptions.where,n),this._fixTypes(n)),this.getEntityRef(n),n}async _fixTypes(e){for(const n of this._fieldsOf(e)){const i=e[n.key];if(i!=null)if(n.valueType===Date&&!(i instanceof Date))e[n.key]=n.valueConverter.fromJson(n.valueConverter.toJson(i));else for(const[r,o]of[[String,\"string\"],[Number,\"number\"],[Boolean,\"boolean\"]])n.valueType===r&&typeof i!==o&&(e[n.key]=n.valueConverter.fromJson(n.valueConverter.toJson(i)))}return e}findId(e,n){if(e==null)return null;if(typeof e!=\"string\"&&typeof e!=\"number\")throw new Error(\"id can be either number or string, but got: \"+typeof e);return this.findFirst({},{...n,where:this.metadata.idMetadata.getIdFilter(e)},!0)}async _translateWhereToFilter(e){var i,r;e||(e={}),(i=this._defaultFindOptions)!=null&&i.where&&(e={$and:[e,(r=this._defaultFindOptions)==null?void 0:r.where]}),this._dataProvider.isProxy||(this.metadata.options.backendPreprocessFilter&&(e=await this.metadata.options.backendPreprocessFilter(e,{metadata:this.metadata,getFilterPreciseValues:o=>ke.getPreciseValues(this.metadata,o||e)})),this.metadata.options.backendPrefilter&&(e={$and:[e,await ke.resolve(this.metadata.options.backendPrefilter)]}));let n=await ke.fromEntityFilter(this.metadata,e);return n&&!this._dataProvider.isProxy&&(n=await ke.translateCustomWhere(n,this.metadata,this._remult)),n}}function yp(t,e){let n=he.columnsOfType.get(t);n||he.columnsOfType.set(t,n=[]);let i=mt(t)(e),r=z1(t),o=Object.getPrototypeOf(t);for(;o!=null;){let s=he.columnsOfType.get(o);s&&n.unshift(...s.filter(a=>!n.find(u=>u.key==a.key)));let l=mt(o,!1);if(l){let a=l(e);i={...a,...i};let u=[\"saving\",\"saved\",\"deleting\",\"deleted\",\"validation\"];for(const f of u)if(a[f]&&a[f]!==i[f]){let c=i[f];i[f]=async(d,h)=>{await c(d,h),await a[f](d,h)}}}o=Object.getPrototypeOf(o)}return new kp(bp(n,e),i,e,t,r)}class pp{constructor(e,n,i,r){var o;this.fieldsMetadata=e,this.instance=n,this.remult=i,this.isNewRow=r,this._isLoading=!1,this.lookups=new Map,this.originalValues={};{let s=i;s!=null&&s.iAmRemultProxy&&(i=he.remultFactory())}for(const s of e)if(mt(s.valueType,!1)&&i){let a=new H1(i.repo(s.valueType),!!He(s),s.allowNull);this.lookups.set(s.key,a);let u=n[s.key],f;Object.defineProperty(n,s.key,{get:()=>(this._subscribers&&(this._subscribers.reportObserved(),f||(f=this.fields.find(s.key),f._subscribers||(f._subscribers=new Ci)),f._subscribers.reportObserved()),a.item),set:c=>{var d;a.set(c),(d=this._subscribers)==null||d.reportChanged(),f||(f=this.fields.find(s.key),f._subscribers||(f._subscribers=new Ci)),f._subscribers.reportChanged()},enumerable:!0}),a.set(u)}else if(((o=He(s))==null?void 0:o.type)===\"toOne\"){let a=n.hasOwnProperty(s.key),u=n[s.key];r&&!u&&(a=!1),Object.defineProperty(n,s.key,{get:()=>u,set:f=>{if(u=f,f===void 0)return;const c=s.options;if(c.field&&(this.instance[c.field]=He(s).toRepo.metadata.idMetadata.getId(f)),c.fields){for(const d in c.fields)if(Object.prototype.hasOwnProperty.call(c.fields,d)){const h=c.fields[d];this.instance[h]=f==null?null:f[d]}}},enumerable:!0}),a&&(n[s.key]=u)}}get error(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._error}set error(e){var n;this._error=e,(n=this._subscribers)==null||n.reportChanged()}subscribe(e){return this.initSubscribers(),this._subscribers.subscribe(e)}initSubscribers(){if(!this._subscribers){this._subscribers=new Ci;for(const e of this.fieldsMetadata){let n=mt(e.valueType,!1),i=this.fields.find(e.key);if(i._subscribers=new Ci,!(n&&this.remult)){let r=this.instance[e.key];Object.defineProperty(this.instance,e.key,{get:()=>(this._subscribers.reportObserved(),i._subscribers.reportObserved(),r),set:o=>{r=o,this._subscribers.reportChanged(),i._subscribers.reportChanged()},enumerable:!0})}}}}get isLoading(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._isLoading}set isLoading(e){var n;this._isLoading=e,(n=this._subscribers)==null||n.reportChanged()}async waitLoad(){await Gn([...this.lookups.values()],e=>e.waitLoad())}__assertValidity(){if(!this.hasErrors())throw this.buildErrorInfoObject()}buildErrorInfoObject(){let e={modelState:Object.assign({},this.errors),message:this.error};if(!e.message){for(const n of this.fieldsMetadata)if(this.errors[n.key]){e.message=this.fields[n.key].metadata.caption+\": \"+this.errors[n.key],this.error=e.message;break}}return e}catchSaveErrors(e){let n=e;if(n instanceof Promise)return n.then(r=>this.catchSaveErrors(r));n.error&&(n=n.error),n.message?this.error=n.message:n.Message?this.error=n.Message:this.error=n;let i=n.modelState;throw i||(i=n.ModelState),i&&(this.errors=i),e}__clearErrorsAndReportChanged(){this.errors=void 0,this.error=void 0,this._reportChangedToEntityAndFields()}_reportChangedToEntityAndFields(){if(this._subscribers){this._subscribers.reportChanged();for(const e of this.fields)e._subscribers.reportChanged()}}hasErrors(){var e;return(e=this._subscribers)==null||e.reportObserved(),!this.error&&this.errors==null}copyDataToObject(e=!1){let n={};for(const i of this.fieldsMetadata){let r=this.lookups.get(i.key),o;const s=He(i);r?o=r.id:o=this.instance[i.key],s&&e&&!i.allowNull&&o==null&&(s.toRepo.metadata.idMetadata.field.valueType===Number?o=0:o=\"\"),(!s||s.type===\"reference\")&&(o!==void 0&&(o=i.valueConverter.toJson(o),o!=null&&(o=i.valueConverter.fromJson(JSON.parse(JSON.stringify(o))))),n[i.key]=o)}return n}saveOriginalData(){this.originalValues=this.copyDataToObject(),this.saveMoreOriginalData()}saveMoreOriginalData(){}async validate(){if(this.__clearErrorsAndReportChanged(),await this.__performColumnAndEntityValidations(),this.hasErrors(),!this.hasErrors())return this.buildErrorInfoObject()}async __validateEntity(){this.__clearErrorsAndReportChanged(),await this.__performColumnAndEntityValidations(),this.__assertValidity()}async __performColumnAndEntityValidations(){}toApiJson(e=!1,n=!1){let i={};for(const r of this.fieldsMetadata)if(n||!this.remult||r.includedInApi(this.instance)){let o,s=this.lookups.get(r.key),l=!1;s?e?(o=s.toJson(),l=!0,i[r.key]=o):o=s.id:He(r)&&!e?l=!0:(o=this.instance[r.key],this.remult||o&&mt(o.constructor,!1)&&(o=Be(o).getId())),l||(i[r.key]=r.valueConverter.toJson(o))}return i}async _updateEntityBasedOnApi(e,n=!1){let i=Object.keys(e);for(const r of this.fieldsMetadata)if(i.includes(r.key)&&r.includedInApi(this.instance)&&(!this.remult||n||r.apiUpdateAllowed(this.instance))){let o=this.lookups.get(r.key);o?o.id=e[r.key]:this.instance[r.key]=r.valueConverter.fromJson(e[r.key])}await Gn([...this.fields].filter(r=>!He(r.metadata)),r=>r.load())}}class Ei extends pp{constructor(e,n,i,r,o,s){if(super(e.fieldsMetadata,n,o,s),this.info=e,this.repository=i,this.edp=r,this._isNew=s,this._wasDeleted=!1,this._saving=!1,this.metadata=e,s)for(const l of e.fieldsMetadata)l.options.defaultValue&&n[l.key]===void 0&&(typeof l.options.defaultValue==\"function\"?n[l.key]=l.options.defaultValue(n):n[l.key]||(n[l.key]=l.options.defaultValue));this.info.options.entityRefInit&&this.info.options.entityRefInit(this,n),Dn.entityRefInit&&Dn.entityRefInit(this,n)}clone(){const e=this.toApiJson(!0,!0);return this.repository.fromJson(e,this.isNew())}get relations(){return this.repository.relations(this.instance)}get apiUpdateAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiUpdate)}get apiDeleteAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiDelete)}get apiInsertAllowed(){return this.remult.isAllowedForInstance(this.instance,this.metadata.options.allowApiInsert)}getId(){const e=n=>{let i=this.lookups.get(n.key);return i?i.id:this.instance[n.key]};return this.metadata.idMetadata.field instanceof $t?this.metadata.idMetadata.field.getId(e):e(this.metadata.idMetadata.field)}saveMoreOriginalData(){this.originalId=this.getId()}wasDeleted(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._wasDeleted}undoChanges(){this.loadDataFrom(this.originalValues),this.__clearErrorsAndReportChanged()}async reload(){return await this.edp.find({where:await this.getIdFilter()}).then(async e=>{if(e.length===0)throw this.repository._notFoundError(this.id);await this.loadDataFrom(e[0]),this.saveOriginalData()}),this._reportChangedToEntityAndFields(),this.instance}get fields(){if(!this._columns){let e=[],n={find:i=>n[typeof i==\"string\"?i:i.key],[Symbol.iterator]:()=>e[Symbol.iterator](),toArray:()=>e};for(const i of this.info.fieldsMetadata)e.push(n[i.key]=new ol(i.options,i,this.instance,this,this));this._columns=n}return this._columns}async save(e){var n;try{if(this._saving)throw new Error(\"cannot save while entity is already saving\");if(this._saving=!0,this.wasDeleted())throw new Error(\"cannot save a deleted row\");this.isLoading=!0,e===void 0&&await this.__validateEntity();let i=!1,r=this.buildLifeCycleEvent(()=>i=!0);if(!this.repository._dataProvider.isProxy){for(const u of this.fields)u.metadata.options.saving&&await u.metadata.options.saving(this.instance,u,r);this.info.entityInfo.saving&&await this.info.entityInfo.saving(this.instance,r)}this.__assertValidity();let o=this.copyDataToObject(this.isNew()),s=[];for(const u of this.metadata.fields)if(u.dbReadOnly||e!==void 0&&!e.includes(u.key)){o[u.key]=void 0,s.push(u.key);let f=this.fields.find(u);f.value=f.originalValue}let l,a=this.isNew();try{if((n=this._subscribers)==null||n.reportChanged(),this.isNew())l=await this.edp.insert(o);else{let u={},f=!1;for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c];this.fields.find(c).valueChanged()&&!s.includes(c)&&(u[c]=d,f=!0)}if(!f)return this.instance;i?l=(await this.edp.find({where:await this.getIdFilter()}))[0]:l=await this.edp.update(this.id,u)}if(await this.loadDataFrom(l),r.id=this.getId(),!this.repository._dataProvider.isProxy&&(this.info.entityInfo.saved&&await this.info.entityInfo.saved(this.instance,r),this.repository.listeners))for(const u of this.repository.listeners.filter(f=>f.saved))await u.saved(this.instance,a);return await this.repository._remult.liveQueryPublisher.itemChanged(this.repository.metadata.key,[{id:this.getId(),oldId:this.getOriginalId(),deleted:!1}]),this.saveOriginalData(),this._isNew=!1,this.instance}catch(u){await this.catchSaveErrors(u)}}finally{this.isLoading=!1,this._reportChangedToEntityAndFields(),this._saving=!1}}async processInsertResponseDto(e){return await this.loadDataFrom(e),this.saveOriginalData(),this._isNew=!1,this.instance}async buildDtoForInsert(){await this.__validateEntity(),this.__assertValidity();let e=this.copyDataToObject(this.isNew()),n=[];for(const i of this.metadata.fields)if(i.dbReadOnly){e[i.key]=void 0,n.push(i.key);let r=this.fields.find(i);r.value=r.originalValue}return e}buildLifeCycleEvent(e=()=>{}){const n=this;return{isNew:n.isNew(),fields:n.fields,id:n.getId(),originalId:n.getOriginalId(),metadata:n.repository.metadata,repository:n.repository,preventDefault:()=>e(),relations:n.repository.relations(n.instance)}}async getIdFilter(){return await this.repository._translateWhereToFilter(this.repository.metadata.idMetadata.getIdFilter(this.id))}async delete(){this.__clearErrorsAndReportChanged();let e=!0,n=this.buildLifeCycleEvent(()=>e=!1);this.repository._dataProvider.isProxy||this.info.entityInfo.deleting&&await this.info.entityInfo.deleting(this.instance,n),this.__assertValidity();try{if(e&&await this.edp.delete(this.id),this.repository._dataProvider.isProxy||this.info.entityInfo.deleted&&await this.info.entityInfo.deleted(this.instance,n),this.repository.listeners)for(const i of this.repository.listeners.filter(r=>r.deleted))await i.deleted(this.instance);await this.repository._remult.liveQueryPublisher.itemChanged(this.repository.metadata.key,[{id:this.getId(),oldId:this.getOriginalId(),deleted:!0}]),this._wasDeleted=!0}catch(i){await this.catchSaveErrors(i)}}async loadDataFrom(e,n){for(const i of this.info.fields){let r=this.lookups.get(i.key);r?(r.id=e[i.key],n===void 0?!i.options.lazy&&!He(i)&&await r.waitLoad():n.includes(i)&&await r.waitLoad()):He(i)||(this.instance[i.key]=e[i.key])}await this.calcServerExpression(),this.id=this.getId()}getOriginalId(){return this.originalId}async calcServerExpression(){if(rp())for(const e of this.info.fieldsMetadata)e.options.serverExpression&&(this.instance[e.key]=await e.options.serverExpression(this.instance))}isNew(){var e;return(e=this._subscribers)==null||e.reportObserved(),this._isNew}wasChanged(){var e;(e=this._subscribers)==null||e.reportObserved();for(const n of this.fields){const i=He(n.metadata);if((!i||i.type==\"reference\")&&n.valueChanged())return!0}return!1}async __performColumnAndEntityValidations(){for(const e of this.fieldsMetadata)e.options.validate&&await new ol(e.options,e,this.instance,this,this).__performValidation();if(this.info.entityInfo.validation){let e=this.buildLifeCycleEvent(()=>{});await this.info.entityInfo.validation(this.instance,e)}if(this.repository.listeners)for(const e of this.repository.listeners.filter(n=>n.validating))await e.validating(this.instance)}}function bp(t,e){return t.map(n=>Cp(n.settings(e),e))}class ol{constructor(e,n,i,r,o){this.settings=e,this.metadata=n,this.container=i,this.helper=r,this.rowBase=o,this.target=this.settings.target,this.entityRef=this.helper}subscribe(e){return this._subscribers||this.rowBase.initSubscribers(),this._subscribers.subscribe(e)}valueIsNull(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id===void 0||e.id===null:this.value===null}originalValueIsNull(){return this.reportObserved(),this.rowBase.lookups.get(this.metadata.key),this.rawOriginalValue()===null}async load(){let e=this.rowBase.lookups.get(this.metadata.key),n=He(this.metadata);if(n){if(n.type===\"toMany\")return this.container[this.metadata.key]=await this.helper.repository.relations(this.container)[this.metadata.key].find();{let i=await this.helper.repository.relations(this.container)[this.metadata.key].findOne();if(i)this.container[this.metadata.key]=i;else return null}}else if(e)return this.valueChanged()&&await e.waitLoadOf(this.rawOriginalValue()),await e.waitLoad();return this.value}reportObserved(){var e,n;(e=this._subscribers)==null||e.reportObserved(),(n=this.rowBase._subscribers)==null||n.reportObserved()}reportChanged(){var e,n;(e=this._subscribers)==null||e.reportChanged(),(n=this.rowBase._subscribers)==null||n.reportChanged()}get error(){if(this.reportObserved(),!!this.rowBase.errors)return this.rowBase.errors[this.metadata.key]}set error(e){this.rowBase.errors||(this.rowBase.errors={}),this.rowBase.errors[this.metadata.key]=e,this.reportChanged()}get displayValue(){return this.reportObserved(),this.value!=null?this.settings.displayValue?this.settings.displayValue(this.container,this.value):this.metadata.valueConverter.displayValue?this.metadata.valueConverter.displayValue(this.value):this.value.toString():\"\"}get value(){return this.container[this.metadata.key]}set value(e){this.container[this.metadata.key]=e}get originalValue(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.get(this.rawOriginalValue()):this.rowBase.originalValues[this.metadata.key]}rawOriginalValue(){return this.rowBase.originalValues[this.metadata.key]}setId(e){this.value=e}getId(){let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id!=null?e.id:null:this.value}get inputValue(){this.reportObserved();let e=this.rowBase.lookups.get(this.metadata.key);return e?e.id!=null?e.id.toString():null:this.metadata.valueConverter.toInput(this.value,this.settings.inputType)}set inputValue(e){let n=this.rowBase.lookups.get(this.metadata.key);n?n.setId(e):this.value=this.metadata.valueConverter.fromInput(e,this.settings.inputType)}valueChanged(){this.reportObserved();let e=this.value,n=this.rowBase.lookups.get(this.metadata.key);return n&&(e=n.id),JSON.stringify(this.metadata.valueConverter.toJson(this.rowBase.originalValues[this.metadata.key]))!=JSON.stringify(this.metadata.valueConverter.toJson(e))}async __performValidation(){var e;try{const n=i=>{i!==!0&&i!==void 0&&!this.error&&(typeof i==\"string\"&&i.length>0?this.error=i:this.error=\"invalid value\")};if(this.settings.validate){let i=this,r={entityRef:this.entityRef,get error(){return i.error},set error(o){i.error=o},isNew:(e=this.entityRef)==null?void 0:e.isNew(),load:()=>i.load(),metadata:i.metadata,originalValue:i.originalValue,value:i.value,valueChanged:()=>i.valueChanged(),originalValueIsNull:()=>i.originalValueIsNull(),valueIsNull:()=>i.valueIsNull(),isBackend:()=>{var o,s,l;return!((l=(s=(o=i.rowBase)==null?void 0:o.remult)==null?void 0:s.dataProvider)!=null&&l.isProxy)}};if(Array.isArray(this.settings.validate))for(const o of this.settings.validate)n(await o(this.container,r));else typeof this.settings.validate==\"function\"&&n(await this.settings.validate(this.container,r))}}catch(n){typeof n==\"string\"?this.error=n:this.error=n.message}}async validate(){return await this.__performValidation(),!this.error}}let _p={transformCaption:(t,e,n,i)=>n};const wp=he.captionTransformer||(he.captionTransformer=_p);function Yu(t,e,n,i){let r;return typeof t==\"function\"?n&&(r=t(n)):t&&(r=t),r=wp.transformCaption(n,e,r,i),r||(e?L1(e):\"\")}class vp{constructor(e,n,i){this.settings=e,this.entityDefs=n,this.remult=i,this.options=this.settings,this.target=this.settings.target,this.valueConverter=new Proxy(this.settings.valueConverter,{get:(r,o)=>{let s=r[o];return typeof s==\"function\"?(...l)=>{try{return r[o](...l)}catch(a){const u=`${String(o)} failed for value ${l==null?void 0:l[0]}. Error: ${typeof a==\"string\"?a:a.message}`;throw{message:this.caption+\": \"+u,modelState:{[this.key]:u}}}}:s}}),this.allowNull=!!this.settings.allowNull,this.valueType=this.settings.valueType,this.key=this.settings.key,this.inputType=this.settings.inputType,e.serverExpression&&(this.isServerExpression=!0),typeof this.settings.allowApiUpdate==\"boolean\"&&(this.readonly=this.settings.allowApiUpdate),this.inputType||(this.inputType=this.valueConverter.inputType),this.dbName=e.dbName,this.dbName==null&&(this.dbName=e.key),this.caption=Yu(e.caption,e.key,i,n)}apiUpdateAllowed(e){return this.options.allowApiUpdate===void 0?!0:this.remult.isAllowedForInstance(e,this.options.allowApiUpdate)}displayValue(e){return this.entityDefs.getEntityMetadataWithoutBreakingTheEntity(e).fields.find(this.key).displayValue}includedInApi(e){return this.options.includeInApi===void 0?!0:this.remult.isAllowedForInstance(e,this.options.includeInApi)}toInput(e,n){return this.valueConverter.toInput(e,n)}fromInput(e,n){return this.valueConverter.fromInput(e,n)}async getDbName(){return Eo(this,this.entityDefs)}get dbReadOnly(){return this.settings.dbReadOnly}}class kp{constructor(e,n,i,r,o){if(this.entityInfo=n,this.remult=i,this.entityType=r,this.key=o,this.fieldsMetadata=[],this.idMetadata={getId:l=>{if(l==null)return l;const a=Be(l,!1);return a?a.getId():this.idMetadata.field instanceof $t?this.idMetadata.field.getId(l):l[this.idMetadata.field.key]},field:void 0,get fields(){return this.field instanceof $t?this.field.fields:[this.field]},createIdInFilter:l=>{if(l.length>0)return{$or:l.map(a=>this.idMetadata.getIdFilter(Be(a).getId()))}},isIdField:l=>l.key==this.idMetadata.field.key,getIdFilter:(...l)=>{if(this.idMetadata.field instanceof $t){let a=this.idMetadata.field;return l.length==1?a.isEqualTo(l[0]):{$or:l.map(u=>a.isEqualTo(u))}}return l.length==1?{[this.idMetadata.field.key]:l[0]}:{[this.idMetadata.field.key]:l}}},this.options=n,this.options.allowApiCrud!==void 0){let l;typeof this.options.allowApiCrud==\"function\"?l=(a,u)=>this.options.allowApiCrud(u):l=this.options.allowApiCrud,this.options.allowApiDelete===void 0&&(this.options.allowApiDelete=l),this.options.allowApiInsert===void 0&&(this.options.allowApiInsert=l),this.options.allowApiUpdate===void 0&&(this.options.allowApiUpdate=l),this.options.allowApiRead===void 0&&(this.options.allowApiRead=this.options.allowApiCrud)}this.options.allowApiRead===void 0&&(this.options.allowApiRead=!0),this.key||(this.key=r.name),n.dbName||(n.dbName=this.key),this.dbName=n.dbName;let s={find:l=>s[typeof l==\"string\"?l:l.key],[Symbol.iterator]:()=>this.fieldsMetadata[Symbol.iterator](),toArray:()=>this.fieldsMetadata};for(const l of e)this.fieldsMetadata.push(s[l.key]=new vp(l,this,i));if(this.fields=s,this.caption=Yu(n.caption,this.key,i,this),n.id){let l=typeof n.id==\"function\"?n.id(this.fields):Object.keys(n.id).map(a=>this.fields.find(a));Array.isArray(l)?l.length>1?this.idMetadata.field=new $t(...l):l.length==1&&(this.idMetadata.field=l[0]):this.idMetadata.field=l}this.idMetadata.field||(this.fields.id?this.idMetadata.field=this.fields.id:this.idMetadata.field=[...this.fields][0])}apiUpdateAllowed(e){return this.options.allowApiUpdate===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiUpdateAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiUpdate)}get apiReadAllowed(){return this.options.allowApiRead===void 0?!0:this.remult.isAllowed(this.options.allowApiRead)}apiDeleteAllowed(e){return this.options.allowApiDelete===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiDeleteAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiDelete)}apiInsertAllowed(e){return this.options.allowApiUpdate===void 0?!1:e?this.getEntityMetadataWithoutBreakingTheEntity(e).apiInsertAllowed:this.remult.isAllowedForInstance(void 0,this.options.allowApiInsert)}getEntityMetadataWithoutBreakingTheEntity(e){let n=Be(e,!1);return n||this.remult.repo(this.entityType).getEntityRef({...e})}getDbName(){return Xu(this)}}function Sp(t){var e,n;return((n=(e=t.options)==null?void 0:e.valueConverter)==null?void 0:n.fieldTypeInDb)===\"autoincrement\"}const Ep=Symbol.for(\"storableMember\"),zr=Symbol.for(\"fieldOptionalValues\");function Ku(t,e){let n={};for(const i of t)if(i)if(typeof i==\"function\")i(n,e);else{const{validate:r,...o}=i;n.validate=Di(n.validate,r),Object.assign(n,o)}return n}function Cp(t,e){if(t.valueType){let n=t.valueType[Ep];n&&(t=Ku([...n,t],e))}if(t.valueType==String){let n=t;t.valueConverter||(n.valueConverter=Ze.String)}if(t.valueType==Number){let n=t;t.valueConverter||(n.valueConverter=Ze.Number)}if(t.valueType==Date){let n=t;t.valueConverter||(n.valueConverter=Ze.Date)}if(t.valueType==Boolean){let n=t;n.valueConverter||(n.valueConverter=Ze.Boolean)}if(!t.valueConverter){if(mt(t.valueType,!1)){let i;t.valueConverter={toDb:r=>r,fromDb:r=>r},t.valueConverter=new Proxy(t.valueConverter,{get(r,o){if(r[o]===void 0&&i===void 0){if(o===\"inputType\")return\"\";i=e.repo(t.valueType).metadata.idMetadata.field.valueType===Number;for(const s of[\"fieldTypeInDb\",\"toJson\",\"fromJson\",\"toDb\",\"fromDb\"])r[s]=i?Ze.Integer[s]:Ze.String[s]}return r[o]},set(r,o,s,l){return r[o]=s,!0}})}else t.valueConverter=Ze.Default;return t}return t.valueConverter.toJson||(t.valueConverter.toJson=n=>n),t.valueConverter.fromJson||(t.valueConverter.fromJson=n=>n),t.valueConverter.toDb||(t.valueConverter.toDb=n=>t.valueConverter.toJson(n)),t.valueConverter.fromDb||(t.valueConverter.fromDb=n=>t.valueConverter.fromJson(n)),t.valueConverter.toInput||(t.valueConverter.toInput=n=>t.valueConverter.toJson(n)),t.valueConverter.fromInput||(t.valueConverter.fromInput=n=>t.valueConverter.fromJson(n)),t}class Op{get _(){return Be(this)}save(){return Be(this).save()}assign(e){return to(this,e),this}delete(){return this._.delete()}isNew(){return this._.isNew()}get $(){return this._.fields}}class Ip{constructor(e,n){this.options=e,this.repo=n,this._count=void 0,this.options||(this.options={}),this.options.pageSize||(this.options.pageSize=lp.defaultPageSize)}async getPage(e){return e<1&&(e=1),this.repo.find({where:this.options.where,orderBy:this.options.orderBy,limit:this.options.pageSize,page:e,load:this.options.load,include:this.options.include})}async count(){return this._count===void 0&&(this._count=await this.repo.count(this.options.where)),this._count}async forEach(e){let n=0;for await(const i of this)await e(i),n++;return n}async paginator(e){this.options.orderBy=rt.createUniqueEntityOrderBy(this.repo.metadata,this.options.orderBy);let n=await this.repo.find({where:{$and:[this.options.where,e]},orderBy:this.options.orderBy,limit:this.options.pageSize,load:this.options.load,include:this.options.include}),i,r=n.length==this.options.pageSize;if(r){let o=await this.repo._createAfterFilter(this.options.orderBy,n[n.length-1]);i=()=>this.paginator(o)}return{count:()=>this.count(),hasNextPage:r,items:n,nextPage:i}}[Symbol.asyncIterator](){this.options.where||(this.options.where={});let e=this.options.orderBy;this.options.orderBy=rt.createUniqueEntityOrderBy(this.repo.metadata,e);let n=-1,i,r,o=0;return r=async()=>{if(this.options.progress&&this.options.progress.progress(o++/await this.count()),i===void 0||n==i.items.length){if(i&&!i.hasNextPage)return{value:void 0,done:!0};let s=i;if(i?i=await i.nextPage():i=await this.paginator(),n=0,i.items.length==0)return{value:void 0,done:!0};if((s==null?void 0:s.items.length)>0&&this.repo.getEntityRef(s.items[0]).getId()==this.repo.getEntityRef(i.items[0]).getId())throw new Error(\"pagination failure, returned same first row\")}if(n<i.items.length)return{value:i.items[n++],done:!1}},{next:async()=>r()}}}class Ci{reportChanged(){this._subscribers&&this._subscribers.forEach(e=>e.reportChanged())}reportObserved(){this._subscribers&&this._subscribers.forEach(e=>e.reportObserved())}subscribe(e){let n;return typeof e==\"function\"?n={reportChanged:()=>e(),reportObserved:()=>{}}:n=e,this._subscribers||(this._subscribers=[]),this._subscribers.push(n),()=>this._subscribers=this._subscribers.filter(i=>i!=n)}}function Tp(t){return t.metadata?t.metadata:mt(t,!1)?wt.repo(t).metadata:t}function Mp(t){return mt(t,!1)?wt.repo(t):t}async function Gn(t,e){const n=[];for(let i=0;i<t.length;i++){const r=t[i];n.push(await e(r,i))}return n}const sl=Ni(t=>!isNaN(t)&&isFinite(t));class En{static object(...e){return nt(void 0,...e)}static json(...e){let n=e;return n.valueConverter&&!n.valueConverter.fieldTypeInDb&&(n.valueConverter.fieldTypeInDb=\"json\"),nt(void 0,{valueConverter:{fieldTypeInDb:\"json\"}},...e)}static dateOnly(...e){return nt(()=>Date,{valueConverter:Ze.DateOnly},...e)}static date(...e){return nt(()=>Date,...e)}static integer(...e){return nt(()=>Number,{valueConverter:Ze.Integer,validate:sl},...e)}static autoIncrement(...e){return nt(()=>Number,{allowApiUpdate:!1,dbReadOnly:!0,valueConverter:{...Ze.Integer,fieldTypeInDb:\"autoincrement\"}},...e)}static number(...e){return nt(()=>Number,{validate:sl},...e)}static createdAt(...e){return nt(()=>Date,{allowApiUpdate:!1,saving:(n,i,{isNew:r})=>{r&&(i.value=new Date)}},...e)}static updatedAt(...e){return nt(()=>Date,{allowApiUpdate:!1,saving:(n,i)=>{i.value=new Date}},...e)}static uuid(...e){return nt(()=>String,{allowApiUpdate:!1,defaultValue:()=>xr(),saving:(n,i)=>{i.value||(i.value=xr())}},...e)}static cuid(...e){return nt(()=>String,{allowApiUpdate:!1,defaultValue:()=>Gs(),saving:(n,i)=>{i.value||(i.value=Gs())}},...e)}static literal(e,...n){return En.string({validate:(i,r)=>Lt.in(e())(i,r),[zr]:e},...n)}static enum(e,...n){let i;return nt(()=>e(),{validate:(r,o)=>Lt.enum(e())(r,o),[zr]:()=>Fi(e())},...n,r=>{if(r[zr]=()=>Fi(e()),i===void 0){let o=e();i=Fi(o).find(l=>typeof l==\"string\")?Ze.String:Ze.Integer}r.valueConverter?r.valueConverter.fieldTypeInDb||(r.valueConverter.fieldTypeInDb=i.fieldTypeInDb):r.valueConverter=i})}static string(...e){return nt(()=>String,...e)}static boolean(...e){return nt(()=>Boolean,...e)}}function nt(t,...e){return(n,i,r)=>{const o=typeof i==\"string\"?i:i.name.toString();let s=u=>{let f=Ku(e,u);f.required&&(f.validate=Di(f.validate,Lt.required,!0)),f.maxLength&&(f.validate=Di(f.validate,Lt.maxLength(f.maxLength))),f.minLength&&(f.validate=Di(f.validate,Lt.minLength(f.minLength))),!f.valueType&&t&&(f.valueType=t()),f.key||(f.key=o),f.dbName||(f.dbName=f.key);let c=f.valueType;return c||(c=typeof Reflect.getMetadata==\"function\"?Reflect.getMetadata(\"design:type\",n,o):[],f.valueType=c),f.target||(f.target=n),f};Ap(n);let l=he.columnsOfType.get(n.constructor);l||(l=[],he.columnsOfType.set(n.constructor,l));let a=l.find(u=>u.key==o);if(!a)l.push({key:o,settings:s});else{let u=a.settings;a.settings=f=>{let c=u(f),d=s(f);return Object.assign(c,d)}}}}function Ap(t){if(!t)throw new Error(\"Set the 'experimentalDecorators:true' option in your 'tsconfig' or 'jsconfig' (target undefined)\")}function Pp(t,...e){return(n,i)=>{var o;for(const s in n)if(Object.prototype.hasOwnProperty.call(n,s)){const l=n[s];(o=l==null?void 0:l.rawFilterInfo)!=null&&o.rawFilterTranslator&&(l.rawFilterInfo.key||(l.rawFilterInfo.key=s))}let r=s=>{let l={};for(const u of e)u&&(typeof u==\"function\"?u(l,s):Object.assign(l,u));let a=Object.getPrototypeOf(n);if(a){let u=mt(a,!1);if(u){let f=u(s);f&&(l={...f,...l})}}return l};return he.allEntities.push(n),sp(n,{key:t}),n[Ru]=r,n[zu]=t,n}}const ll=[\"rgb(101, 116, 205)\",\"rgb(149, 97, 226)\",\"rgb(246, 109, 155)\",\"rgb(184, 194, 204)\",\"rgb(227, 52, 47)\",\"rgb(246, 153, 63)\",\"rgb(255, 237, 74)\",\"rgb(56, 193, 114)\",\"rgb(132, 204, 22)\",\"rgb(77, 192, 181)\",\"rgb(52, 144, 220)\",\"rgba(0, 0, 255, 0.45)\"];class Np{constructor(e){ci(this,\"tables\");this.tables=e.map((n,i)=>{n.color=ll[i%ll.length];class r{}for(const o of n.fields)switch(o.type){case\"json\":En.json()(r.prototype,o.key);break;case\"number\":En.number()(r.prototype,o.key);break;case\"boolean\":En.boolean()(r.prototype,o.key);break;default:En.string()(r.prototype,o.key);break}return Pp(n.key,{allowApiCrud:!0,caption:n.caption,id:n.ids})(r),{...n,repo:wt.repo(r)}})}async getItemsForSelect(e,n){return(await this.tables.find(r=>r.key==e.entityKey).repo.find({limit:25,orderBy:{[e.captionField]:\"asc\"},where:{[e.captionField]:n?{$contains:n}:void 0}})).map(r=>({id:r[e.idField],caption:r[e.captionField]}))}async displayValueFor(e,n){const i=e.relationToOne,o=await this.tables.find(s=>s.key==i.entityKey).repo.findId(n);return o?o[i.captionField]:\"not found - \"+n}}function Fp(){const{subscribe:t,set:e}=re();return e(new Np(entities)),{subscribe:t}}const Ln=Fp();function al(t,e,n){const i=t.slice();return i[3]=e[n],i}function ul(t){let e,n,i,r,o,s=t[3].caption+\"\",l,a,u,f,c,d,h;return n=new Xt({props:{type:\"source\",position:ye.Left,id:`${t[3].key}-source-left`}}),r=new Xt({props:{type:\"target\",position:ye.Left,id:`${t[3].key}-target-left`}}),u=new Xt({props:{type:\"source\",position:ye.Right,id:`${t[3].key}-source-right`}}),c=new Xt({props:{type:\"target\",position:ye.Right,id:`${t[3].key}-target-right`}}),{c(){e=Z(\"div\"),te(n.$$.fragment),i=ne(),te(r.$$.fragment),o=ne(),l=ze(s),a=ne(),te(u.$$.fragment),f=ne(),te(c.$$.fragment),d=ne(),E(e,\"class\",\"entity-field svelte-cnmrjm\")},m(g,y){V(g,e,y),x(n,e,null),X(e,i),x(r,e,null),X(e,o),X(e,l),X(e,a),x(u,e,null),X(e,f),x(c,e,null),X(e,d),h=!0},p:le,i(g){h||(A(n.$$.fragment,g),A(r.$$.fragment,g),A(u.$$.fragment,g),A(c.$$.fragment,g),h=!0)},o(g){z(n.$$.fragment,g),z(r.$$.fragment,g),z(u.$$.fragment,g),z(c.$$.fragment,g),h=!1},d(g){g&&B(e),$(n),$(r),$(u),$(c)}}}function Dp(t){let e,n,i=t[0].caption+\"\",r,o,s,l,a=Pe(t[1]()),u=[];for(let c=0;c<a.length;c+=1)u[c]=ul(al(t,a,c));const f=c=>z(u[c],1,1,()=>{u[c]=null});return{c(){e=Z(\"div\"),n=Z(\"div\"),r=ze(i),o=ne(),s=Z(\"div\");for(let c=0;c<u.length;c+=1)u[c].c();E(n,\"class\",\"entity-name svelte-cnmrjm\"),E(s,\"class\",\"entity-fields svelte-cnmrjm\"),E(e,\"class\",\"entity-node svelte-cnmrjm\"),fe(e,\"--color\",t[0].color)},m(c,d){V(c,e,d),X(e,n),X(n,r),X(e,o),X(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);l=!0},p(c,[d]){if((!l||d&1)&&i!==(i=c[0].caption+\"\")&&Qe(r,i),d&2){a=Pe(c[1]());let h;for(h=0;h<a.length;h+=1){const g=al(c,a,h);u[h]?(u[h].p(g,d),A(u[h],1)):(u[h]=ul(g),u[h].c(),A(u[h],1),u[h].m(s,null))}for(Oe(),h=a.length;h<u.length;h+=1)f(h);Ie()}(!l||d&1)&&fe(e,\"--color\",c[0].color)},i(c){if(!l){for(let d=0;d<a.length;d+=1)A(u[d]);l=!0}},o(c){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)z(u[d]);l=!1},d(c){c&&B(e),Ot(u,c)}}}function Rp(t,e,n){const i=[\"data\"];Le(e,i);let{data:r}=e;const o=()=>r.fields;return t.$$set=s=>{e=we(we({},e),yt(s)),n(2,Le(e,i)),\"data\"in s&&n(0,r=s.data)},[r,o]}class zp extends ue{constructor(e){super(),ae(this,e,Rp,Dp,ce,{data:0})}}function Lp(t){let e,n,i,r,o,s;return e=new n1({props:{patternColor:\"#aaa\",gap:16}}),i=new Yy({}),o=new d1({props:{zoomable:!0,pannable:!0,height:120}}),{c(){te(e.$$.fragment),n=ne(),te(i.$$.fragment),r=ne(),te(o.$$.fragment)},m(l,a){x(e,l,a),V(l,n,a),x(i,l,a),V(l,r,a),x(o,l,a),s=!0},p:le,i(l){s||(A(e.$$.fragment,l),A(i.$$.fragment,l),A(o.$$.fragment,l),s=!0)},o(l){z(e.$$.fragment,l),z(i.$$.fragment,l),z(o.$$.fragment,l),s=!1},d(l){l&&(B(n),B(r)),$(e,l),$(i,l),$(o,l)}}}function Hp(t){let e,n,i;return n=new _y({props:{nodes:t[0],edges:t[1],nodeTypes:t[2],fitView:!0,snapGrid:[16,16],$$slots:{default:[Lp]},$$scope:{ctx:t}}}),{c(){e=Z(\"div\"),te(n.$$.fragment),fe(e,\"height\",\"100vh\")},m(r,o){V(r,e,o),x(n,e,null),i=!0},p(r,[o]){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){i||(A(n.$$.fragment,r),i=!0)},o(r){z(n.$$.fragment,r),i=!1},d(r){r&&B(e),$(n)}}}function Bp(t,e,n,i){return{sourceHandle:fl(n)+\"-source-\"+(t.position.x>e.position.x?\"left\":\"right\"),targetHandle:fl(i)+\"-target-\"+(t.position.x>e.position.x?\"right\":\"left\")}}function fl(t){const e=t.split(\"-\");return e[e.length-2]===\"source\"||e[e.length-2]===\"target\"?e.slice(0,e.length-2).join(\"-\"):t}function Vp(t,e,n){let i;j(t,Ln,a=>n(3,i=a));const r=re([]),o=re([]),s={entity:zp},l=()=>{var c;const a=i.tables.map((d,h)=>({id:d.repo.metadata.key,position:{x:h*300,y:0},data:d,type:\"entity\"})),u=localStorage.getItem(\"erd\");if(u){const d=JSON.parse(u);for(const h of d){const g=a.find(y=>y.id===h.id);g&&(g.position=h.position)}}r.set(a);const f=[];for(const d of i.tables){let h=function(g,y){const p=i.tables.find(m=>m.key===g);if(p){const m=a.find(b=>b.id===d.key),w=a.find(b=>b.id===p.key);for(const b in y)if(Object.prototype.hasOwnProperty.call(y,b)){const _=y[b];f.push({id:`${d.key}-${_}-to-one`,source:m.id,target:w.id,...Bp(m,w,_,b)})}}};for(const g of d.fields)g.relationToOne&&h((c=g.relationToOne)==null?void 0:c.entityKey,g.relationToOne.fields);for(const g of d.relations)i.tables.find(p=>p.key===g.entityKey)&&h(g.entityKey,g.fields)}console.table(f),o.set(f)};return t.$$.update=()=>{t.$$.dirty&8&&i&&l()},[r,o,s,i]}class qp extends ue{constructor(e){super(),ae(this,e,Vp,Hp,ce,{})}}function Wp(t){let e;return{c(){e=Z(\"h2\"),e.textContent=\"Ho nooo! 404.\"},m(n,i){V(n,e,i)},p:le,i:le,o:le,d(n){n&&B(e)}}}class Xp extends ue{constructor(e){super(),ae(this,e,null,Wp,ce,{})}}function cl(t,e,n){const i=t.slice();return i[16]=e[n],i}function dl(t){let e,n,i=t[16].caption+\"\",r,o,s,l;function a(){return t[9](t[16])}return{c(){e=Z(\"div\"),n=Z(\"button\"),r=ze(i),o=ne()},m(u,f){V(u,e,f),X(e,n),X(n,r),X(e,o),s||(l=de(n,\"click\",a),s=!0)},p(u,f){t=u,f&4&&i!==(i=t[16].caption+\"\")&&Qe(r,i)},d(u){u&&B(e),s=!1,l()}}}function Yp(t){let e,n,i,r,o,s,l=Pe(t[2]),a=[];for(let u=0;u<l.length;u+=1)a[u]=dl(cl(t,l,u));return{c(){e=Z(\"dialog\"),n=Z(\"form\"),i=Z(\"input\"),r=ne();for(let u=0;u<a.length;u+=1)a[u].c();E(i,\"placeholder\",\"search\")},m(u,f){V(u,e,f),X(e,n),X(n,i),on(i,t[0]),X(e,r);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null);t[10](e),o||(s=[de(i,\"input\",t[8]),de(n,\"submit\",t[5])],o=!0)},p(u,[f]){if(f&1&&i.value!==u[0]&&on(i,u[0]),f&68){l=Pe(u[2]);let c;for(c=0;c<l.length;c+=1){const d=cl(u,l,c);a[c]?a[c].p(d,f):(a[c]=dl(d),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=l.length}},i:le,o:le,d(u){u&&B(e),Ot(a,u),t[10](null),o=!1,qe(s)}}}function Kp(t,e,n){let i,r,o;j(t,Ln,b=>n(11,r=b));let{relation:s}=e;const l=re([]);j(t,l,b=>n(2,o=b));const a=re(\"\");j(t,a,b=>n(0,i=b));let u;const f=an();function c(b){f(\"select\",{_data:b})}function d(){f(\"close\",{})}Rn(()=>{u.showModal()});const h=b=>{r.getItemsForSelect(s,i).then(_=>l.set(_))};function g(b){b.preventDefault();let _;l.subscribe(I=>_=I),(_==null?void 0:_.length)===1&&(c(_[0].id),d())}function y(b){c(b),u.close(),d()}function p(){i=this.value,a.set(i)}const m=b=>y(b.id);function w(b){It[b?\"unshift\":\"push\"](()=>{u=b,n(1,u)})}return t.$$set=b=>{\"relation\"in b&&n(7,s=b.relation)},t.$$.update=()=>{t.$$.dirty&129&&s&&h()},[i,u,o,l,a,g,y,s,p,m,w]}class Jp extends ue{constructor(e){super(),ae(this,e,Kp,Yp,ce,{relation:7})}}function hl(t){let e,n;return e=new Jp({props:{relation:t[1].relationToOne}}),e.$on(\"close\",t[7]),e.$on(\"select\",t[8]),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&2&&(o.relation=i[1].relationToOne),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function Up(t){let e,n,i,r,o,s,l,a,u=t[3]&&hl(t);return{c(){e=Z(\"div\"),n=ze(t[2]),i=ne(),r=Z(\"button\"),r.textContent=\"🔎\",o=ne(),u&&u.c(),E(r,\"class\",\"icon-button\")},m(f,c){V(f,e,c),X(e,n),X(e,i),X(e,r),X(e,o),u&&u.m(e,null),s=!0,l||(a=de(r,\"click\",t[6]),l=!0)},p(f,[c]){(!s||c&4)&&Qe(n,f[2]),f[3]?u?(u.p(f,c),c&8&&A(u,1)):(u=hl(f),u.c(),A(u,1),u.m(e,null)):u&&(Oe(),z(u,1,1,()=>{u=null}),Ie())},i(f){s||(A(u),s=!0)},o(f){z(u),s=!1},d(f){f&&B(e),u&&u.d(),l=!1,a()}}}function jp(t,e,n){let i;j(t,Ln,h=>n(5,i=h));let{value:r}=e,{info:o}=e,s=\"\",l=!1;const a=an();function u(h){a(\"change\",{_data:h})}Rn(async()=>{const h=await i.displayValueFor(o,r);n(2,s=h)});const f=()=>n(3,l=!0),c=()=>n(3,l=!1),d=h=>{n(0,r=h.detail._data),u(r)};return t.$$set=h=>{\"value\"in h&&n(0,r=h.value),\"info\"in h&&n(1,o=h.info)},t.$$.update=()=>{t.$$.dirty&35&&(async()=>{const h=await i.displayValueFor(o,r);n(2,s=h)})()},[r,o,s,l,u,i,f,c,d]}class Gp extends ue{constructor(e){super(),ae(this,e,jp,Up,ce,{value:0,info:1})}}function Zp(t){let e,n,i;return{c(){e=Z(\"input\")},m(r,o){V(r,e,o),on(e,t[0]),n||(i=[de(e,\"input\",t[5]),de(e,\"change\",t[2])],n=!0)},p(r,o){o&1&&e.value!==r[0]&&on(e,r[0])},i:le,o:le,d(r){r&&B(e),n=!1,qe(i)}}}function Qp(t){let e,n,i;function r(s){t[3](s)}let o={info:t[1]};return t[0]!==void 0&&(o.value=t[0]),e=new Gp({props:o}),It.push(()=>ro(e,\"value\",r)),e.$on(\"change\",t[4]),{c(){te(e.$$.fragment)},m(s,l){x(e,s,l),i=!0},p(s,l){const a={};l&2&&(a.info=s[1]),!n&&l&1&&(n=!0,a.value=s[0],io(()=>n=!1)),e.$set(a)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){z(e.$$.fragment,s),i=!1},d(s){$(e,s)}}}function xp(t){let e,n,i,r;const o=[Qp,Zp],s=[];function l(a,u){return a[1].relationToOne?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),i=Ve()},m(a,u){s[e].m(a,u),V(a,i,u),r=!0},p(a,[u]){let f=e;e=l(a),e===f?s[e].p(a,u):(Oe(),z(s[f],1,1,()=>{s[f]=null}),Ie(),n=s[e],n?n.p(a,u):(n=s[e]=o[e](a),n.c()),A(n,1),n.m(i.parentNode,i))},i(a){r||(A(n),r=!0)},o(a){z(n),r=!1},d(a){a&&B(i),s[e].d(a)}}}function $p(t,e,n){let{value:i}=e,{info:r}=e;function o(u){_e.call(this,t,u)}function s(u){i=u,n(0,i)}function l(u){_e.call(this,t,u)}function a(){i=this.value,n(0,i)}return t.$$set=u=>{\"value\"in u&&n(0,i=u.value),\"info\"in u&&n(1,r=u.info)},[i,r,o,s,l,a]}class eb extends ue{constructor(e){super(),ae(this,e,$p,xp,ce,{value:0,info:1})}}const{Boolean:tb}=ql;function gl(t,e,n){const i=t.slice();return i[22]=e[n],i}function ml(t,e,n){const i=t.slice();return i[25]=e[n],i[26]=e,i[27]=n,i}function yl(t){let e,n,i,r;function o(a,u){return a[3]?ib:nb}let s=o(t),l=s(t);return{c(){e=Z(\"td\"),n=Z(\"button\"),l.c(),E(n,\"title\",\"Relations\")},m(a,u){V(a,e,u),X(e,n),l.m(n,null),i||(r=de(n,\"click\",t[15]),i=!0)},p(a,u){s!==(s=o(a))&&(l.d(1),l=s(a),l&&(l.c(),l.m(n,null)))},d(a){a&&B(e),l.d(),i=!1,r()}}}function nb(t){let e;return{c(){e=ze(\">\")},m(n,i){V(n,e,i)},d(n){n&&B(e)}}}function ib(t){let e;return{c(){e=ze(\"∨\")},m(n,i){V(n,e,i)},d(n){n&&B(e)}}}function pl(t){let e,n,i,r;function o(l){t[16](l,t[25])}let s={info:t[25]};return t[5][t[25].valFieldKey]!==void 0&&(s.value=t[5][t[25].valFieldKey]),n=new eb({props:s}),It.push(()=>ro(n,\"value\",o)),n.$on(\"change\",ob),{c(){e=Z(\"td\"),te(n.$$.fragment)},m(l,a){V(l,e,a),x(n,e,null),r=!0},p(l,a){t=l;const u={};a&2&&(u.info=t[25]),!i&&a&34&&(i=!0,u.value=t[5][t[25].valFieldKey],io(()=>i=!1)),n.$set(u)},i(l){r||(A(n.$$.fragment,l),r=!0)},o(l){z(n.$$.fragment,l),r=!1},d(l){l&&B(e),$(n)}}}function bl(t){let e,n,i,r,o;return{c(){e=Z(\"button\"),e.textContent=\"S\",n=ne(),i=Z(\"button\"),i.textContent=\"C\",E(e,\"class\",\"icon-button\"),E(e,\"title\",\"Save\"),E(i,\"class\",\"icon-button\"),E(i,\"title\",\"Cancel\")},m(s,l){V(s,e,l),V(s,n,l),V(s,i,l),r||(o=[de(e,\"click\",t[11]),de(i,\"click\",t[17])],r=!0)},p:le,d(s){s&&(B(e),B(n),B(i)),r=!1,qe(o)}}}function _l(t){let e,n,i;return{c(){e=Z(\"button\"),e.textContent=\"D\",E(e,\"class\",\"icon-button\"),E(e,\"title\",\"Delete\")},m(r,o){V(r,e,o),n||(i=de(e,\"click\",t[18]),n=!0)},p:le,d(r){r&&B(e),n=!1,i()}}}function wl(t){let e,n,i,r,o,s,l,a=Pe(t[2]),u=[];for(let c=0;c<a.length;c+=1)u[c]=vl(gl(t,a,c));let f=t[9]&&typeof t[3]==\"object\"&&kl(t);return{c(){e=Z(\"tr\"),n=Z(\"td\"),i=ne(),r=Z(\"td\");for(let c=0;c<u.length;c+=1)u[c].c();o=ne(),f&&f.c(),E(r,\"colspan\",s=t[1].length+1)},m(c,d){V(c,e,d),X(e,n),X(e,i),X(e,r);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(r,null);X(r,o),f&&f.m(r,null),l=!0},p(c,d){if(d&76){a=Pe(c[2]);let h;for(h=0;h<a.length;h+=1){const g=gl(c,a,h);u[h]?u[h].p(g,d):(u[h]=vl(g),u[h].c(),u[h].m(r,o))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}c[9]&&typeof c[3]==\"object\"?f?(f.p(c,d),d&520&&A(f,1)):(f=kl(c),f.c(),A(f,1),f.m(r,null)):f&&(Oe(),z(f,1,1,()=>{f=null}),Ie()),(!l||d&2&&s!==(s=c[1].length+1))&&E(r,\"colspan\",s)},i(c){l||(A(f),l=!0)},o(c){z(f),l=!1},d(c){c&&B(e),Ot(u,c),f&&f.d()}}}function vl(t){let e,n=t[6].tables.find(s).caption+\"\",i,r,o;function s(...a){return t[19](t[22],...a)}function l(...a){return t[20](t[22],...a)}return{c(){e=Z(\"button\"),i=ze(n)},m(a,u){V(a,e,u),X(e,i),r||(o=de(e,\"click\",l),r=!0)},p(a,u){t=a,u&68&&n!==(n=t[6].tables.find(s).caption+\"\")&&Qe(i,n)},d(a){a&&B(e),r=!1,o()}}}function kl(t){let e,n;return e=new Uu({props:{columns:t[9].fields,relations:t[9].relations,repo:t[9].repo,parentRelation:t[10]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&512&&(o.columns=i[9].fields),r&512&&(o.relations=i[9].relations),r&512&&(o.repo=i[9].repo),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function rb(t){let e,n,i,r,o,s,l,a,u=t[2].length>0&&yl(t),f=Pe(t[1]),c=[];for(let p=0;p<f.length;p+=1)c[p]=pl(ml(t,f,p));const d=p=>z(c[p],1,1,()=>{c[p]=null});let h=t[8]&&bl(t),g=t[0]&&_l(t),y=t[3]&&wl(t);return{c(){e=Z(\"tr\"),u&&u.c(),n=ne();for(let p=0;p<c.length;p+=1)c[p].c();i=ne(),r=Z(\"td\"),h&&h.c(),o=ne(),g&&g.c(),s=ne(),y&&y.c(),l=Ve(),E(r,\"align\",\"right\"),E(r,\"width\",\"90px\")},m(p,m){V(p,e,m),u&&u.m(e,null),X(e,n);for(let w=0;w<c.length;w+=1)c[w]&&c[w].m(e,null);X(e,i),X(e,r),h&&h.m(r,null),X(r,o),g&&g.m(r,null),V(p,s,m),y&&y.m(p,m),V(p,l,m),a=!0},p(p,[m]){if(p[2].length>0?u?u.p(p,m):(u=yl(p),u.c(),u.m(e,n)):u&&(u.d(1),u=null),m&34){f=Pe(p[1]);let w;for(w=0;w<f.length;w+=1){const b=ml(p,f,w);c[w]?(c[w].p(b,m),A(c[w],1)):(c[w]=pl(b),c[w].c(),A(c[w],1),c[w].m(e,i))}for(Oe(),w=f.length;w<c.length;w+=1)d(w);Ie()}p[8]?h?h.p(p,m):(h=bl(p),h.c(),h.m(r,o)):h&&(h.d(1),h=null),p[0]?g?g.p(p,m):(g=_l(p),g.c(),g.m(r,null)):g&&(g.d(1),g=null),p[3]?y?(y.p(p,m),m&8&&A(y,1)):(y=wl(p),y.c(),A(y,1),y.m(l.parentNode,l)):y&&(Oe(),z(y,1,1,()=>{y=null}),Ie())},i(p){if(!a){for(let m=0;m<f.length;m+=1)A(c[m]);A(y),a=!0}},o(p){c=c.filter(tb);for(let m=0;m<c.length;m+=1)z(c[m]);z(y),a=!1},d(p){p&&(B(e),B(s),B(l)),u&&u.d(),Ot(c,p),h&&h.d(),g&&g.d(),y&&y.d(p)}}}const ob=t=>{};function sb(t,e,n){let i,r,o,s;j(t,Ln,C=>n(6,s=C));let{row:l}=e,{save:a}=e,{deleteAction:u=()=>Promise.resolve()}=e,{columns:f}=e,{relations:c}=e,{rowId:d}=e,h,g=null,y={...l};const p={};async function m(){try{n(7,h=void 0),await a(i),n(4,y={...i})}catch(C){alert(C.message),n(7,h=C)}}const w=()=>n(3,g=g?null:c[0]);function b(C,O){t.$$.not_equal(i[O.valFieldKey],C)&&(i[O.valFieldKey]=C,n(5,i),n(12,l))}const _=()=>{n(5,i=y),n(7,h=void 0)},I=async()=>{try{await u()}catch(C){alert(C.message)}},v=(C,O)=>O.key===C.entityKey,S=(C,O)=>{n(3,g=C)};return t.$$set=C=>{\"row\"in C&&n(12,l=C.row),\"save\"in C&&n(13,a=C.save),\"deleteAction\"in C&&n(0,u=C.deleteAction),\"columns\"in C&&n(1,f=C.columns),\"relations\"in C&&n(2,c=C.relations),\"rowId\"in C&&n(14,d=C.rowId)},t.$$.update=()=>{t.$$.dirty&4096&&n(5,i=l),t.$$.dirty&72&&n(9,r=g&&typeof g==\"object\"&&s.tables.find(C=>C.key===g.entityKey)),t.$$.dirty&50&&n(8,o=!!f.find(C=>i[C.key]!==y[C.key]))},[u,f,c,g,y,i,s,h,o,r,p,m,l,a,d,w,b,_,I,v,S]}class Ju extends ue{constructor(e){super(),ae(this,e,sb,rb,ce,{row:12,save:13,deleteAction:0,columns:1,relations:2,rowId:14})}}function Sl(t,e,n){const i=t.slice();return i[17]=e[n],i[18]=e,i[19]=n,i}function El(t,e,n){const i=t.slice();return i[20]=e[n][0],i[21]=e[n][1],i}function Cl(t,e,n){const i=t.slice();return i[24]=e[n],i}function Ol(t){let e,n=t[24].caption+\"\",i,r,o,s,l;return{c(){e=Z(\"option\"),i=ze(n),r=ne(),E(e,\"key\",o=t[24].key),e.__value=s=t[24].key,on(e,e.__value),e.selected=l=t[24].key===t[17].key},m(a,u){V(a,e,u),X(e,i),X(e,r)},p(a,u){u&3&&n!==(n=a[24].caption+\"\")&&Qe(i,n),u&3&&o!==(o=a[24].key)&&E(e,\"key\",o),u&3&&s!==(s=a[24].key)&&(e.__value=s,on(e,e.__value)),u&3&&l!==(l=a[24].key===a[17].key)&&(e.selected=l)},d(a){a&&B(e)}}}function Il(t){let e,n=t[21]+\"\",i,r,o;return{c(){e=Z(\"option\"),i=ze(n),r=ne(),E(e,\"key\",t[20]),e.__value=t[21],on(e,e.__value),e.selected=o=t[20]===t[17].operator},m(s,l){V(s,e,l),X(e,i),X(e,r)},p(s,l){l&2&&o!==(o=s[20]===s[17].operator)&&(e.selected=o)},d(s){s&&B(e)}}}function Tl(t){let e,n,i,r,o,s,l,a,u,f,c,d;function h(...v){return t[8](t[17],...v)}let g=Pe(t[0].filter(h)),y=[];for(let v=0;v<g.length;v+=1)y[v]=Ol(Cl(t,g,v));function p(...v){return t[9](t[17],t[18],t[19],...v)}let m=Pe(t[3]),w=[];for(let v=0;v<m.length;v+=1)w[v]=Il(El(t,m,v));function b(...v){return t[10](t[17],t[18],t[19],...v)}function _(...v){return t[11](t[17],t[18],t[19],...v)}function I(){return t[12](t[17])}return{c(){e=Z(\"div\"),n=Z(\"select\");for(let v=0;v<y.length;v+=1)y[v].c();i=ne(),r=Z(\"select\");for(let v=0;v<w.length;v+=1)w[v].c();o=ne(),s=Z(\"input\"),a=ne(),u=Z(\"button\"),u.innerHTML='<svg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><rect x=\"2.23254\" y=\"0.796844\" width=\"24\" height=\"2.03049\" transform=\"rotate(45 2.23254 0.796844)\" fill=\"black\"></rect><rect x=\"0.796875\" y=\"17.7673\" width=\"24\" height=\"2.03049\" transform=\"rotate(-45 0.796875 17.7673)\" fill=\"black\"></rect></svg>',s.value=l=t[17].value,E(u,\"class\",\"button-icon svelte-1d2g12e\"),E(e,\"class\",\"filter__group svelte-1d2g12e\"),E(e,\"key\",f=t[17].key)},m(v,S){V(v,e,S),X(e,n);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(n,null);X(e,i),X(e,r);for(let C=0;C<w.length;C+=1)w[C]&&w[C].m(r,null);X(e,o),X(e,s),X(e,a),X(e,u),c||(d=[de(n,\"change\",p),de(r,\"change\",b),de(s,\"input\",_),de(u,\"click\",I)],c=!0)},p(v,S){if(t=v,S&3){g=Pe(t[0].filter(h));let C;for(C=0;C<g.length;C+=1){const O=Cl(t,g,C);y[C]?y[C].p(O,S):(y[C]=Ol(O),y[C].c(),y[C].m(n,null))}for(;C<y.length;C+=1)y[C].d(1);y.length=g.length}if(S&10){m=Pe(t[3]);let C;for(C=0;C<m.length;C+=1){const O=El(t,m,C);w[C]?w[C].p(O,S):(w[C]=Il(O),w[C].c(),w[C].m(r,null))}for(;C<w.length;C+=1)w[C].d(1);w.length=m.length}S&2&&l!==(l=t[17].value)&&s.value!==l&&(s.value=l),S&2&&f!==(f=t[17].key)&&E(e,\"key\",f)},d(v){v&&B(e),Ot(y,v),Ot(w,v),c=!1,qe(d)}}}function lb(t){let e,n,i,r,o,s,l,a,u,f,c,d,h,g,y,p=Pe(t[1]),m=[];for(let w=0;w<p.length;w+=1)m[w]=Tl(Sl(t,p,w));return{c(){e=Z(\"button\"),e.textContent=\"Filter\",n=ne(),i=Z(\"dialog\"),r=Z(\"strong\"),r.textContent=\"Filter\",o=ne(),s=Z(\"div\");for(let w=0;w<m.length;w+=1)m[w].c();l=ne(),a=Z(\"button\"),a.textContent=\"Add\",u=ne(),f=Z(\"div\"),c=Z(\"button\"),c.textContent=\"Cancel\",d=ne(),h=Z(\"button\"),h.textContent=\"Apply\",E(a,\"class\",\"filter__add svelte-1d2g12e\"),E(f,\"class\",\"filter__actions svelte-1d2g12e\"),E(i,\"class\",\"filter svelte-1d2g12e\")},m(w,b){V(w,e,b),V(w,n,b),V(w,i,b),X(i,r),X(i,o),X(i,s);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(s,null);X(s,l),X(s,a),X(s,u),X(s,f),X(f,c),X(f,d),X(f,h),t[14](i),g||(y=[de(e,\"click\",t[7]),de(a,\"click\",t[4]),de(c,\"click\",t[13]),de(h,\"click\",t[5])],g=!0)},p(w,[b]){if(b&11){p=Pe(w[1]);let _;for(_=0;_<p.length;_+=1){const I=Sl(w,p,_);m[_]?m[_].p(I,b):(m[_]=Tl(I),m[_].c(),m[_].m(s,l))}for(;_<m.length;_+=1)m[_].d(1);m.length=p.length}},i:le,o:le,d(w){w&&(B(e),B(n),B(i)),Ot(m,w),t[14](null),g=!1,qe(y)}}}function ab(t,e,n){const i={key:\"\",operator:\"$contains\",value:\"\"},r=[[\"\",\"equal\"],[\"$contains\",\"contains\"],[\"$ne\",\"nor equal\"]];let{fields:o=[]}=e,{filter:s}=e,l=[],a=null;function u(){var _;n(1,l=[...l,{...i,key:((_=o.find(I=>I.key!=\"id\"&&!l.find(v=>v.key==I.key)))==null?void 0:_.key)||\"\"}])}function f(){let _={};for(const I of l)I.operator===\"\"?_[I.key]=I.value:_[I.key]={[I.operator]:I.value};n(6,s=_),Yl(),a==null||a.close()}function c(){let _=[];for(const I in s)if(Object.prototype.hasOwnProperty.call(s,I)){const v=s[I];if(typeof v==\"object\"){for(const S in v)if(Object.prototype.hasOwnProperty.call(v,S)){const C=v[S];_.push({key:I,operator:S,value:C})}}else v!=null&&_.push({key:I,operator:\"\",value:v})}n(1,l=_),_.length==0&&u()}const d=()=>a==null?void 0:a.showModal(),h=(_,I)=>I.key==_.key||!l.find(v=>v.key==I.key),g=(_,I,v,S)=>n(1,I[v].key=S.target.value,l),y=(_,I,v,S)=>n(1,I[v].operator=S.target.value,l),p=(_,I,v,S)=>n(1,I[v].value=S.target.value,l),m=_=>n(1,l=l.filter(I=>I!=_)),w=()=>a==null?void 0:a.close();function b(_){It[_?\"unshift\":\"push\"](()=>{a=_,n(2,a)})}return t.$$set=_=>{\"fields\"in _&&n(0,o=_.fields),\"filter\"in _&&n(6,s=_.filter)},t.$$.update=()=>{t.$$.dirty&1&&o&&c()},[o,l,a,r,u,f,s,d,h,g,y,p,m,w,b]}class ub extends ue{constructor(e){super(),ae(this,e,ab,lb,ce,{fields:0,filter:6})}}function Ml(t,e,n){const i=t.slice();return i[24]=e[n],i}function Al(t,e,n){const i=t.slice();return i[27]=e[n],i}function fb(t){let e,n;return e=new Ju({props:{rowId:void 0,row:t[8],columns:t[0],relations:t[1],deleteAction:t[17],save:t[18]}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&256&&(o.row=i[8]),r&1&&(o.columns=i[0]),r&2&&(o.relations=i[1]),r&256&&(o.deleteAction=i[17]),r&260&&(o.save=i[18]),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function cb(t){let e,n,i,r,o,s=t[2].metadata.caption+\"\",l,a,u,f,c,d,h,g,y,p,m,w,b=t[10]+\" - \"+t[9],_,I,v,S,C,O,R,D,W,P,k;function F(N){t[14](N)}let M={fields:t[0]};return t[6]!==void 0&&(M.filter=t[6]),c=new ub({props:M}),It.push(()=>ro(c,\"filter\",F)),{c(){e=Z(\"tr\"),n=Z(\"td\"),i=Z(\"div\"),r=Z(\"span\"),o=Z(\"b\"),l=ze(s),a=ne(),u=Z(\"button\"),u.textContent=\"+\",f=ne(),te(c.$$.fragment),h=ne(),g=Z(\"span\"),y=Z(\"button\"),p=ze(\"<\"),w=ne(),_=ze(b),I=ze(\" of \"),v=ze(t[7]),S=ne(),C=Z(\"button\"),O=ze(\">\"),y.disabled=m=(t[4].page||1)===1,C.disabled=R=t[9]>=t[7],fe(i,\"display\",\"flex\"),fe(i,\"justify-content\",\"space-between\"),E(n,\"colspan\",D=t[0].length+1+(t[1].length>0?1:0))},m(N,H){V(N,e,H),X(e,n),X(n,i),X(i,r),X(r,o),X(o,l),X(r,a),X(r,u),X(i,f),x(c,i,null),X(i,h),X(i,g),X(g,y),X(y,p),X(g,w),X(g,_),X(g,I),X(g,v),X(g,S),X(g,C),X(C,O),W=!0,P||(k=[de(u,\"click\",t[13]),de(y,\"click\",t[15]),de(C,\"click\",t[16])],P=!0)},p(N,H){(!W||H&4)&&s!==(s=N[2].metadata.caption+\"\")&&Qe(l,s);const K={};H&1&&(K.fields=N[0]),!d&&H&64&&(d=!0,K.filter=N[6],io(()=>d=!1)),c.$set(K),(!W||H&16&&m!==(m=(N[4].page||1)===1))&&(y.disabled=m),(!W||H&1536)&&b!==(b=N[10]+\" - \"+N[9])&&Qe(_,b),(!W||H&128)&&Qe(v,N[7]),(!W||H&640&&R!==(R=N[9]>=N[7]))&&(C.disabled=R),(!W||H&3&&D!==(D=N[0].length+1+(N[1].length>0?1:0)))&&E(n,\"colspan\",D)},i(N){W||(A(c.$$.fragment,N),W=!0)},o(N){z(c.$$.fragment,N),W=!1},d(N){N&&B(e),$(c),P=!1,qe(k)}}}function Pl(t){let e;return{c(){e=Z(\"td\")},m(n,i){V(n,e,i)},d(n){n&&B(e)}}}function Nl(t){var f,c;let e,n=t[27].caption+\"\",i,r,o=((f=t[4].orderBy)==null?void 0:f[t[27].key])===\"asc\"?\"▲\":((c=t[4].orderBy)==null?void 0:c[t[27].key])===\"desc\"?\"▼\":\"\",s,l,a;function u(){return t[19](t[27])}return{c(){e=Z(\"th\"),i=ze(n),r=ne(),s=ze(o)},m(d,h){V(d,e,h),X(e,i),X(e,r),X(e,s),l||(a=de(e,\"click\",u),l=!0)},p(d,h){var g,y;t=d,h&1&&n!==(n=t[27].caption+\"\")&&Qe(i,n),h&17&&o!==(o=((g=t[4].orderBy)==null?void 0:g[t[27].key])===\"asc\"?\"▲\":((y=t[4].orderBy)==null?void 0:y[t[27].key])===\"desc\"?\"▼\":\"\")&&Qe(s,o)},d(d){d&&B(e),l=!1,a()}}}function Fl(t){let e,n;function i(...o){return t[20](t[24],...o)}function r(){return t[21](t[24])}return e=new Ju({props:{rowId:t[2].metadata.idMetadata.getId(t[24]),row:t[24],save:i,deleteAction:r,columns:t[0],relations:t[1]}}),{c(){te(e.$$.fragment)},m(o,s){x(e,o,s),n=!0},p(o,s){t=o;const l={};s&36&&(l.rowId=t[2].metadata.idMetadata.getId(t[24])),s&32&&(l.row=t[24]),s&36&&(l.save=i),s&36&&(l.deleteAction=r),s&1&&(l.columns=t[0]),s&2&&(l.relations=t[1]),e.$set(l)},i(o){n||(A(e.$$.fragment,o),n=!0)},o(o){z(e.$$.fragment,o),n=!1},d(o){$(e,o)}}}function db(t){let e,n,i,r,o,s,l,a,u,f,c,d,h;const g=[cb,fb],y=[];function p(S,C){return S[8]?1:0}r=p(t),o=y[r]=g[r](t);let m=t[1].length>0&&Pl(),w=Pe(t[0]),b=[];for(let S=0;S<w.length;S+=1)b[S]=Nl(Al(t,w,S));let _=Pe(t[5]),I=[];for(let S=0;S<_.length;S+=1)I[S]=Fl(Ml(t,_,S));const v=S=>z(I[S],1,1,()=>{I[S]=null});return{c(){e=Z(\"div\"),n=Z(\"table\"),i=Z(\"thead\"),o.c(),s=ne(),l=Z(\"tr\"),m&&m.c(),a=ne();for(let S=0;S<b.length;S+=1)b[S].c();u=ne(),f=Z(\"th\"),f.textContent=\"Actions\",c=ne(),d=Z(\"tbody\");for(let S=0;S<I.length;S+=1)I[S].c();E(f,\"align\",\"right\")},m(S,C){V(S,e,C),X(e,n),X(n,i),y[r].m(i,null),X(i,s),X(i,l),m&&m.m(l,null),X(l,a);for(let O=0;O<b.length;O+=1)b[O]&&b[O].m(l,null);X(l,u),X(l,f),X(n,c),X(n,d);for(let O=0;O<I.length;O+=1)I[O]&&I[O].m(d,null);h=!0},p(S,[C]){let O=r;if(r=p(S),r===O?y[r].p(S,C):(Oe(),z(y[O],1,1,()=>{y[O]=null}),Ie(),o=y[r],o?o.p(S,C):(o=y[r]=g[r](S),o.c()),A(o,1),o.m(i,s)),S[1].length>0?m||(m=Pl(),m.c(),m.m(l,a)):m&&(m.d(1),m=null),C&4113){w=Pe(S[0]);let R;for(R=0;R<w.length;R+=1){const D=Al(S,w,R);b[R]?b[R].p(D,C):(b[R]=Nl(D),b[R].c(),b[R].m(l,u))}for(;R<b.length;R+=1)b[R].d(1);b.length=w.length}if(C&39){_=Pe(S[5]);let R;for(R=0;R<_.length;R+=1){const D=Ml(S,_,R);I[R]?(I[R].p(D,C),A(I[R],1)):(I[R]=Fl(D),I[R].c(),A(I[R],1),I[R].m(d,null))}for(Oe(),R=_.length;R<I.length;R+=1)v(R);Ie()}},i(S){if(!h){A(o);for(let C=0;C<_.length;C+=1)A(I[C]);h=!0}},o(S){z(o),I=I.filter(Boolean);for(let C=0;C<I.length;C+=1)z(I[C]);h=!1},d(S){S&&B(e),y[r].d(),m&&m.d(),Ot(b,S),Ot(I,S)}}}function hb(t,e,n){let i,r,o,{columns:s}=e,{relations:l}=e,{repo:a}=e,{parentRelation:u={}}=e,f={limit:25,page:1},c=re({});j(t,c,D=>n(6,o=D));let d=[],h=-1,g=null;const y=D=>{g&&g(),g=a.liveQuery({...f,where:{$and:[D,{...u}]}}).subscribe(async W=>{n(5,d=W.applyChanges(d)),n(7,h=await a.count({$and:[D,{...u}]}))})};or(()=>{g&&g()});let p;const m=D=>{var P;let W=(P=f.orderBy)==null?void 0:P[D];W===void 0?W=\"asc\":W===\"asc\"?W=\"desc\":W=void 0,n(4,f={...f,orderBy:{[D]:W}})},w=()=>{n(8,p=a.create({...u}))};function b(D){o=D,c.set(o)}const _=()=>{n(4,f={...f,page:(f.page||2)-1})},I=()=>{n(4,f={...f,page:(f.page||1)+1})},v=async()=>{n(8,p=void 0)},S=async D=>{await a.insert(D),n(8,p=void 0)},C=D=>m(D.key),O=async(D,W)=>{await a.update(D,W)},R=D=>a.delete(D);return t.$$set=D=>{\"columns\"in D&&n(0,s=D.columns),\"relations\"in D&&n(1,l=D.relations),\"repo\"in D&&n(2,a=D.repo),\"parentRelation\"in D&&n(3,u=D.parentRelation)},t.$$.update=()=>{t.$$.dirty&84&&a&&f&&y(o),t.$$.dirty&16&&n(10,i=((f.page||1)-1)*f.limit+1),t.$$.dirty&48&&n(9,r=((f.page||1)-1)*f.limit+((d==null?void 0:d.length)||0))},[s,l,a,u,f,d,o,h,p,r,i,c,m,w,b,_,I,v,S,C,O,R]}class Uu extends ue{constructor(e){super(),ae(this,e,hb,db,ce,{columns:0,relations:1,repo:2,parentRelation:3})}}function Dl(t){let e,n;return e=new Uu({props:{columns:t[0].fields,repo:t[0].repo,relations:t[0].relations}}),{c(){te(e.$$.fragment)},m(i,r){x(e,i,r),n=!0},p(i,r){const o={};r&1&&(o.columns=i[0].fields),r&1&&(o.repo=i[0].repo),r&1&&(o.relations=i[0].relations),e.$set(o)},i(i){n||(A(e.$$.fragment,i),n=!0)},o(i){z(e.$$.fragment,i),n=!1},d(i){$(e,i)}}}function gb(t){let e,n,i=t[0]&&Dl(t);return{c(){i&&i.c(),e=Ve()},m(r,o){i&&i.m(r,o),V(r,e,o),n=!0},p(r,[o]){r[0]?i?(i.p(r,o),o&1&&A(i,1)):(i=Dl(r),i.c(),A(i,1),i.m(e.parentNode,e)):i&&(Oe(),z(i,1,1,()=>{i=null}),Ie())},i(r){n||(A(i),n=!0)},o(r){z(i),n=!1},d(r){r&&B(e),i&&i.d(r)}}}function mb(t,e,n){let i,r;j(t,Ln,s=>n(2,r=s));let{params:o={}}=e;return t.$$set=s=>{\"params\"in s&&n(1,o=s.params)},t.$$.update=()=>{t.$$.dirty&6&&n(0,i=r&&r.tables.find(s=>s.key===o.wild))},[i,o,r]}class yb extends ue{constructor(e){super(),ae(this,e,mb,gb,ce,{params:1})}}const Ri=[];let ju;function Gu(t){const e=t.pattern.test(ju);Rl(t,t.className,e),Rl(t,t.inactiveClassName,!e)}function Rl(t,e,n){(e||\"\").split(\" \").forEach(i=>{i&&(t.node.classList.remove(i),n&&t.node.classList.add(i))})}ar.subscribe(t=>{ju=t.location+(t.querystring?\"?\"+t.querystring:\"\"),Ri.map(Gu)});function Zu(t,e){if(e&&(typeof e==\"string\"||typeof e==\"object\"&&e instanceof RegExp)?e={path:e}:e=e||{},!e.path&&t.hasAttribute(\"href\")&&(e.path=t.getAttribute(\"href\"),e.path&&e.path.length>1&&e.path.charAt(0)==\"#\"&&(e.path=e.path.substring(1))),e.className||(e.className=\"active\"),!e.path||typeof e.path==\"string\"&&(e.path.length<1||e.path.charAt(0)!=\"/\"&&e.path.charAt(0)!=\"*\"))throw Error('Invalid value for \"path\" argument');const{pattern:n}=typeof e.path==\"string\"?Jl(e.path):{pattern:e.path},i={node:t,className:e.className,inactiveClassName:e.inactiveClassName,pattern:n};return Ri.push(i),Gu(i),{destroy(){Ri.splice(Ri.indexOf(i),1)}}}function zl(t,e,n){const i=t.slice();return i[2]=e[n],i}function Ll(t){let e,n,i=t[2].caption+\"\",r,o,s,l,a;return{c(){e=Z(\"div\"),n=Z(\"a\"),r=ze(i),E(n,\"href\",o=\"#/entity/\"+t[2].key)},m(u,f){V(u,e,f),X(e,n),X(n,r),l||(a=Ue(s=Zu.call(null,n,{path:`/entity/${t[2].key}`,className:\"active\"})),l=!0)},p(u,f){t=u,f&1&&i!==(i=t[2].caption+\"\")&&Qe(r,i),f&1&&o!==(o=\"#/entity/\"+t[2].key)&&E(n,\"href\",o),s&&Re(s.update)&&f&1&&s.update.call(null,{path:`/entity/${t[2].key}`,className:\"active\"})},d(u){u&&B(e),l=!1,a()}}}function pb(t){var h;let e,n,i,r,o,s,l,a,u,f,c=Pe(((h=t[0])==null?void 0:h.tables)??[]),d=[];for(let g=0;g<c.length;g+=1)d[g]=Ll(zl(t,c,g));return l=new Wf({props:{routes:t[1]}}),{c(){e=Z(\"div\"),n=Z(\"div\");for(let g=0;g<d.length;g+=1)d[g].c();i=ne(),r=Z(\"a\"),r.textContent=\"🚀 Diagram\",o=ne(),s=Z(\"div\"),te(l.$$.fragment),E(r,\"href\",\"#/\"),fe(n,\"min-width\",\"100px\"),fe(s,\"flex-grow\",\"1\"),E(e,\"class\",\"full svelte-hhc8e3\")},m(g,y){V(g,e,y),X(e,n);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(n,null);X(n,i),X(n,r),X(e,o),X(e,s),x(l,s,null),a=!0,u||(f=Ue(Zu.call(null,r,{path:\"/\",className:\"active\"})),u=!0)},p(g,[y]){var p;if(y&1){c=Pe(((p=g[0])==null?void 0:p.tables)??[]);let m;for(m=0;m<c.length;m+=1){const w=zl(g,c,m);d[m]?d[m].p(w,y):(d[m]=Ll(w),d[m].c(),d[m].m(n,i))}for(;m<d.length;m+=1)d[m].d(1);d.length=c.length}},i(g){a||(A(l.$$.fragment,g),a=!0)},o(g){z(l.$$.fragment,g),a=!1},d(g){g&&B(e),Ot(d,g),$(l),u=!1,f()}}}function bb(t,e,n){let i;return j(t,Ln,o=>n(0,i=o)),[i,{\"/\":qp,\"/entity/*\":yb,\"*\":Xp}]}class _b extends ue{constructor(e){super(),ae(this,e,bb,pb,ce,{})}}new _b({target:document.getElementById(\"app\")});\n\n</script>\n    <style>\n*{box-sizing:border-box}body{--border-color: #0000001a;--background-color: white;--background-color-gray: #f5f5f7;--cell-height: 28px;--navigation-width: 200px;background:var(--background-color-gray);color:#323338;height:100vh;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",Segoe UI Symbol}.root{display:flex;flex-direction:column;height:100%}thead{height:var(--cell-height);position:sticky;top:0;background-color:var(--background-color);z-index:2;font-weight:600}thead:before{content:\"\";position:absolute;top:0;left:0;width:100%;height:1px;background:var(--background-color);z-index:1;border-bottom:1px solid var(--border-color)}th{text-align:center;white-space:nowrap;padding:0 .5rem}tr{height:var(--cell-height);position:relative}td>div:not(.extended__holder){padding:0 .5rem}tbody tr:nth-child(odd):not(.extended),tbody tr:nth-child(odd):not(.extended) td:first-child,tbody tr:nth-child(odd):not(.extended) .action-tab{background:var(--background-color-gray)}tr.extended{background:var(--background-color-gray)}tr.extended>td:first-child{display:none}tr.extended td{border-left:0;max-width:calc(100vw - var(--navigation-width))}.hide-navigation tr.extended td{max-width:100vw}tr.extended th{background:#fff!important;padding:0 .5rem;white-space:nowrap}.extended__holder{background:var(--background-color);border:1px solid var(--border-color);margin:.5rem;display:flex;width:calc(100vw - var(--navigation-width) - 1rem);flex-wrap:wrap}.hide-navigation .extended__holder{width:calc(100vw - 1rem)}.extended__holder .icon-button:has(.hamburger-icon){display:none}.extended__links{display:flex;justify-content:flex-start;align-items:center;background:var(--background-color-gray);flex:0 0 calc(100% - 200px);width:100%}.extended__holder .page-bar{height:var(--cell-height);flex:0 0 200px;width:200px}.extended__holder .page-bar__title{display:none}.extended__links .tab{width:auto}.extended__holder .table-container{flex:0 0 100%}th,td{height:calc(var(--cell-height) - 1px);border:1px solid var(--border-color);vertical-align:middle}td:first-child:has(button){min-width:calc(var(--cell-height) - 1px);border-left:0;position:sticky;background-color:var(--background-color);z-index:1}td:first-child:has(button):after{content:\"\";position:absolute;top:0;right:-1px;width:1px;height:100%;background:var(--background-color);z-index:1;border-right:1px solid var(--border-color)}td:has(.icon-button),td:has(.icon-button) button:has(svg){width:calc(var(--cell-height) - 1px)}td input{height:calc(var(--cell-height) - 1px);padding:0 .5rem;display:flex;height:100%}td .field-spacer{height:0;padding:0 .5rem;display:block;overflow:hidden;pointer-events:none;min-width:100px;max-width:400px}td input:focus{box-shadow:0 0 0 2px #007bff inset}.table-container{overflow-x:auto}.action-tab{padding:0 .5rem;position:sticky;right:0;background-color:var(--background-color);white-space:nowrap}.action-tab:before{content:\"\";position:absolute;top:0;left:-1px;width:1px;height:100%;background:var(--background-color);z-index:1;border-right:1px solid var(--border-color)}td.action-tab{padding:0rem}button{cursor:pointer;padding:.5rem;border:1px solid var(--border-color);border-radius:.5rem;white-space:nowrap;height:2.5rem}.icon-button{width:var(--cell-height);height:var(--cell-height);padding:.3rem;border:0;border-radius:0}.icon-button svg{transition:transform .2s;transform-origin:center}.icon-button.open svg{transform:rotate(90deg)}button:hover,button:active,.tab:hover,.tab:active,.tab.active{background:#e4e4e6}.tab{height:var(--cell-height);display:inline-flex;justify-content:flex-start;align-items:center;padding:.5rem;display:flex;width:100%}dialog{border:1px solid var(--border-color);padding:.5rem;border-radius:5px}dialog form{width:auto;display:flex}dialog input,dialog select,dialog button{border:1px solid var(--border-color);border-radius:0;padding:.2rem .5rem;margin-bottom:.5rem;min-width:auto!important;height:var(--cell-height)}dialog button.button-icon{display:flex;justify-content:center;align-items:center;width:var(--cell-height);height:var(--cell-height)}dialog button.button-icon svg{width:14px;height:var(--cell-height)}.page-bar{background:var(--background-color-gray);height:calc(var(--cell-height) - 1px);display:flex;align-items:center;justify-content:flex-end}.page-bar__title{font-weight:600;margin-right:auto;padding:0 .5rem}.page-bar span{display:block;padding:0 .5rem}.page-bar button{height:100%;display:flex;justify-content:center;align-items:center;border-radius:0;border-top:none;border-bottom:0}.page-bar .icon-button{width:var(--cell-height);height:calc(var(--cell-height) - 1px);border-right:1px solid var(--border-color);border-left:1px solid var(--border-color)}.page-bar button+button,.page-bar .icon-button+button,.page-bar button:first-child{border-left:none}.page-bar button:last-child{border-right:none}#root{justify-content:flex-start;align-items:center}.app-holder{display:flex;flex:1;border-radius:10px;overflow:hidden;background:#fff;margin:0 auto;width:100%}.main-navigation{height:100vh;min-height:100%;position:fixed;left:0;display:flex;flex-direction:column;flex:0 0 var(--navigation-width);width:var(--navigation-width);align-items:flex-start;background:#f5f5f7;border-right:1px solid #e5e7eb;transition:.2s ease-in-out all;overflow-y:auto;padding-top:var(--cell-height)}.main-navigation__title{top:0;position:fixed;background:var(--background-color-gray);height:var(--cell-height);border-bottom:1px solid #e5e7eb;display:flex;justify-content:flex-start;padding:.5rem;align-items:center;font-size:.8rem;font-weight:600;width:calc(var(--navigation-width) - 1px);text-align:center}.main-content{transition:.2s ease-in-out all;transform:translate(var(--navigation-width));display:flex;flex-direction:column;flex:1;max-width:calc(100% - var(--navigation-width))}body.hide-navigation .main-navigation{transform:translate(calc(-1 * var(--navigation-width)))}body.hide-navigation .main-content{max-width:100%;transform:translate(0)}.hamburger-icon rect{transition:.2s ease-in-out all}body:not(.hide-navigation) .hamburger-icon rect:first-child{transform:rotate(35deg) translate(-3px,4px)}body:not(.hide-navigation) .hamburger-icon rect:nth-child(2){transform:translate(1px)}body:not(.hide-navigation) .hamburger-icon rect:last-child{transform:rotate(-35deg) translate(-17px,-8px)}.filter strong{display:block;margin-top:.5rem;margin-bottom:1rem;font-weight:600;text-align:center}.filter__group{display:flex;flex-direction:row;width:100%}.filter__group .button-icon{margin-left:auto;border:none}.filter__actions{display:flex;flex-direction:row;justify-content:flex-end;align-items:center;padding:.5rem;width:100%}.filter__actions button{border:none;padding:.5rem;margin:0}.filter__actions button:last-of-type{background:#e4e4e6}.filter__add{margin-left:auto;border:none}.svelte-flow__zoom.svelte-4xkw84{width:100%;height:100%;position:absolute;top:0;left:0;z-index:4}.svelte-flow__pane.svelte-1esy7hx{position:absolute;top:0;left:0;width:100%;height:100%}.svelte-flow__viewport.svelte-1floaup{width:100%;height:100%;position:absolute;top:0;left:0}.svelte-flow__nodes.svelte-tf4uy4{width:100%;height:100%;position:absolute;left:0;top:0}.svelte-flow__selection.svelte-1iugwpu{position:absolute;top:0;left:0}.selection-wrapper.svelte-5pxri{position:absolute;top:0;left:0;z-index:7;pointer-events:all}.svelte-flow.svelte-12wlba6{width:100%;height:100%;overflow:hidden;position:relative;z-index:0;background-color:var(--background-color, var(--background-color-default))}:root{--background-color-default:#fff;--background-pattern-color-default:#ddd;--minimap-mask-color-default:rgb(240, 240, 240, .6);--minimap-mask-stroke-color-default:none;--minimap-mask-stroke-width-default:1;--controls-button-background-color-default:#fefefe;--controls-button-background-color-hover-default:#f4f4f4;--controls-button-color-default:inherit;--controls-button-color-hover-default:inherit;--controls-button-border-color-default:#eee}.svelte-flow__background.svelte-1r7pe8d{position:absolute;width:100%;height:100%;top:0;left:0}.svelte-flow{direction:ltr;--xy-edge-stroke-default: #b1b1b7;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #555;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(255, 255, 255, .5);--xy-minimap-background-color-default: #fff;--xy-minimap-mask-background-color-default: rgb(240, 240, 240, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #e2e2e2;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: transparent;--xy-background-pattern-dots-color-default: #91919a;--xy-background-pattern-lines-color-default: #eee;--xy-background-pattern-cross-color-default: #e2e2e2;background-color:var(--xy-background-color, var(--xy-background-color-default));--xy-node-color-default: inherit;--xy-node-border-default: 1px solid #1a192b;--xy-node-background-color-default: #fff;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(0, 0, 0, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #1a192b;--xy-node-border-radius-default: 3px;--xy-handle-background-color-default: #1a192b;--xy-handle-border-color-default: #fff;--xy-selection-background-color-default: rgba(0, 89, 220, .08);--xy-selection-border-default: 1px dotted rgba(0, 89, 220, .8);--xy-controls-button-background-color-default: #fefefe;--xy-controls-button-background-color-hover-default: #f4f4f4;--xy-controls-button-color-default: inherit;--xy-controls-button-color-hover-default: inherit;--xy-controls-button-border-color-default: #eee;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #ffffff;--xy-edge-label-color-default: inherit;--xy-resize-background-color-default: #3367d9}.svelte-flow.dark{--xy-edge-stroke-default: #3e3e3e;--xy-edge-stroke-width-default: 1;--xy-edge-stroke-selected-default: #727272;--xy-connectionline-stroke-default: #b1b1b7;--xy-connectionline-stroke-width-default: 1;--xy-attribution-background-color-default: rgba(150, 150, 150, .25);--xy-minimap-background-color-default: #141414;--xy-minimap-mask-background-color-default: rgb(60, 60, 60, .6);--xy-minimap-mask-stroke-color-default: transparent;--xy-minimap-mask-stroke-width-default: 1;--xy-minimap-node-background-color-default: #2b2b2b;--xy-minimap-node-stroke-color-default: transparent;--xy-minimap-node-stroke-width-default: 2;--xy-background-color-default: #141414;--xy-background-pattern-dots-color-default: #777;--xy-background-pattern-lines-color-default: #777;--xy-background-pattern-cross-color-default: #777;--xy-node-color-default: #f8f8f8;--xy-node-border-default: 1px solid #3c3c3c;--xy-node-background-color-default: #1e1e1e;--xy-node-group-background-color-default: rgba(240, 240, 240, .25);--xy-node-boxshadow-hover-default: 0 1px 4px 1px rgba(255, 255, 255, .08);--xy-node-boxshadow-selected-default: 0 0 0 .5px #999;--xy-handle-background-color-default: #bebebe;--xy-handle-border-color-default: #1e1e1e;--xy-selection-background-color-default: rgba(200, 200, 220, .08);--xy-selection-border-default: 1px dotted rgba(200, 200, 220, .8);--xy-controls-button-background-color-default: #2b2b2b;--xy-controls-button-background-color-hover-default: #3e3e3e;--xy-controls-button-color-default: #f8f8f8;--xy-controls-button-color-hover-default: #fff;--xy-controls-button-border-color-default: #5b5b5b;--xy-controls-box-shadow-default: 0 0 2px 1px rgba(0, 0, 0, .08);--xy-edge-label-background-color-default: #141414;--xy-edge-label-color-default: #f8f8f8}.svelte-flow__background{background-color:var(--xy-background-color, var(--xy-background-color-props, var(--xy-background-color-default)));pointer-events:none;z-index:-1}.svelte-flow__container{position:absolute;width:100%;height:100%;top:0;left:0}.svelte-flow__pane{z-index:1}.svelte-flow__pane.selection{cursor:pointer}.svelte-flow__pane.draggable{cursor:grab}.svelte-flow__pane.draggable.dragging{cursor:grabbing}.svelte-flow__viewport{transform-origin:0 0;z-index:2;pointer-events:none}.svelte-flow__renderer{z-index:4}.svelte-flow__selection{z-index:6}.svelte-flow__nodesselection-rect:focus,.svelte-flow__nodesselection-rect:focus-visible{outline:none}.svelte-flow__edge-path{stroke:var(--xy-edge-stroke, var(--xy-edge-stroke-default));stroke-width:var(--xy-edge-stroke-width, var(--xy-edge-stroke-width-default));fill:none}.svelte-flow__connection-path{stroke:var(--xy-connectionline-stroke, var(--xy-connectionline-stroke-default));stroke-width:var(--xy-connectionline-stroke-width, var(--xy-connectionline-stroke-width-default));fill:none}.svelte-flow__edges{position:absolute}.svelte-flow__edges svg{overflow:visible;position:absolute;pointer-events:none}.svelte-flow__edge{pointer-events:visibleStroke}.svelte-flow__edge.selectable{cursor:pointer}.svelte-flow__edge.animated path{stroke-dasharray:5;animation:dashdraw .5s linear infinite}.svelte-flow__edge.animated path.svelte-flow__edge-interaction{stroke-dasharray:none;animation:none}.svelte-flow__edge.inactive{pointer-events:none}.svelte-flow__edge.selected,.svelte-flow__edge:focus,.svelte-flow__edge:focus-visible{outline:none}.svelte-flow__edge.selected .svelte-flow__edge-path,.svelte-flow__edge.selectable:focus .svelte-flow__edge-path,.svelte-flow__edge.selectable:focus-visible .svelte-flow__edge-path{stroke:var(--xy-edge-stroke-selected, var(--xy-edge-stroke-selected-default))}.svelte-flow__edge-textwrapper{pointer-events:all}.svelte-flow__edge .svelte-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__connection{pointer-events:none}.svelte-flow__connection .animated{stroke-dasharray:5;animation:dashdraw .5s linear infinite}svg.svelte-flow__connectionline{z-index:1001;overflow:visible;position:absolute}.svelte-flow__nodes{pointer-events:none;transform-origin:0 0}.svelte-flow__node{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;pointer-events:all;transform-origin:0 0;box-sizing:border-box;cursor:default}.svelte-flow__node.selectable{cursor:pointer}.svelte-flow__node.draggable{cursor:grab;pointer-events:all}.svelte-flow__node.draggable.dragging{cursor:grabbing}.svelte-flow__nodesselection{z-index:3;transform-origin:left top;pointer-events:none}.svelte-flow__nodesselection-rect{position:absolute;pointer-events:all;cursor:grab}.svelte-flow__handle{position:absolute;pointer-events:none;min-width:5px;min-height:5px;width:6px;height:6px;background-color:var(--xy-handle-background-color, var(--xy-handle-background-color-default));border:1px solid var(--xy-handle-border-color, var(--xy-handle-border-color-default));border-radius:100%}.svelte-flow__handle.connectingfrom{pointer-events:all}.svelte-flow__handle.connectionindicator{pointer-events:all;cursor:crosshair}.svelte-flow__handle-bottom{top:auto;left:50%;bottom:0;transform:translate(-50%,50%)}.svelte-flow__handle-top{top:0;left:50%;transform:translate(-50%,-50%)}.svelte-flow__handle-left{top:50%;left:0;transform:translate(-50%,-50%)}.svelte-flow__handle-right{top:50%;right:0;transform:translate(50%,-50%)}.svelte-flow__edgeupdater{cursor:move;pointer-events:all}.svelte-flow__panel{position:absolute;z-index:5;margin:15px}.svelte-flow__panel.top{top:0}.svelte-flow__panel.bottom{bottom:0}.svelte-flow__panel.left{left:0}.svelte-flow__panel.right{right:0}.svelte-flow__panel.center{left:50%;transform:translate(-50%)}.svelte-flow__attribution{font-size:10px;background:var(--xy-attribution-background-color, var(--xy-attribution-background-color-default));padding:2px 3px;margin:0}.svelte-flow__attribution a{text-decoration:none;color:#999}@keyframes dashdraw{0%{stroke-dashoffset:10}}.svelte-flow__edgelabel-renderer{position:absolute;width:100%;height:100%;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;left:0;top:0}.svelte-flow__viewport-portal{position:absolute;width:100%;height:100%;left:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__minimap{background:var( --xy-minimap-background-color-props, var(--xy-minimap-background-color, var(--xy-minimap-background-color-default)) )}.svelte-flow__minimap-svg{display:block}.svelte-flow__minimap-mask{fill:var( --xy-minimap-mask-background-color-props, var(--xy-minimap-mask-background-color, var(--xy-minimap-mask-background-color-default)) );stroke:var( --xy-minimap-mask-stroke-color-props, var(--xy-minimap-mask-stroke-color, var(--xy-minimap-mask-stroke-color-default)) );stroke-width:var( --xy-minimap-mask-stroke-width-props, var(--xy-minimap-mask-stroke-width, var(--xy-minimap-mask-stroke-width-default)) )}.svelte-flow__minimap-node{fill:var( --xy-minimap-node-background-color-props, var(--xy-minimap-node-background-color, var(--xy-minimap-node-background-color-default)) );stroke:var( --xy-minimap-node-stroke-color-props, var(--xy-minimap-node-stroke-color, var(--xy-minimap-node-stroke-color-default)) );stroke-width:var( --xy-minimap-node-stroke-width-props, var(--xy-minimap-node-stroke-width, var(--xy-minimap-node-stroke-width-default)) )}.svelte-flow__background-pattern.dots{fill:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-dots-color-default)) )}.svelte-flow__background-pattern.lines{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-lines-color-default)) )}.svelte-flow__background-pattern.cross{stroke:var( --xy-background-pattern-color-props, var(--xy-background-pattern-color, var(--xy-background-pattern-cross-color-default)) )}.svelte-flow__controls{display:flex;flex-direction:column;box-shadow:var(--xy-controls-box-shadow, var(--xy-controls-box-shadow-default))}.svelte-flow__controls.horizontal{flex-direction:row}.svelte-flow__controls-button{display:flex;justify-content:center;align-items:center;height:26px;width:26px;padding:4px;border:none;background:var(--xy-controls-button-background-color, var(--xy-controls-button-background-color-default));border-bottom:1px solid var( --xy-controls-button-border-color-props, var(--xy-controls-button-border-color, var(--xy-controls-button-border-color-default)) );color:var( --xy-controls-button-color-props, var(--xy-controls-button-color, var(--xy-controls-button-color-default)) );cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}.svelte-flow__controls-button svg{width:100%;max-width:12px;max-height:12px;fill:currentColor}.svelte-flow__edge.updating .svelte-flow__edge-path{stroke:#777}.svelte-flow__edge-text{font-size:10px}.svelte-flow__node.selectable:focus,.svelte-flow__node.selectable:focus-visible{outline:none}.svelte-flow__node-input,.svelte-flow__node-default,.svelte-flow__node-output,.svelte-flow__node-group{padding:10px;border-radius:var(--xy-node-border-radius, var(--xy-node-border-radius-default));width:150px;font-size:12px;color:var(--xy-node-color, var(--xy-node-color-default));text-align:center;border:var(--xy-node-border, var(--xy-node-border-default));background-color:var(--xy-node-background-color, var(--xy-node-background-color-default))}.svelte-flow__node-input.selectable:hover,.svelte-flow__node-default.selectable:hover,.svelte-flow__node-output.selectable:hover,.svelte-flow__node-group.selectable:hover{box-shadow:var(--xy-node-boxshadow-hover, var(--xy-node-boxshadow-hover-default))}.svelte-flow__node-input.selectable.selected,.svelte-flow__node-input.selectable:focus,.svelte-flow__node-input.selectable:focus-visible,.svelte-flow__node-default.selectable.selected,.svelte-flow__node-default.selectable:focus,.svelte-flow__node-default.selectable:focus-visible,.svelte-flow__node-output.selectable.selected,.svelte-flow__node-output.selectable:focus,.svelte-flow__node-output.selectable:focus-visible,.svelte-flow__node-group.selectable.selected,.svelte-flow__node-group.selectable:focus,.svelte-flow__node-group.selectable:focus-visible{box-shadow:var(--xy-node-boxshadow-selected, var(--xy-node-boxshadow-selected-default))}.svelte-flow__node-group{background-color:var(--xy-node-group-background-color, var(--xy-node-group-background-color-default))}.svelte-flow__nodesselection-rect,.svelte-flow__selection{background:var(--xy-selection-background-color, var(--xy-selection-background-color-default));border:var(--xy-selection-border, var(--xy-selection-border-default))}.svelte-flow__nodesselection-rect:focus,.svelte-flow__nodesselection-rect:focus-visible,.svelte-flow__selection:focus,.svelte-flow__selection:focus-visible{outline:none}.svelte-flow__controls-button:hover{background:var( --xy-controls-button-background-color-hover-props, var(--xy-controls-button-background-color-hover, var(--xy-controls-button-background-color-hover-default)) );color:var( --xy-controls-button-color-hover-props, var(--xy-controls-button-color-hover, var(--xy-controls-button-color-hover-default)) )}.svelte-flow__controls-button:disabled{pointer-events:none}.svelte-flow__controls-button:disabled svg{fill-opacity:.4}.svelte-flow__controls-button:last-child{border-bottom:none}.svelte-flow__resize-control{position:absolute}.svelte-flow__resize-control.left,.svelte-flow__resize-control.right{cursor:ew-resize}.svelte-flow__resize-control.top,.svelte-flow__resize-control.bottom{cursor:ns-resize}.svelte-flow__resize-control.top.left,.svelte-flow__resize-control.bottom.right{cursor:nwse-resize}.svelte-flow__resize-control.bottom.left,.svelte-flow__resize-control.top.right{cursor:nesw-resize}.svelte-flow__resize-control.handle{width:4px;height:4px;border:1px solid #fff;border-radius:1px;background-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));transform:translate(-50%,-50%)}.svelte-flow__resize-control.handle.left{left:0;top:50%}.svelte-flow__resize-control.handle.right{left:100%;top:50%}.svelte-flow__resize-control.handle.top{left:50%;top:0}.svelte-flow__resize-control.handle.bottom{left:50%;top:100%}.svelte-flow__resize-control.handle.top.left,.svelte-flow__resize-control.handle.bottom.left{left:0}.svelte-flow__resize-control.handle.top.right,.svelte-flow__resize-control.handle.bottom.right{left:100%}.svelte-flow__resize-control.line{border-color:var(--xy-resize-background-color, var(--xy-resize-background-color-default));border-width:0;border-style:solid}.svelte-flow__resize-control.line.left,.svelte-flow__resize-control.line.right{width:1px;transform:translate(-50%);top:0;height:100%}.svelte-flow__resize-control.line.left{left:0;border-left-width:1px}.svelte-flow__resize-control.line.right{left:100%;border-right-width:1px}.svelte-flow__resize-control.line.top,.svelte-flow__resize-control.line.bottom{height:1px;transform:translateY(-50%);left:0;width:100%}.svelte-flow__resize-control.line.top{top:0;border-top-width:1px}.svelte-flow__resize-control.line.bottom{border-bottom-width:1px;top:100%}.svelte-flow__edge-label{text-align:center;position:absolute;padding:2px;font-size:10px;cursor:pointer;color:var(--xy-edge-label-color, var(--xy-edge-label-color-default));background:var(--xy-edge-label-background-color, var(--xy-edge-label-background-color-default))}.svelte-flow__nodes,.svelte-flow__edgelabel-renderer{z-index:0}.entity-fields.svelte-cnmrjm{border:1px solid #cbd2d9;border-top:0;border-radius:0 0 4px 4px}.entity-node.svelte-cnmrjm{--entity-color:rgb(145, 196, 242);border-radius:4px;background:#fff;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -2px #0000001a;border-top:8px solid var(--color);min-width:200px}.entity-node.svelte-cnmrjm:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a}.entity-name.svelte-cnmrjm{position:relative;padding:8px;background-color:#f8fafc;border:1px solid rgb(203 213 225);font-size:1.25rem;line-height:1.75rem;font-weight:400;text-align:center}.entity-field.svelte-cnmrjm{position:relative;padding:8px;font-size:.9rem;color:#606f7b;padding-inline-start:16px}.entity-field.svelte-cnmrjm:hover{background:#f5f7fa}.svelte-flow__handle.connectionindicator{visibility:hidden}.filter__group.svelte-1d2g12e{display:flex;align-items:center}.filter__add.svelte-1d2g12e{margin-top:10px}.filter__actions.svelte-1d2g12e{display:flex;justify-content:flex-end;margin-top:10px}.button-icon.svelte-1d2g12e{background:none;border:none;cursor:pointer}.full.svelte-hhc8e3{display:flex;gap:10px}a.active{color:#00f;font-weight:700}\n\n</style>\n  </head>\n  <body>\n    <div id=\"app\"></div>\n  </body>\n</html>\n"
}